<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DB2BZPKYN9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DB2BZPKYN9",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><title data-react-helmet="true">Sleep Timers | AutoPi Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-react-helmet="true" property="og:url" content="https://docs.autopi.io/core/power_management/core-power-sleep-timers/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:title" content="Sleep Timers | AutoPi Documentation"><meta data-react-helmet="true" name="description" content="Sleep timers are a functionality built into the AutoPi who&#x27;s purpose is to protect the battery of your vehicle by"><meta data-react-helmet="true" property="og:description" content="Sleep timers are a functionality built into the AutoPi who&#x27;s purpose is to protect the battery of your vehicle by"><link data-react-helmet="true" rel="shortcut icon" href="/img/shared/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.autopi.io/core/power_management/core-power-sleep-timers/"><link data-react-helmet="true" rel="alternate" href="https://docs.autopi.io/core/power_management/core-power-sleep-timers/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.autopi.io/core/power_management/core-power-sleep-timers/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://7BRH96O31B-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.5d052582.css">
<link rel="preload" href="/assets/js/runtime~main.19026f7d.js" as="script">
<link rel="preload" href="/assets/js/main.e0c20881.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/shared/logo_trans_doc.png" alt="AutoPi Documentation Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/shared/logo_trans_doc_dark.png" alt="AutoPi Documentation Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/getting_started/autopi_tmu_cm4/guides-intro/">Getting Started</a><a class="navbar__item navbar__link" href="/cloud/cloud-intro/">Cloud</a><a class="navbar__item navbar__link" href="/core/core-intro/">Core</a><a class="navbar__item navbar__link" href="/hardware/hardware-intro/">Hardware</a><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><a href="https://demo.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link btn-primary cta-btn">Online Demo</a><a href="https://my.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-btn">My Cloud</a><a href="https://shop.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cta-btn">Shop</a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">AutoPi Documentation</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Getting Started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cloud</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Core</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/core/core-intro/">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Commands</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">Power Management</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/core/power_management/core-power-intro/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/core/power_management/core-power-high/">High-level</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/core/power_management/core-power-low/">Low-level</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/core/power_management/core-power-sleep-timers/">Sleep Timers</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Returners</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Services</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Hardware</a></li><li class="menu__list-item"><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>Sleep Timers</h1></header><p>Sleep timers are a functionality built into the AutoPi who&#x27;s purpose is to protect the battery of your vehicle by
limiting the amount of power required by the device when it&#x27;s plugged into a vehicle. On this page, we will explore how
you can work with the sleep timers using a command and look over some of the configuration options that are available
to manipulate how sleep timers are added and cleared from the device.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="the-powersleep_timer-command"></a>The <code>power.sleep_timer</code> Command<a class="hash-link" href="#the-powersleep_timer-command" title="Direct link to heading">#</a></h2><p>Let us start by going through the command that you can use to view, set and clear sleep timers. The command is
<a href="/core/commands/core-commands-power/#powersleep_timer"><code>power.sleep_timer</code></a>. If you execute the command on its own, it will return
the currently set sleep timers on the device:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer </span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">_sleep_timer/inactivity_fallback:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function: power.sleep</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  _stamp: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2023-05-08T09:26:57.353790&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: _sleep_timer/inactivity_fallback</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  seconds: </span><span class="token number" style="color:rgb(247, 140, 108)">10800</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enabled: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  job_args: </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return_job: </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jid_include: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  maxrunning: </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  job_kwargs:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    delay: </span><span class="token number" style="color:rgb(247, 140, 108)">60</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    reason: inactivity_fallback</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    interval: </span><span class="token number" style="color:rgb(247, 140, 108)">21600</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    confirm: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  metadata:</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    transient: </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    revision: </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expires: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2023-05-08T12:25:13.961144&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    created: </span><span class="token string" style="color:rgb(195, 232, 141)">&#x27;2023-05-08T09:25:13.961144&#x27;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>In the code snippet above, we can see that there is a sleep timer currently set for <code>my_device</code> - the
<code>_sleep_timer/inactivity_fallback</code> sleep timer. That sleep timer will expire at <code>2023-05-08T12:25:13.961144</code> - note
that this timestamp is in UTC, as are all timestamps generated by an AutoPi device. The <code>expires</code> key shows the moment
in time when the device will initiate its &quot;Going to sleep&quot; sequence.</p><p>To clear all sleep timers, we can use the command together with the <code>clear</code> keyword argument, like so:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">clear</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">*</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>We are also able to clear sleep timers based on their name. For example, we have the <code>_sleep_timer/inactivity_fallback</code>
sleep timer above. Note that the actual name of the sleep timer in this example is <code>inactivity_fallback</code>, omitting the
<code>_sleep_timer/</code> part. Now, we can execute the command like below, to clear that specific sleep timer:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">clear</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain">inactivity_fallback</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If we run the <code>power.sleep_timer</code> command on it&#x27;s own and it returns an empty response like below, that means there
are no sleep timers currently set on the device:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If you don&#x27;t see any sleep timers set, that means the device won&#x27;t go down to sleep. Or at least, until a new sleep
timer is set. A new sleep timer can be set in different situations, based on the configuration of the device, but it&#x27;s
important to remember that there could be new sleep timers set, even if you clear all current timers. Usually, this
happens only when the device detects that a trip with a vehicle has ended, using the Event Driven sleep timer (we will
explore that a little later).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="configuration-options"></a>Configuration Options<a class="hash-link" href="#configuration-options" title="Direct link to heading">#</a></h2><p>Now, it&#x27;s time for us to look through how we can configure the automatic sleep timers of the AutoPi. We will explore
first how to automate setting of sleep timers (i.e. when the device should go to sleep and for how long). Then, we will
also look into how we can automate the clearing of sleep timers.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>You can see all available power configuration options <a href="/cloud/device_management/advanced_settings/autopi_tmu_cm4/cloud-config-power/">here</a>.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="power--sleep-timer"></a>Power &gt; Sleep Timer<a class="hash-link" href="#power--sleep-timer" title="Direct link to heading">#</a></h3><p>The <a href="/cloud/device_management/advanced_settings/autopi_tmu_cm4/cloud-config-power/#sleep-timer">sleep timer</a> section of the Advanced Power settings allows you to
configure how the device behaves in terms of setting and clearing sleep timers automatically. The <code>Event Driven</code>,
<code>Inactivity After Sleep</code> and <code>Inactivity Fallback</code> settings configure how the device goes to sleep, while the <code>Suppress</code>
section configures the device on how to stay awake.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="setting-sleep-timers"></a>Setting Sleep Timers<a class="hash-link" href="#setting-sleep-timers" title="Direct link to heading">#</a></h4><p>Firstly, let&#x27;s take a look at the settings that set sleep timers.
The common settings amongst all of them are the following:</p><ul><li><strong>Period</strong> - The period defines how long the device will stay awake for before going to sleep due to this sleep timer.</li><li><strong>Interval</strong> - The interval defines the amount of time the device will sleep for, due to this sleep timer.</li><li><strong>Delay</strong> - The delay is the amount of time to wait before going to sleep. The delay is applied after the period has
expired, but before the device actually powers off.</li></ul><p>Now, let&#x27;s discuss the functionalities each one brings to the table:</p><ul><li><p><strong>Event Driven</strong> - The <code>Even Driven</code> sleep timer get&#x27;s set when the event defined in its <code>Event Regex</code> option is
triggered by the device. This event can either be one of the default ones (like
<a href="/cloud/device_management/events/cloud-events-vehicle/#engine-events">Engine events</a> such as <code>vehicle/engine/stopped</code> or
<a href="/cloud/device_management/events/cloud-events-vehicle/#communication-events">Communication events</a> such as <code>vehicle/communication/disconnected</code>).
The purpose of this sleep timer is to put the device to sleep when we have detected that the vehicle is no longer
being used (hence the engine/stopped instead of engine/running, which we will see in the suppress settings further
down).</p></li><li><p><strong>Inactivity After Sleep</strong> - The <code>Inactivity After Sleep</code> sleep timer get&#x27;s set when the device wakes up and does not
see the event defined in the <em>Suppress &gt; Event Regex</em> configuration (explained in next section). This sleep timer is
usually set when the device wakes up from its sleep due to an expired <code>Interval</code>, but the vehicle the device is
plugged into isn&#x27;t on or running.</p></li><li><p><strong>Inactivity Fallback</strong> - The <code>Inactivity Fallback</code> sleep timer get&#x27;s set when the device has been freshly plugged
into a power source, the event defined in the <code>Event Driven</code> regex isn&#x27;t seen and the suppress event hasn&#x27;t been
triggered in this power cycle. In essence it works exactly the same as the <code>Inactivity After Sleep</code> sleep timer,
however is only triggered upon first plugging in the device into power.</p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="suppressing-sleep-timers"></a>Suppressing Sleep Timers<a class="hash-link" href="#suppressing-sleep-timers" title="Direct link to heading">#</a></h4><p>Now, let&#x27;s explore the <code>Suppress</code> section of the Advanced Power settings. This section defines how the device will
clear and suppress further sleep timers from putting the device to sleep. There&#x27;s two options available in this
section - <code>Event Regex</code> and <code>Schedule</code>.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="event-regex"></a><code>Event Regex</code><a class="hash-link" href="#event-regex" title="Direct link to heading">#</a></h5><p>Let&#x27;s start with the <code>Event Regex</code>. This option allows you to set a regex pattern that will be matched against every
event that get&#x27;s triggered inside the device. What this allows us to do is to set a specific event, that when triggered,
will clear all sleep timers that have been setup on the device. It also prevents new sleep timers from being set until
another event is seen (specifically, the <code>Event Regex</code> from the <code>Event Driven</code> sleep timer).</p><p>Common examples here are using the opposite events from the <code>Event Driven</code> sleep timer:
<a href="/cloud/device_management/events/cloud-events-vehicle/#engine-events">Engine events</a> like <code>vehicle/engine/started</code> or
<a href="/cloud/device_management/events/cloud-events-vehicle/#communication-events">Communication events</a> like <code>vehicle/communication/established</code>. Note that
here, we are looking for an event that shows the vehicle is now being driven, so we want to clear the sleep timers as
we don&#x27;t want the device to go to sleep, but instead record all of our data.</p><h5><a aria-hidden="true" tabindex="-1" class="anchor anchor__h5 anchorWithStickyNavbar_31ik" id="schedule"></a><code>Schedule</code><a class="hash-link" href="#schedule" title="Direct link to heading">#</a></h5><p>Next, we have the <code>Schedule</code> option. That option allows us to setup a schedule for the device for when it should be
awake and how long it should be awake for. This option is useful for situations where you need the device to be awake
at specific times of the day and stay awake for the necessary duration. The way this setting is defined is by writing
a cron expression, then the pipe sign (<code>|</code>), followed by the amount of time the device should be awake for in seconds.
Let&#x27;s go through an example:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">0 9 9 5 * | 3600</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>If we grab just the <code>0 9 9 5 *</code> part, which is the cron expression and paste it into a crontab resolver, we will find
that this expression will be executed on 9th May at 9:00 AM in UTC time. Remember that the devices are all working in
UTC, so this (suppress) expression will also be resolved in UTC. Next, the <code>3600</code> portion says that the device will
stay awake starting at that time for 1 hour in the future.</p><p>This means that the device will be woken up at the appropriate time and then any sleep timers that are added to the
device will be adjusted to ensure the device will be awake for the desired duration. For example, suppose we have set
the suppress schedule to keep the device up for the next hour. Now, if the device automatically adds a sleep timer, or
if we add it manually using the <code>power.sleep_timer</code> command, the new sleep timer set will be adjusted so that it only
puts the device to sleep after the hour from the suppress schedule passes.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="troubleshooting"></a>Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="my-device-is-constantly-shutting-down-even-though-my-vehicle-is-on-and-driving"></a>My Device is Constantly Shutting Down, Even Though My Vehicle is On and Driving<a class="hash-link" href="#my-device-is-constantly-shutting-down-even-though-my-vehicle-is-on-and-driving" title="Direct link to heading">#</a></h3><p>It&#x27;s important to remember that the AutoPi device will automatically setup sleep timers in an attempt to protect your
vehicle&#x27;s battery. This will happen even if there are no custom configurations setup or without any interference by the
user. This usually causes confusion as to why the device isn&#x27;t on, even though it should be on and recording data.</p><p>The cause for this is usually because the device hasn&#x27;t been setup to listen to the correct data and/or events, in order
to suppress (aka clear) sleep timers when the vehicle is being driven. If the device is plugged into an electric vehicle
that can be a bit more difficult to accomplish.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>In case you have any questions, don&#x27;t hesitate to contact us at <a href="mailto:support@autopi.io" target="_blank" rel="noopener noreferrer">support@autopi.io</a>.</p></div></div></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/autopi-io/documentation/edit/master/docs/core/power_management/sleep_timers.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/core/power_management/core-power-low/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Low-level</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/core/returners/core-returners-intro/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-powersleep_timer-command" class="table-of-contents__link">The <code>power.sleep_timer</code> Command</a></li><li><a href="#configuration-options" class="table-of-contents__link">Configuration Options</a><ul><li><a href="#power--sleep-timer" class="table-of-contents__link">Power &gt; Sleep Timer</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a><ul><li><a href="#my-device-is-constantly-shutting-down-even-though-my-vehicle-is-on-and-driving" class="table-of-contents__link">My Device is Constantly Shutting Down, Even Though My Vehicle is On and Driving</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">AutoPi.io</div><ul class="footer__items"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://demo.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Demo Environment</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a href="https://docs.autopi.io/search/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Search Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://community.autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Community</a></li><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/autopi_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 AutoPi.io.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.19026f7d.js"></script>
<script src="/assets/js/main.e0c20881.js"></script>
</body>
</html>