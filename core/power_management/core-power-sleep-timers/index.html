<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-core/power_management/core-power-sleep-timers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Sleep Timers | AutoPi Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-rh="true" name="twitter:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-rh="true" property="og:url" content="https://docs.autopi.io/core/power_management/core-power-sleep-timers/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sleep Timers | AutoPi Documentation"><meta data-rh="true" name="description" content="Sleep timers are a functionality built into the AutoPi who&#x27;s purpose is to protect the battery of your vehicle by"><meta data-rh="true" property="og:description" content="Sleep timers are a functionality built into the AutoPi who&#x27;s purpose is to protect the battery of your vehicle by"><link data-rh="true" rel="icon" href="/img/shared/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.autopi.io/core/power_management/core-power-sleep-timers/"><link data-rh="true" rel="alternate" href="https://docs.autopi.io/core/power_management/core-power-sleep-timers/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.autopi.io/core/power_management/core-power-sleep-timers/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://7BRH96O31B-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DB2BZPKYN9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DB2BZPKYN9",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.f833bd2a.css">
<script src="/assets/js/runtime~main.eb834137.js" defer="defer"></script>
<script src="/assets/js/main.e69d748e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/shared/logo_trans_doc.png"><link rel="preload" as="image" href="/img/shared/logo_trans_doc_dark.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/shared/logo_trans_doc.png" alt="AutoPi Documentation Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/shared/logo_trans_doc_dark.png" alt="AutoPi Documentation Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/getting_started/autopi_tmu_cm4/">Getting Started</a><a class="navbar__item navbar__link" href="/cloud/">Cloud</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/core/">Core</a><a class="navbar__item navbar__link" href="/hardware/">Hardware</a><a class="navbar__item navbar__link" href="/developer_guides/">Guides</a><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><a href="https://my.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-btn">My Cloud</a><a href="https://shop.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cta-btn">Shop</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">AutoPi Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/getting_started/autopi_tmu_cm4/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/developer_guides/">Developer Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/cloud/">Cloud</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/core/">Core</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/core/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/core/commands/">Commands</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/core/power_management/">Power Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/power_management/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/power_management/core-power-high/">High-level</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/core/power_management/core-power-low/">Low-level</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/core/power_management/core-power-sleep-timers/">Sleep Timers</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/core/returners/">Returners</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/core/services/">Services</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hardware/">Hardware</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Core</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Power Management</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Sleep Timers</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Sleep Timers</h1></header><p>Sleep timers are a functionality built into the <a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer">AutoPi</a> who&#x27;s purpose is to protect the battery of your vehicle by
limiting the amount of power required by the device when it&#x27;s plugged into a vehicle. On this page, we will explore how
you can work with the sleep timers using a command and look over some of the configuration options that are available
to manipulate how sleep timers are added and cleared from the device.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-powersleep_timer-command">The <code>power.sleep_timer</code> Command<a href="#the-powersleep_timer-command" class="hash-link" aria-label="Direct link to the-powersleep_timer-command" title="Direct link to the-powersleep_timer-command">​</a></h2>
<p>Let us start by going through the command that you can use to view, set and clear sleep timers. The command is
<a href="/core/commands/core-commands-power/#powersleep_timer"><code>power.sleep_timer</code></a>. If you execute the command on its own, it will return
the currently set sleep timers on the device:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">_sleep_timer/inactivity_fallback:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  function: power.sleep</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  _stamp: &#x27;2023-05-08T09:26:57.353790&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  name: _sleep_timer/inactivity_fallback</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  seconds: 10800</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  enabled: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  job_args: []</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  return_job: false</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  jid_include: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  maxrunning: 1</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  job_kwargs:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    delay: 60</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    reason: inactivity_fallback</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    interval: 21600</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    confirm: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  metadata:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    transient: true</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    revision: 2</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    expires: &#x27;2023-05-08T12:25:13.961144&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    created: &#x27;2023-05-08T09:25:13.961144&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In the code snippet above, we can see that there is a sleep timer currently set for <code>my_device</code> - the
<code>_sleep_timer/inactivity_fallback</code> sleep timer. That sleep timer will expire at <code>2023-05-08T12:25:13.961144</code> - note
that this timestamp is in UTC, as are all timestamps generated by an <a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer">AutoPi</a> device. The <code>expires</code> key shows the moment
in time when the device will initiate its &quot;Going to sleep&quot; sequence.</p>
<p>To clear all sleep timers, we can use the command together with the <code>clear</code> keyword argument, like so:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer clear=*</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>We are also able to clear sleep timers based on their name. For example, we have the <code>_sleep_timer/inactivity_fallback</code>
sleep timer above. Note that the actual name of the sleep timer in this example is <code>inactivity_fallback</code>, omitting the
<code>_sleep_timer/</code> part. Now, we can execute the command like below, to clear that specific sleep timer:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer clear=inactivity_fallback</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we run the <code>power.sleep_timer</code> command on it&#x27;s own and it returns an empty response like below, that means there
are no sleep timers currently set on the device:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@my_device $ power.sleep_timer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If you don&#x27;t see any sleep timers set, that means the device won&#x27;t go down to sleep. Or at least, until a new sleep
timer is set. A new sleep timer can be set in different situations, based on the configuration of the device, but it&#x27;s
important to remember that there could be new sleep timers set, even if you clear all current timers. Usually, this
happens only when the device detects that a trip with a vehicle has ended, using the Event Driven sleep timer (we will
explore that a little later).</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="configuration-options">Configuration Options<a href="#configuration-options" class="hash-link" aria-label="Direct link to Configuration Options" title="Direct link to Configuration Options">​</a></h2>
<p>Now, it&#x27;s time for us to look through how we can configure the automatic sleep timers of the <a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer">AutoPi</a>. We will explore
first how to automate setting of sleep timers (i.e. when the device should go to sleep and for how long). Then, we will
also look into how we can automate the clearing of sleep timers.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>You can see all available power configuration options <a href="/cloud/device_management/advanced_settings/autopi_tmu_cm4/cloud-config-power/">here</a>.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="power--sleep-timer">Power &gt; Sleep Timer<a href="#power--sleep-timer" class="hash-link" aria-label="Direct link to Power &gt; Sleep Timer" title="Direct link to Power &gt; Sleep Timer">​</a></h3>
<p>The <a href="/cloud/device_management/advanced_settings/autopi_tmu_cm4/cloud-config-power/#sleep-timer">sleep timer</a> section of the Advanced Power settings allows you to
configure how the device behaves in terms of setting and clearing sleep timers automatically. The <code>Event Driven</code>,
<code>Inactivity After Sleep</code> and <code>Inactivity Fallback</code> settings configure how the device goes to sleep, while the <code>Suppress</code>
section configures the device on how to stay awake.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="setting-sleep-timers">Setting Sleep Timers<a href="#setting-sleep-timers" class="hash-link" aria-label="Direct link to Setting Sleep Timers" title="Direct link to Setting Sleep Timers">​</a></h4>
<p>Firstly, let&#x27;s take a look at the settings that set sleep timers.
The common settings amongst all of them are the following:</p>
<ul>
<li><strong>Period</strong> - The period defines how long the device will stay awake for before going to sleep due to this sleep timer.</li>
<li><strong>Interval</strong> - The interval defines the amount of time the device will sleep for, due to this sleep timer.</li>
<li><strong>Delay</strong> - The delay is the amount of time to wait before going to sleep. The delay is applied after the period has
expired, but before the device actually powers off.</li>
</ul>
<p>Now, let&#x27;s discuss the functionalities each one brings to the table:</p>
<ul>
<li>
<p><strong>Event Driven</strong> - The <code>Even Driven</code> sleep timer get&#x27;s set when the event defined in its <code>Event Regex</code> option is
triggered by the device. This event can either be one of the default ones (like
<a href="/cloud/device_management/events/cloud-events-vehicle/#engine-events">Engine events</a> such as <code>vehicle/engine/stopped</code> or
<a href="/cloud/device_management/events/cloud-events-vehicle/#communication-events">Communication events</a> such as <code>vehicle/communication/disconnected</code>).
The purpose of this sleep timer is to put the device to sleep when we have detected that the vehicle is no longer
being used (hence the engine/stopped instead of engine/running, which we will see in the suppress settings further
down).</p>
</li>
<li>
<p><strong>Inactivity After Sleep</strong> - The <code>Inactivity After Sleep</code> sleep timer get&#x27;s set when the device wakes up and does not
see the event defined in the <em>Suppress &gt; Event Regex</em> configuration (explained in next section). This sleep timer is
usually set when the device wakes up from its sleep due to an expired <code>Interval</code>, but the vehicle the device is
plugged into isn&#x27;t on or running.</p>
</li>
<li>
<p><strong>Inactivity Fallback</strong> - The <code>Inactivity Fallback</code> sleep timer get&#x27;s set when the device has been freshly plugged
into a power source, the event defined in the <code>Event Driven</code> regex isn&#x27;t seen and the suppress event hasn&#x27;t been
triggered in this power cycle. In essence it works exactly the same as the <code>Inactivity After Sleep</code> sleep timer,
however is only triggered upon first plugging in the device into power.</p>
</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="suppressing-sleep-timers">Suppressing Sleep Timers<a href="#suppressing-sleep-timers" class="hash-link" aria-label="Direct link to Suppressing Sleep Timers" title="Direct link to Suppressing Sleep Timers">​</a></h4>
<p>Now, let&#x27;s explore the <code>Suppress</code> section of the Advanced Power settings. This section defines how the device will
clear and suppress further sleep timers from putting the device to sleep. There&#x27;s two options available in this
section - <code>Event Regex</code> and <code>Schedule</code>.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="event-regex"><code>Event Regex</code><a href="#event-regex" class="hash-link" aria-label="Direct link to event-regex" title="Direct link to event-regex">​</a></h5>
<p>Let&#x27;s start with the <code>Event Regex</code>. This option allows you to set a regex pattern that will be matched against every
event that get&#x27;s triggered inside the device. What this allows us to do is to set a specific event, that when triggered,
will clear all sleep timers that have been setup on the device. It also prevents new sleep timers from being set until
another event is seen (specifically, the <code>Event Regex</code> from the <code>Event Driven</code> sleep timer).</p>
<p>Common examples here are using the opposite events from the <code>Event Driven</code> sleep timer:
<a href="/cloud/device_management/events/cloud-events-vehicle/#engine-events">Engine events</a> like <code>vehicle/engine/started</code> or
<a href="/cloud/device_management/events/cloud-events-vehicle/#communication-events">Communication events</a> like <code>vehicle/communication/established</code>. Note that
here, we are looking for an event that shows the vehicle is now being driven, so we want to clear the sleep timers as
we don&#x27;t want the device to go to sleep, but instead record all of our data.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="schedule"><code>Schedule</code><a href="#schedule" class="hash-link" aria-label="Direct link to schedule" title="Direct link to schedule">​</a></h5>
<p>Next, we have the <code>Schedule</code> option. That option allows us to setup a schedule for the device for when it should be
awake and how long it should be awake for. This option is useful for situations where you need the device to be awake
at specific times of the day and stay awake for the necessary duration. The way this setting is defined is by writing
a cron expression, then the pipe sign (<code>|</code>), followed by the amount of time the device should be awake for in seconds.
Let&#x27;s go through an example:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">0 9 9 5 * | 3600</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>If we grab just the <code>0 9 9 5 *</code> part, which is the cron expression and paste it into a crontab resolver, we will find
that this expression will be executed on 9th May at 9:00 AM in UTC time. Remember that the devices are all working in
UTC, so this (suppress) expression will also be resolved in UTC. Next, the <code>3600</code> portion says that the device will
stay awake starting at that time for 1 hour in the future.</p>
<p>This means that the device will be woken up at the appropriate time and then any sleep timers that are added to the
device will be adjusted to ensure the device will be awake for the desired duration. For example, suppose we have set
the suppress schedule to keep the device up for the next hour. Now, if the device automatically adds a sleep timer, or
if we add it manually using the <code>power.sleep_timer</code> command, the new sleep timer set will be adjusted so that it only
puts the device to sleep after the hour from the suppress schedule passes.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting">Troubleshooting<a href="#troubleshooting" class="hash-link" aria-label="Direct link to Troubleshooting" title="Direct link to Troubleshooting">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="my-device-is-constantly-shutting-down-even-though-my-vehicle-is-on-and-driving">My Device is Constantly Shutting Down, Even Though My Vehicle is On and Driving<a href="#my-device-is-constantly-shutting-down-even-though-my-vehicle-is-on-and-driving" class="hash-link" aria-label="Direct link to My Device is Constantly Shutting Down, Even Though My Vehicle is On and Driving" title="Direct link to My Device is Constantly Shutting Down, Even Though My Vehicle is On and Driving">​</a></h3>
<p>It&#x27;s important to remember that the <a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer">AutoPi</a> device will automatically setup sleep timers in an attempt to protect your
vehicle&#x27;s battery. This will happen even if there are no custom configurations setup or without any interference by the
user. This usually causes confusion as to why the device isn&#x27;t on, even though it should be on and recording data.</p>
<p>The cause for this is usually because the device hasn&#x27;t been setup to listen to the correct data and/or events, in order
to suppress (aka clear) sleep timers when the vehicle is being driven. If the device is plugged into an electric vehicle
that can be a bit more difficult to accomplish.</p>
<br>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lets-keep-in-touch">Let&#x27;s keep in touch!<a href="#lets-keep-in-touch" class="hash-link" aria-label="Direct link to Let&#x27;s keep in touch!" title="Direct link to Let&#x27;s keep in touch!">​</a></h2>
<p>Thank you for choosing AutoPi. We&#x27;re excited to see what you will achieve with your AutoPi device!</p>
<div class="homeGrid_MM9h"><p><a href="https://www.autopi.io/contact/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="/assets/images/favicon-7dbd17fbde1c59c10c74d100e88248c4.ico" width="16" height="16" class="img_ev3q"> <strong>Contact our sales team</strong> You can build on top of AutoPi .</a></p><p><a href="https://www.autopi.io/support/" target="_blank" rel="noopener noreferrer"><img decoding="async" loading="lazy" src="/assets/images/support_icon-9d734923a944c5b17019c3da8704fec7.png" width="512" height="512" class="img_ev3q"> <strong>Get help from our support team</strong> Let us know about your technical questions.</a></p></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/autopi-io/documentation/edit/master/docs/core/power_management/sleep_timers.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/core/power_management/core-power-low/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Low-level</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/core/returners/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Introduction</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-powersleep_timer-command" class="table-of-contents__link toc-highlight">The <code>power.sleep_timer</code> Command</a></li><li><a href="#configuration-options" class="table-of-contents__link toc-highlight">Configuration Options</a><ul><li><a href="#power--sleep-timer" class="table-of-contents__link toc-highlight">Power &gt; Sleep Timer</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a><ul><li><a href="#my-device-is-constantly-shutting-down-even-though-my-vehicle-is-on-and-driving" class="table-of-contents__link toc-highlight">My Device is Constantly Shutting Down, Even Though My Vehicle is On and Driving</a></li></ul></li><li><a href="#lets-keep-in-touch" class="table-of-contents__link toc-highlight">Let&#39;s keep in touch!</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">AutoPi.io</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a href="https://docs.autopi.io/search/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Search Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AutoPi.io.</div></div></div></footer></div>
</body>
</html>