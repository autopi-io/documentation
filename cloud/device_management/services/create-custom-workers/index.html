<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-cloud/device_management/services/create-custom-workers" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Create Custom Workers | AutoPi Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-rh="true" name="twitter:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-rh="true" property="og:url" content="https://docs.autopi.io/cloud/device_management/services/create-custom-workers/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" property="og:type" content="website"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Create Custom Workers | AutoPi Documentation"><meta data-rh="true" name="description" content="In this guide we are going to take a look at how to create workers for any service that is"><meta data-rh="true" property="og:description" content="In this guide we are going to take a look at how to create workers for any service that is"><link data-rh="true" rel="icon" href="/img/shared/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.autopi.io/cloud/device_management/services/create-custom-workers/"><link data-rh="true" rel="alternate" href="https://docs.autopi.io/cloud/device_management/services/create-custom-workers/" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.autopi.io/cloud/device_management/services/create-custom-workers/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://7BRH96O31B-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DB2BZPKYN9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DB2BZPKYN9",{})</script>



<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.f1af4b3e.css">
<script src="/assets/js/runtime~main.847c846f.js" defer="defer"></script>
<script src="/assets/js/main.b5eb0e17.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/shared/logo_trans_doc.png"><link rel="preload" as="image" href="/img/shared/logo_trans_doc_dark.png"><link rel="preload" as="image" href="/img/hardware/autopi_tmu_cm4/TMU_Floating_Topside_V1_scaled.png"><link rel="preload" as="image" href="/img/shared/autopi_devices_trans.png"><link rel="preload" as="image" href="/img/shared/favicon.ico"><link rel="preload" as="image" href="/img/shared/support_icon.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/shared/logo_trans_doc.png" alt="AutoPi Documentation Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/shared/logo_trans_doc_dark.png" alt="AutoPi Documentation Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/getting_started/autopi_tmu_cm4/">Getting Started</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cloud/">Cloud</a><a class="navbar__item navbar__link" href="/core/">Core</a><a class="navbar__item navbar__link" href="/hardware/">Hardware</a><a class="navbar__item navbar__link" href="/developer_guides/">Guides</a><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><a href="https://my.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-btn">My Cloud</a><a href="https://shop.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cta-btn">Shop</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">AutoPi Documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/getting_started/autopi_tmu_cm4/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/developer_guides/">Developer Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/cloud/">Cloud</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/fleet_management/">Fleet Management</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/cloud/device_management/">Device Management</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/device-install-procedure/">Device Install Procedure</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/device_management/dashboard/">Dashboard</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/device_management/events/">Events</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/cloud/device_management/services/">Services</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/services/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/services/create-custom-returners/">Create Custom Returners</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/services/create-custom-services/">Create Custom Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/services/create-custom-triggers/">Create Custom Triggers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cloud/device_management/services/create-custom-workers/">Create Custom Workers</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/cloud-jobs/">Jobs</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/device_management/advanced_settings/autopi_tmu_cm4/">Advanced Settings</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/device_management/triggers/a-guide-to-triggers/">Triggers</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/software-updates/">Software Updates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/move-to-dedicated-environment/">Move Device to a Dedicated Environment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/geofences/">Geofences</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/nested-customers/">Nested Customers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/device_management/templates/">Templates</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/obd-ii/">OBD-II</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/cloud/obd_library/car-explorer-library-manual/">OBD Library</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cloud/accounts/">Accounts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/core/">Core</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/hardware/">Hardware</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_NmtK">API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Cloud</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Device Management</span><meta itemprop="position" content="2"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Services</span><meta itemprop="position" content="3"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Create Custom Workers</span><meta itemprop="position" content="4"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Create Custom Workers</h1></header><p>In this guide we are going to take a look at how to create workers for any service that is
available, be it a default service like the OBD manager or a custom one that you&#x27;ve made for
yourselves. First off we&#x27;re going to explore what can workers be used for and later on in the guide
we&#x27;re going to go through creating an example worker that is going to fetch OBD data and save that
data to a file. Let&#x27;s get started!</p>
<p><img decoding="async" loading="lazy" alt="Service list" src="/assets/images/service_list-4a3c4dcc479987f4db49b227ea1d4fb9.png" width="1823" height="1244" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workers">Workers<a href="#workers" class="hash-link" aria-label="Direct link to Workers" title="Direct link to Workers">​</a></h2>
<p>Now, the real deal - workers. Workers are simply a process that is going to be executed by a
manager in a specific <a href="/core/services/">workflow</a> that is going to eventually yield a
desired output. Workflows are a number of steps that are going to be executed in order to create
that desired output:</p>
<p><img decoding="async" loading="lazy" alt="Worker list" src="/assets/images/worker_list-9fea8776e207e67ecd556c950558cec6.png" width="1823" height="1244" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="lets-create-a-worker">Let&#x27;s Create a Worker<a href="#lets-create-a-worker" class="hash-link" aria-label="Direct link to Let&#x27;s Create a Worker" title="Direct link to Let&#x27;s Create a Worker">​</a></h3>
<p>First off, you&#x27;ll need to decide which manager to use. That really depends on the use case you
have. For example, if you would like to read OBD data, the obd_manager would make the most sense.
If on the other hand you would like to execute some AT command that isn&#x27;t implemented by default,
the ec2x_manager is the one you&#x27;d be looking at.</p>
<p>For the purposes of this guide, we will create a worker inside the obd_manager that will be
fetching some data. We will navigate to the services page (Device &gt; Services) and select the
obd_manager entry on the screen.</p>
<p>The new page that opens up is the home page for the obd_manager where all of its workers reside.
We will create a new worker now. Click on the &#x27;+ Create&#x27; button to open up the creation window.</p>
<p>You&#x27;ll be presented with the following window:</p>
<p><img decoding="async" loading="lazy" alt="Create empty worker" src="/assets/images/create_worker_empty-71d8c90e2c58922cd790439ee9ba9770.png" width="1222" height="719" class="img_ev3q"></p>
<p>Let&#x27;s now get familiar with the interface. There are a few fields that need filling out and then
we will move on to the workflows:</p>
<ol>
<li>
<p><strong>Name</strong>: The name of the worker. This is just for recognizability of the worker.</p>
</li>
<li>
<p><strong>Delay</strong>: This is the delay before the initial start of execution of the worker. This means
that the worker will wait <em>X</em> amount of seconds before initiating the first loop.</p>
</li>
<li>
<p><strong>Interval</strong>: This is the interval between each loop of the worker. As we&#x27;ll see below, you are
able to set the worker to execute multiple times (which is why they&#x27;re so useful). The interval
will be the time that it takes between each execution.</p>
</li>
<li>
<p><strong>Loop</strong>: This is the amount of times the worker will execute within a power cycle of the <a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer">AutoPi</a>
device. You can set this to the following values:</p>
<ol>
<li><em>less than 0</em>: The worker will loop forever and execute the workflow every time</li>
<li><em>0 or more</em>: The worker will loop the amount of times specified and then stop. This can be
used if you want the worker to do a specified amount of work and then stop working. The total
amount of executions that will occur are equal to the loop count + 1.</li>
</ol>
</li>
<li>
<p><strong>Order</strong>: This is the order that the workers are going to be executed in. This is a more
&#x27;global&#x27; field, meaning that it will affect the execution of the rest of the workers in this
service as well. The lowest ordered worker will execute first and then go up from there.</p>
</li>
<li>
<p><strong>Transactional</strong>: This option is useful if there are multiple workflows on the same worker. If
one of the workflows fails, if transactional is enabled, then all the rest of the workflows won&#x27;t
be executed. On the other hand, if it isn&#x27;t enabled, the rest of the workflows will still be
executed.</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflows">Workflows<a href="#workflows" class="hash-link" aria-label="Direct link to Workflows" title="Direct link to Workflows">​</a></h3>
<p>Now that we&#x27;ve gone through the basic options, let&#x27;s take a look at the possibilities for
workflows. Creating a workflow adds a new row on the table below. This is the basic representation
of a workflow. The columns in the table are as follows:</p>
<ol>
<li>
<p><strong>Handler</strong> - handlers are the first step in the workflow. They will communicate with the
device&#x27;s hardware and produce the initial output.</p>
</li>
<li>
<p><strong>args</strong> - the arguments that are to be passed to the handler.</p>
</li>
<li>
<p><strong>kwargs</strong> - the key word arguments that are to be passed to the handler.</p>
</li>
<li>
<p><strong>Converter</strong> - they transform the data to another, usually more usable, form.</p>
</li>
<li>
<p><strong>Trigger</strong> - this is usually the code that decides whether to do something based on the result
of the handler, for example, <a href="/cloud/device_management/triggers/a-guide-to-triggers/">making a beep sound from the device</a>.</p>
</li>
<li>
<p><strong>Filter</strong> - filters are responsible for deciding whether the data that is currently being
manipulated is significant or not. They can stop the flow of execution if they return something
that is considered <a href="https://stackoverflow.com/questions/39983695/what-is-truthy-and-falsy-how-is-it-different-from-true-and-false" target="_blank" rel="noopener noreferrer">falsy</a> -
for example a value of <code>False</code>, <code>None</code>, an empty string, and so on.</p>
</li>
<li>
<p><strong>Enricher</strong> - enrichers.. well.. enrich the data. They add additional data, possibly by
computing the result.</p>
</li>
<li>
<p><strong>Returner</strong> - returners are responsible for returning the result somewhere. For example,
<a href="/cloud/device_management/services/create-custom-returners/">saving the result on a file</a>
or sending it over the internet to some cloud solution. A prime example for a returner is the
<a href="https://www.autopi.io/software-platform/cloud-management" target="_blank" rel="noopener noreferrer">Cloud</a> returner that is responsible for saving the data on <a href="https://my.autopi.io/" target="_blank" rel="noopener noreferrer">my.autopi.io</a>.</p>
</li>
</ol>
<p>All of the above (except for args and kwargs) are also called <em>hooks</em>. We will look into them in
the next section.</p>
<p>Different services have different defaults handlers. The best place to take a look at those
handlers is <a href="/core/services/">the services page</a>. Since the idea we&#x27;re going for in this
guide is to invoke continuous OBD query commands, we&#x27;re going to be using the
<a href="/core/services/core-services-obd-manager/#query">query</a> handler.</p>
<p>The arguments (args) and key-word arguments (kwargs) are specified in JSON format (this means
double quotes instead of single quotes, it took me a while to figure that out the other day). We
want to read out the fuel level every 10 seconds and record that data, so we will specify the
following arguments:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;FUEL_LEVEL&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The key-word arguments aren&#x27;t essential for the worker to work, however they give more control over
how it&#x27;ll operate, so we&#x27;ll specify the following kwargs:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;mode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;force&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Now we&#x27;ve got the first part of a workflow going. From here on out, everything else is optional
depending on your needs. Most of you would want to have some way of saving the data however, for
which you can use a returner. You can view a guide about that <a href="/cloud/device_management/services/create-custom-returners/">here</a>.
Here&#x27;s the final result:</p>
<p><img decoding="async" loading="lazy" alt="Create worker completed" src="/assets/images/create_worker_completed-babf7eb9856d1ebfd69aadc8949cf5f1.png" width="1213" height="652" class="img_ev3q"></p>
<p>The last thing you need to do is to hit Save and let the device sync up with the new changes. After
a service restart, the device should be executing your new service worker.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hooks">Hooks<a href="#hooks" class="hash-link" aria-label="Direct link to Hooks" title="Direct link to Hooks">​</a></h3>
<p>You can create your own custom hooks by creating a new custom module (Device &gt; Custom Code) with
an execution type, but you have to register them to each individual service through the Hooks tab.
Each hook needs to have this specific signature:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">some_function_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># work with result and return some manipulated value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> value</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The important part is that the function receives some result and returns some value. Based on the
output of each hook the workflow might be interrupted. If falsy values are returned at a specific
point in the workflow, the rest of the workflow will stop. <strong>This isn&#x27;t the case</strong> with triggers -
they will always execute, as the logic there might be very valuable to be executed even if there is
an interruption. Even in the case of a thrown exception the trigger will still execute.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="troubleshooting-your-service">Troubleshooting Your Service<a href="#troubleshooting-your-service" class="hash-link" aria-label="Direct link to Troubleshooting Your Service" title="Direct link to Troubleshooting Your Service">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="my-service-doesnt-start--i-dont-see-any-logs-from-my-service">My service doesn&#x27;t start / I dont see any logs from my service<a href="#my-service-doesnt-start--i-dont-see-any-logs-from-my-service" class="hash-link" aria-label="Direct link to My service doesn&#x27;t start / I dont see any logs from my service" title="Direct link to My service doesn&#x27;t start / I dont see any logs from my service">​</a></h4>
<ol>
<li>Check that the service is enabled in the <a href="https://www.autopi.io/software-platform/cloud-management" target="_blank" rel="noopener noreferrer">Cloud</a>, and check that it is part of the engines file in
<code>/etc/salt/minion.d/engines.conf</code></li>
<li>Check that the associated custom module has valid code</li>
<li>Turn on debug logging on the device (In advanced settings), and restart the salt-minion, and
then look for errors.</li>
</ol>
<p>You can use the following command to grep for the specific service:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">sudo tail -f /var/log/salt/minion | grep service_name</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>As a closer - workers are extremely powerful if used correctly. They can execute continuously or a
set amount of times. Workflows within the worker can be set up so that the desired outcome is
reached without having to write complicated custom code. Use them to your advantage whenever you
want to communicate something with the hardware components of the <a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer">AutoPi</a> or with your car directly.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/autopi-io/documentation/edit/master/docs/cloud/device_management/services/create_custom_workers.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cloud/device_management/services/create-custom-triggers/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Create Custom Triggers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cloud/device_management/cloud-jobs/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jobs</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#workers" class="table-of-contents__link toc-highlight">Workers</a><ul><li><a href="#lets-create-a-worker" class="table-of-contents__link toc-highlight">Let&#39;s Create a Worker</a></li><li><a href="#workflows" class="table-of-contents__link toc-highlight">Workflows</a></li><li><a href="#hooks" class="table-of-contents__link toc-highlight">Hooks</a></li><li><a href="#troubleshooting-your-service" class="table-of-contents__link toc-highlight">Troubleshooting Your Service</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div><div class="container margin-top--lg"><div class="row"><div class="col--9"><div class="customFooter_WTfN"><h2>Let&#x27;s stay in touch!</h2><p>Thank you for choosing AutoPi. We&#x27;re excited to see what you will achieve with your new device!</p><div class="cardGrid_P1Qm"><a href="https://shop.autopi.io" class="card_Jf15"><img src="/img/hardware/autopi_tmu_cm4/TMU_Floating_Topside_V1_scaled.png" alt="Buy AutoPi"><strong>Buy AutoPi device</strong><p>Check out our AutoPi shop and buy an AutoPi device.</p></a><a href="https://www.autopi.io/hardware/compare/" class="card_Jf15"><img src="/img/shared/autopi_devices_trans.png" alt="Compare devices"><strong>Compare all AutoPi devices</strong><p>Check which device fits your requirements the best.</p></a><a href="https://www.autopi.io/sales-inquiry/" class="card_Jf15"><img src="/img/shared/favicon.ico" alt="Sales team"><strong>Contact our sales team</strong><p>You can build on top of your AutoPi device.</p></a><a href="https://www.autopi.io/support/" class="card_Jf15"><img src="/img/shared/support_icon.png" alt="Support team"><strong>Contact our support team</strong><p>Let us know about your technical questions.</p></a></div></div></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">AutoPi.io</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a href="https://docs.autopi.io/search/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Search Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 AutoPi.io.</div></div></div></footer></div>
</body>
</html>