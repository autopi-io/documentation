<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DB2BZPKYN9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DB2BZPKYN9",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><title data-react-helmet="true">4G Internet Setup Troubleshooting | AutoPi Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.autopi.io/img/shared/favicon-194x194.png"><meta data-react-helmet="true" property="og:url" content="https://docs.autopi.io/getting_started/autopi_tmu_cm4/4g-internet-setup-troubleshooting/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:title" content="4G Internet Setup Troubleshooting | AutoPi Documentation"><meta data-react-helmet="true" name="description" content="You are experiencing issues connecting to the internet, when connected to the WiFi hotspot on the AutoPi Dongle."><meta data-react-helmet="true" property="og:description" content="You are experiencing issues connecting to the internet, when connected to the WiFi hotspot on the AutoPi Dongle."><link data-react-helmet="true" rel="shortcut icon" href="/img/shared/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.autopi.io/getting_started/autopi_tmu_cm4/4g-internet-setup-troubleshooting/"><link data-react-helmet="true" rel="alternate" href="https://docs.autopi.io/getting_started/autopi_tmu_cm4/4g-internet-setup-troubleshooting/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.autopi.io/getting_started/autopi_tmu_cm4/4g-internet-setup-troubleshooting/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://7BRH96O31B-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.00f5b580.css">
<link rel="preload" href="/assets/js/runtime~main.a9499fc1.js" as="script">
<link rel="preload" href="/assets/js/main.729e94d6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/shared/logo_trans_doc.png" alt="AutoPi Documentation Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/shared/logo_trans_doc_dark.png" alt="AutoPi Documentation Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/getting_started/autopi_tmu_cm4/guides-intro/">Getting Started</a><a class="navbar__item navbar__link" href="/cloud/cloud-intro/">Cloud</a><a class="navbar__item navbar__link" href="/core/core-intro/">Core</a><a class="navbar__item navbar__link" href="/hardware/hardware-intro/">Hardware</a><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><a href="https://demo.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link btn-primary cta-btn">Online Demo</a><a href="https://my.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cloud-btn">My Cloud</a><a href="https://shop.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link cta-btn">Shop</a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/">AutoPi Documentation</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Getting Started</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#" tabindex="0">AutoPi TMU CM4</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/autopi_tmu_cm4/guides-intro/">Getting Started</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/getting_started/autopi_tmu_cm4/4g-internet-setup-troubleshooting/">4G Internet Setup Troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/getting_started/autopi_tmu_cm4/cm4-data-troubleshooting/">Data Troubleshooting</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">AutoPi Mini</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Heavy Duty Vehicles</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Electric Vehicles</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#" tabindex="0">Developer Guides</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Cloud</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Core</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Hardware</a></li><li class="menu__list-item"><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="menu__link"><span>API<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>4G Internet Setup Troubleshooting</h1></header><p>You are experiencing issues connecting to the internet, when connected to the WiFi hotspot on the AutoPi Dongle. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="prerequisites"></a>Prerequisites:<a class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h3><p>Before following this guide, you must have completed the initial <a href="/getting_started/autopi_tmu_cm4/guides-intro/">setup guide</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="check-sim-card"></a>Check SIM Card<a class="hash-link" href="#check-sim-card" title="Direct link to heading">#</a></h3><ol><li><p>Your SIM card must be setup for data. To check this, insert the SIM into another device, like a smartphone or similar. When inserted in the other device you must be able to browse the web.</p></li><li><p>If you ordered a branded version of the AutoPi (Verizon/AT&amp;T), please verify that the network carrier of the SIM card is the same as the brand of the AutoPi.</p></li><li><p>Verify that the SIM card is not pin locked and if it is that you have entered the pin code in the settings. </p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="check-modem-on-hardware"></a>Check Modem on Hardware<a class="hash-link" href="#check-modem-on-hardware" title="Direct link to heading">#</a></h3><p>In the terminal on the WiFi, check that the modem has been found. This can be done by writing the following command:</p><p><code>cmd.run &quot;lsusb&quot; </code></p><p>The output of the command should be similar to this:</p><p><img alt="lsusb" src="/assets/images/lsusb-5f720494e7c939aced31596788e0738a.jpg"></p><p>The important part to look for is the Modem. The ID will be different depending on which modem your device is equipped with:</p><table><thead><tr><th><strong>Modem Manufacturer</strong></th><th><strong>ID</strong></th></tr></thead><tbody><tr><td>Quectel</td><td><code>2c7c:0121</code></td></tr><tr><td>Telit</td><td><code>1bc7:1031</code></td></tr></tbody></table><p>If you ordered a 4G edition and you don&#x27;t find the modem in your list, then please contact <a href="mailto:support@autopi.io" target="_blank" rel="noopener noreferrer">support@autopi.io</a></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="check-modem-setup"></a>Check Modem Setup<a class="hash-link" href="#check-modem-setup" title="Direct link to heading">#</a></h3><p><strong>Check PDP Context:</strong><br>
If your devices is using a Telit Modem is using software version 1.22.7 or newer,
There&#x27;s a command you can run to verify that the modem has been set up correctly. </p><p><code>modem.connection pdp_context</code></p><p>This should return a message that looks like either.</p><p><strong>value:</strong><br>
<strong>- apn: &#x27;&#x27;</strong><br>
<strong>cid: 1</strong><br>
<strong>pdp_type: IPV4V6</strong>  </p><p>or<br>
<strong>value:</strong><br>
<strong>- apn: &#x27;&#x27;</strong><br>
<strong>cid: 1</strong><br>
<strong>pdp_type: IPV4V6</strong><br>
<strong>- apn: &#x27;ims&#x27;</strong><br>
<strong>cid: 2</strong><br>
<strong>pdp_type: IPV4V6</strong>  </p><p>Incase your software version is older than 1.22.7, you can run the following command to get the same information. </p><p><code>modem.connection execute AT+CGDCONT?</code></p><p>This should return a message that looks like either. </p><p><strong>data: &#x27;+CGDCONT: 1, &quot;IPV4V6&quot;,&quot;&quot;,0,0,0,0&#x27;</strong><br>
or<br>
<strong>Data:</strong><br>
<strong>- &#x27;+CGDCONT:1,&quot;IPV4V6&quot;,&quot;&quot;,0,0,0,0&#x27;</strong><br>
<strong>- &#x27;+CGDCONT:2,&quot;IPV4V6&quot;,&quot;ims&quot;,&quot;&quot;,0,0,0,0&#x27;</strong></p><p>If you get the second message after running either command then you can reconfigure the modem by running these three commands.</p><p><code>cmd.run &quot;systemctl stop qmi-manager&quot;</code></p><p><code>modem.connection execute AT+CGDCONT=2</code></p><p><code>cmd.run &quot;systemctl restart qmi-manager&quot;</code></p><p>After restarting your devices you can run the first command again to verify you get the first message. </p><p><strong>Check Firmware Switch:</strong><br>
Check if the firmware switch is set correctly by running this command if you are using software version 1.22.7 or newer.</p><p><code>modem.connection active_firmware_image</code>  </p><p>this should return a message that looks like this.  </p><p><strong>_stamp: &quot;the curent date&quot;</strong><br>
<strong>_type: active_firmware_image</strong><br>
<strong>net_conf:global</strong><br>
<strong>storage_conf: ram</strong><br>
Here we are looking to see if the net_conf is set to global.</p><p>Incase your software version is older than 1.22.7, you can run the following command to get the same informaiton.  </p><p><code>modem.connection execute AT#FWSWITCH?</code></p><p>This should return with a message that looks like this. </p><p><strong>Data:&#x27;FWSWITCH:40:1&#x27;</strong>  </p><p>Incase the FWSWITCH does not start with 40 or net_conf is not global this can be reconfigured manually by running the following command.</p><p><code>modem.connection execute AT#FWSWITCH=40,1</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="checking-qmi-manager-status"></a>Checking qmi-manager Status<a class="hash-link" href="#checking-qmi-manager-status" title="Direct link to heading">#</a></h3><p>The device contains a software manager, which ensure stable connection to the internet. This is called qmi-manager. To check status, please write the following command in the terminal:</p><p><code>cmd.run &quot;qmi-manager status&quot;</code></p><p>The output should be similar what you can see in the image below:</p><p><img alt="qmistatus" src="/assets/images/qmistatus-6ad71a946e4c0f10d004161b3bdb9339.jpg"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="further-checking-of-network"></a>Further Checking of Network<a class="hash-link" href="#further-checking-of-network" title="Direct link to heading">#</a></h3><p>If your device still isn&#x27;t online, you can try running the following two commands. They will tell you a bit more about why the network manager fails:</p><p><code>cmd.run &quot;qmi-manager down&quot;</code>
<code>cmd.run &quot;qmi-manager up&quot;</code></p><p>If the last command reports issue with detecting the SIM card, then double check the orientation of the SIM card and try again.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="tweaks"></a>Tweaks<a class="hash-link" href="#tweaks" title="Direct link to heading">#</a></h3><p>If you experience connection issues where the connection drops sometimes and/or if it is online, but not shown as online on my.autopi.io, then you can try to tweak the MTU from the default value: 1500, to a lower value, in increments (ex. 1500 -&gt; 1450 -&gt; etc).
This can be done on the local configuration tool, by connecting to the device hotspot and opening local.autopi.io in your browser.</p><p>From the terminal located in the top right corner on the webpage, you can run the following two commands to update the MTU and save the changes.</p><p><code>grains.set qmi:mtu xxxx</code><br>
<code>state.sls network.wwan.qmi.config</code></p><p>To verify that these changes have been saved, you can run the following two commands, here you want to check that first command retruns the same value you set, and that the seconed command where mtu= the same value as the one we set.    </p><p><code>grains.get qmi:mtu</code><br>
<code>cmd.run &quot;cat /etc/udhcpc/qmi.override&quot;</code></p><p><strong>NOTE:</strong></p><ul><li>For US Verizon customers, please try this MTU: 1428.     </li><li>For other customer, please try this MTU: 1280.</li></ul><p>If the connection is still not online, then please contact <a href="mailto:support@autopi.io" target="_blank" rel="noopener noreferrer">support@autopi.io</a> for additional help.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="check-connections"></a>Check Connections<a class="hash-link" href="#check-connections" title="Direct link to heading">#</a></h3><p>You can to check if the device can connect to the internet though the 4g connection you can run the following command.</p><p><code>cmd.run &quot;ping -c 5 -I wwan0 google.com&quot;</code></p><p>You can also check the connection to the autopi cloud service by running the following command. </p><p><code>cmd.run &quot;curl -v my.autopi.io&quot;</code></p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="discussion"></a>Discussion<a class="hash-link" href="#discussion" title="Direct link to heading">#</a></h3><p>If you&#x27;d like to discuss this topic with us or other fellow community members, you can do so on our community page dedicated for this guide:
<a href="https://community.autopi.io/t/4g-internet-setup-troubleshooting/235" target="_blank" rel="noopener noreferrer">4G internet setup troubleshooting</a></p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/autopi-io/documentation/edit/master/docs/getting_started/autopi_tmu_cm4/4g_internet_setup_troubleshooting.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/getting_started/autopi_tmu_cm4/guides-intro/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Getting Started</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/getting_started/autopi_tmu_cm4/cm4-data-troubleshooting/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Data Troubleshooting Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites:</a></li><li><a href="#check-sim-card" class="table-of-contents__link">Check SIM Card</a></li><li><a href="#check-modem-on-hardware" class="table-of-contents__link">Check Modem on Hardware</a></li><li><a href="#check-modem-setup" class="table-of-contents__link">Check Modem Setup</a></li><li><a href="#checking-qmi-manager-status" class="table-of-contents__link">Checking qmi-manager Status</a></li><li><a href="#further-checking-of-network" class="table-of-contents__link">Further Checking of Network</a></li><li><a href="#tweaks" class="table-of-contents__link">Tweaks</a></li><li><a href="#check-connections" class="table-of-contents__link">Check Connections</a></li><li><a href="#discussion" class="table-of-contents__link">Discussion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">AutoPi.io</div><ul class="footer__items"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://demo.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Demo Environment</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a href="https://docs.autopi.io/search/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Search Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://community.autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Community</a></li><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/autopi_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2024 AutoPi.io.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a9499fc1.js"></script>
<script src="/assets/js/main.729e94d6.js"></script>
</body>
</html>