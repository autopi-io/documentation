<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<title data-react-helmet="true">Create service workers | AutoPi Documentation</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Create service workers | AutoPi Documentation"><meta data-react-helmet="true" name="description" content="In this guide we are going to take a look at how to create workers for any service that is available, be it a default service like the OBD manager or a custom one that you&#x27;ve made for yourselves. First off we&#x27;re going to explore what can workers be used for and later on in the guide we&#x27;re going to go through creating an example worker that is going to fetch OBD data and save that data to a file. Let&#x27;s get started!"><meta data-react-helmet="true" property="og:description" content="In this guide we are going to take a look at how to create workers for any service that is available, be it a default service like the OBD manager or a custom one that you&#x27;ve made for yourselves. First off we&#x27;re going to explore what can workers be used for and later on in the guide we&#x27;re going to go through creating an example worker that is going to fetch OBD data and save that data to a file. Let&#x27;s get started!"><meta data-react-helmet="true" property="og:url" content="https://autopi-io.github.io/guides/create-service-workers"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://autopi-io.github.io/guides/create-service-workers"><link rel="stylesheet" href="/styles.6ced5167.css">
<link rel="preload" href="/styles.556d9b0f.js" as="script">
<link rel="preload" href="/runtime~main.0b108bb7.js" as="script">
<link rel="preload" href="/main.dbb39d2c.js" as="script">
<link rel="preload" href="/1.8b8f6fb7.js" as="script">
<link rel="preload" href="/2.5d95c8b1.js" as="script">
<link rel="preload" href="/75.3e85050c.js" as="script">
<link rel="preload" href="/935f2afb.a6fa420d.js" as="script">
<link rel="preload" href="/17896441.b85b8217.js" as="script">
<link rel="preload" href="/12de6cd4.9c7b99d0.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/cloud/cloud-intro">Cloud</a><a class="navbar__item navbar__link" href="/core/core-intro">Core</a><a class="navbar__item navbar__link" href="/guides/guides-intro">Guides</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud/cloud-intro">Cloud</a></li><li class="menu__list-item"><a class="menu__link" href="/core/core-intro">Core</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/guides-intro">Guides</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/guides-intro">Introduction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/guides/create-service-workers">Create service workers</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Create service workers</h1></header><div class="markdown"><p>In this guide we are going to take a look at how to create workers for any service that is available, be it a default service like the OBD manager or a custom one that you&#x27;ve made for yourselves. First off we&#x27;re going to explore what can workers be used for and later on in the guide we&#x27;re going to go through creating an example worker that is going to fetch OBD data and save that data to a file. Let&#x27;s get started!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="services-also-called-managers"></a>Services (also called managers)<a aria-hidden="true" tabindex="-1" class="hash-link" href="#services-also-called-managers" title="Direct link to heading">#</a></h2><p>To understand workers, one first needs to understand what services are. Services are basically a separate, child process that is running in the background that is managed by a parent process (more specifically, the salt minion). If that process fails, salt will make sure that it is started up again and the error is reported as needed. </p><p>More importantly however, the default services that come with an AutoPi are the preferred point of communication between the Core software and their hardware counterpart. For example the OBD manager is responsible of communicating directly with the STN chip to get communications with a vehicle working. This makes services a very convenient place for operations that are closely related to specific parts of an AutoPi device.</p><p><img alt="service_list|690x345, 100%" src="/assets/images/service_list-64965fddb0ae5bb21ad459fc2040ab08.png"> </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="workers"></a>Workers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#workers" title="Direct link to heading">#</a></h2><p>Now, the real deal - workers. Workers are simply a process that is going to be executed by a manager in a specific <a href="http://docs.autopi.io/services/" target="_blank" rel="noopener noreferrer">workflow</a> that is going to eventually yield a desired output. Workflows are a number of steps that are going to be executed in order to create that desired output:</p><p><img alt="worker_list|690x268" src="/assets/images/worker_list-2ac13819a67be1d435e8a675b464fd45.png"> </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="lets-create-a-worker"></a>Let&#x27;s create a worker<a aria-hidden="true" tabindex="-1" class="hash-link" href="#lets-create-a-worker" title="Direct link to heading">#</a></h3><p>First off, you&#x27;ll need to decide which manager to use. That really depends on the use case you have. For example, if you would like to read OBD data, the obd_manager would make the most sense. If on the other hand you would like to execute some AT command that isn&#x27;t implemented by default, the ec2x_manager is the one you&#x27;d be looking at.</p><p>For the purposes of this guide, we will create a worker inside the obd_manager that will be fetching some data. We will navigate to the services page (Advanced &gt; Services) and select the obd_manager entry on the screen.</p><p>The new page that opens up is the home page for the obd_manager where all of its workers reside. We will create a new worker now. Click on the &#x27;+ Create&#x27; button to open up the creation window.</p><p><img alt="create_button|228x287" src="data:image/png;base64,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"> </p><p>You&#x27;ll be presented with the following window:</p><p><img alt="create_worker_empty|690x405" src="/assets/images/create_worker_empty-71d8c90e2c58922cd790439ee9ba9770.png"> </p><p>Let&#x27;s now get familiar with the interface. There are a few fields that need filling out and then we will move on to the workflows:</p><ol><li><p><strong>Name</strong>: The name of the worker. This is just for recognizability of the worker.</p></li><li><p><strong>Delay</strong>: This is the delay before the initial start of execution of the worker. This means that the worker will wait <em>X</em> amount of seconds before initiating the first loop.</p></li><li><p><strong>Interval</strong>: This is the interval between each loop of the worker. As we&#x27;ll see below, you are able to set the worker to execute multiple times (which is why they&#x27;re so useful). The interval will be the time that it takes between each execution.</p></li><li><p><strong>Loop</strong>: This is the amount of times the worker will execute within a power cycle of the AutoPi device. You can set this to the following values:</p><ol><li><em>less than 0</em>: The worker will loop forever and execute the workflow every time</li><li><em>0</em>: The worker won&#x27;t work. This is the equivalent of disabling the worker.</li><li><em>more than 0</em>: The worker will loop the amount of times specified and then stop. This can be used if you want the worker to do a specified amount of work and then stop working.</li></ol></li><li><p><strong>Order</strong>: This is the order that the workers are going to be executed in. This is a more &#x27;global&#x27; field, meaning that it will affect the execution of the rest of the workers in this service as well. The lowest ordered worker will execute first and then go up from there.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="workflows"></a>Workflows<a aria-hidden="true" tabindex="-1" class="hash-link" href="#workflows" title="Direct link to heading">#</a></h3><p>Now that we&#x27;ve gone through the basic options, let&#x27;s take a look at the possibilities for workflows. Creating a workflow adds a new row on the table below. This is the basic representation of a workflow. The columns in the table are as follows:</p><ol><li><p><strong>Handler</strong> - handlers are the first step in the workflow. They will communicate with the device&#x27;s hardware and produce the initial output.</p></li><li><p><strong>args</strong> - the arguments that are to be passed to the handler.</p></li><li><p><strong>kwargs</strong> - the key word arguments that are to be passed to the handler.</p></li><li><p><strong>Converter</strong> - they transform the data to another, usually more usable, form.</p></li><li><p><strong>Trigger</strong> - this is usually the code that decides whether to do something based on the result of the handler, for example, <a href="https://community.autopi.io/t/custom-code-write-custom-trigger-to-play-beep-sound-when-speeding/1566" target="_blank" rel="noopener noreferrer">making a beep sound from the device</a>.</p></li><li><p><strong>Filter</strong> - filters are responsible for deciding whether the data that is currently being manipulated is significant or not. They can stop the flow of execution if they return something that is considered <a href="https://stackoverflow.com/questions/39983695/what-is-truthy-and-falsy-how-is-it-different-from-true-and-false" target="_blank" rel="noopener noreferrer">falsy</a> - for example a value of <code>False</code>, <code>None</code>, an empty string, and so on. </p></li><li><p><strong>Enricher</strong> - enrichers.. well.. enrich the data. They add additional data, possibly by computing the result.</p></li><li><p><strong>Returner</strong> - returners are responsible for returning the result somewhere. For example, <a href="https://community.autopi.io/t/custom-code-redirect-logged-data-and-store-it-in-a-file-or-anywhere/1521" target="_blank" rel="noopener noreferrer">saving the result on a file</a> or sending it over the internet to some cloud solution. A prime example for a returner is the cloud returner that is responsible for saving the data on my.autopi.io</p></li></ol><p>All of the above (except for args and kwargs) are also called <em>hooks</em>. We will look into them in the next section.</p><p>Different services have different defaults handlers. The best place to take a look at those handlers is <a href="http://docs.autopi.io/services/" target="_blank" rel="noopener noreferrer">our documentation website</a>. Since the idea we&#x27;re going for in this guide is to invoke continuous OBD query commands, we&#x27;re going to be using the <a href="http://docs.autopi.io/services/obd_manager/#query" target="_blank" rel="noopener noreferrer">query</a> handler.</p><p>The arguments (args) and key-word arguments (kwargs) are specified in JSON format (this means double quotes instead of single quotes, it took me a while to figure that out the other day). We want to read out the fuel level every 10 seconds and record that data, so we will specify the following arguments:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;FUEL_LEVEL&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span></div></div></div></div></div><p>The key-word arguments aren&#x27;t essential for the worker to work, however they give more control over how it&#x27;ll operate, so we&#x27;ll specify the following kwargs:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-json codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;mode&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;force&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div></div></div><p>Now we&#x27;ve got the first part of a workflow going. From here on out, everything else is optional depending on your needs. Most of you would want to have some way of saving the data however, for which you can use a returner. You can view a guide about that <a href="https://community.autopi.io/t/custom-code-redirect-logged-data-and-store-it-in-a-file-or-anywhere/1521" target="_blank" rel="noopener noreferrer">here</a>. Here&#x27;s the final result:</p><p><img alt="create_worker_completed|690x370" src="/assets/images/create_worker_completed-babf7eb9856d1ebfd69aadc8949cf5f1.png"></p><p>The last thing you need to do is to hit Save and let the device sync up with the new changes. After a service restart, the device should be executing your new service worker.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="hooks"></a>Hooks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#hooks" title="Direct link to heading">#</a></h3><p>You can create your own custom hooks by creating a new custom module (Advanced &gt; Custom Code) with an execution type, but you have to register them to each individual service through the Hooks tab. Each hook needs to have this specific signature:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-python codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">some_function_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># work with result and return some manipulated value</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> value</span></div></div></div></div></div><p>The important part is that the function receives some result and returns some value. Based on the output of each hook the workflow might be interrupted. If falsy values are returned at a specific point in the workflow, the rest of the workflow will stop. <strong>This isn&#x27;t the case</strong> with triggers - they will always execute, as the logic there might be very valuable to be executed even if there is an interruption. Even in the case of a thrown exception the trigger will still execute.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="conclusion"></a>Conclusion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>As a closer - workers are extremely powerful if used correctly. They can execute continuously or a set amount of times. Workflows within the worker can be set up so that the desired outcome is reached without having to write complicated custom code. Use them to your advantage whenever you want to communicate something with the hardware components of the AutoPi or with your car directly.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/guides-intro"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Introduction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#services-also-called-managers" class="table-of-contents__link">Services (also called managers)</a></li><li><a href="#workers" class="table-of-contents__link">Workers</a><ul><li><a href="#lets-create-a-worker" class="table-of-contents__link">Let&#39;s create a worker</a></li><li><a href="#workflows" class="table-of-contents__link">Workflows</a></li><li><a href="#hooks" class="table-of-contents__link">Hooks</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">AutoPi.io</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://community.autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Community</a></li><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/autopi_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 AutoPi.io.</div></div></div></footer></div>
<script src="/styles.556d9b0f.js"></script>
<script src="/runtime~main.0b108bb7.js"></script>
<script src="/main.dbb39d2c.js"></script>
<script src="/1.8b8f6fb7.js"></script>
<script src="/2.5d95c8b1.js"></script>
<script src="/75.3e85050c.js"></script>
<script src="/935f2afb.a6fa420d.js"></script>
<script src="/17896441.b85b8217.js"></script>
<script src="/12de6cd4.9c7b99d0.js"></script>
</body>
</html>