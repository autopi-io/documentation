<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><title data-react-helmet="true">Install camera on your AutoPi | AutoPi Documentation</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Install camera on your AutoPi | AutoPi Documentation"><meta data-react-helmet="true" name="description" content="Hello everyone!"><meta data-react-helmet="true" property="og:description" content="Hello everyone!"><meta data-react-helmet="true" property="og:url" content="https://docs.autopi.io/guides/install-camera-on-your-autopi"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://docs.autopi.io/guides/install-camera-on-your-autopi"><link rel="stylesheet" href="/styles.aca490d6.css">
<link rel="stylesheet" href="/main.7c4e9e04.css">
<link rel="preload" href="/styles.e9135ec8.js" as="script">
<link rel="preload" href="/runtime~main.012f0a1d.js" as="script">
<link rel="preload" href="/main.6619cae4.js" as="script">
<link rel="preload" href="/1.f7e7dec2.js" as="script">
<link rel="preload" href="/2.bf67afb6.js" as="script">
<link rel="preload" href="/80.4077729e.js" as="script">
<link rel="preload" href="/83.2bac8619.js" as="script">
<link rel="preload" href="/935f2afb.69eb5f0f.js" as="script">
<link rel="preload" href="/17896441.fedb435a.js" as="script">
<link rel="preload" href="/572a699b.6f1d0ff9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/cloud/cloud-intro">Cloud</a><a class="navbar__item navbar__link" href="/core/core-intro">Core</a><a class="navbar__item navbar__link" href="/guides/guides-intro">Guides</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud/cloud-intro">Cloud</a></li><li class="menu__list-item"><a class="menu__link" href="/core/core-intro">Core</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/guides-intro">Guides</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/guides-intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/create-service-workers">Create service workers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/how-to-export-data-from-api">How to export data from API</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/guides/install-camera-on-your-autopi">Install camera on your AutoPi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/log-raw-can-messages">Log raw CAN messages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/setup-your-tmu-diy-edition">Setup your TMU DiY Edition</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Install camera on your AutoPi</h1></header><div class="markdown"><p>Hello everyone!</p><p>Today, we&#x27;re going to explore how you can attach an external USB camera to your AutoPi device and make some use out of it.
There is one prerequisite however - you need to be able to SSH into your dongle. We already have a guide on that which you can
take a look at <a href="https://community.autopi.io/t/guide-how-to-ssh-to-your-dongle/386" target="_blank" rel="noopener noreferrer">here</a>.</p><p>Firstly, we need to do some initial setup to get the AutoPi ready to use an external USB web camera. Let&#x27;s start with the
software that we&#x27;re going to use:</p><ol><li><p><a href="https://motion-project.github.io/motion_guide.html" target="_blank" rel="noopener noreferrer">motion</a> - Motion is a daemon service that is responsible for communicating
with the camera. It&#x27;ll setup the devices (<code>/dev/video*</code>) and get them started.</p></li><li><p><a href="https://github.com/ccrisan/motioneyeA" target="_blank" rel="noopener noreferrer">motionEye</a> - MotionEye is a web based frontend for motion. It provides an
easy to use interface to setup configuration for each camera and also shows what the cameras are currently seeing.</p></li></ol><p>Installing both of them should be as easy as installing any other package on a debian system. We will use the <code>apt</code> command.
The next command installs motion daemon and its dependencies:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo apt install motion</span></div></div></div></div></div><p>Let&#x27;s now prepare for the installation of motioneye - there are some dependencies that need to be installed:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo apt install python-dev libssl-dev libcurl4-openssl-dev libjpeg-dev libz-dev</span></div></div></div></div></div><p>Now that we&#x27;ve got the dependencies installed, let&#x27;s install motioneye itself:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo pip install motioneye</span></div></div></div></div></div><p><strong>Note</strong>: If pillow installation fails, you can try installing it from official repos using <code>apt install python-pillow</code>.</p><p>After successfully installing motion and motioneye we now need to prepare some directories for them to use.
The next two commands will create the motioneye configuration directory and copy the default configuration file in that directory:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo mkdir -p /etc/motioneye</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo cp /usr/local/share/motioneye/extra/motioneye.conf.sample /etc/motioneye/motion.conf</span></div></div></div></div></div><p>Now, let&#x27;s create the directory in which motioneye will save our video files to:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo mkdir -p /var/lib/motioneye</span></div></div></div></div></div><p>Finally, let&#x27;s create a service file for motioneye so that the system can automatically start it up:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo cp /usr/local/share/motioneye/extra/motioneye.systemd-unit-local /etc/systemd/system/motioneye.service</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo systemctl daemon-reload</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo systemctl enable motioneye</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ sudo systemctl restart motioneye</span></div></div></div></div></div><p>At this point, the web interface should be running on the device, however you probably won&#x27;t be able to access it from your computer or
mobile phone. Instead, it&#x27;s only accessible from the device itself. This is because there are some firewall settings that have been
implemented on the device and we need to add a new exception. We can do that by navigating to the Advanced &gt; Settings menu in my.autopi.io.
There, one of the inner tabs called System should contain an entry called Network &gt; Firewall. Let&#x27;s add the following new entry to the list:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">-A INPUT -s 192.168.4.0/24 -i uap0 -p tcp --dport 8765 -j ACCEPT</span></div></div></div></div></div><p><strong>NOTE</strong>: 8765 is only the default port for MotionEye. If you happen to change the port number, please make sure to add the rule
with the respective new port number.</p><p>What this entry will do is allow all TCP traffic that comes from the AutoPi&#x27;s WiFi network interface through port 8765 to be accepted.
This will allow you to navigate to the following link: local.autopi.io:8765. There you&#x27;ll finally be able to see the MotionEye frontend interface.</p><p>At this point, you should be able to plug in the camera to your device&#x27;s micro-usb, wait a few seconds and see the video feed on your screen.
You should also be able to see the settings for the camera by clicking on the &#x27;burger-menu&#x27; button on the top left of the website. If
you&#x27;re unable to see a long list of settings, try reloging as an admin. If this still doesn&#x27;t do the trick, try restarting the motion and
motioneye services using the following commands:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">sudo systemctl restart motion motioneye</span></div></div></div></div></div><p>Now we will move on to some pointers on how to get started with certain, popular projects.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="setting-up-basic-camera-settings"></a>Setting up basic camera settings<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setting-up-basic-camera-settings" title="Direct link to heading">#</a></h3><p>Sometimes the image on the camera can be very dim or with a low resolution as a default. The general settings for the camera can be found under
the &quot;Video Device&quot; section. Settings such as brightness, contrast, sharpness and video resolution can be set up there. This should allow you to
fine tune your camera for the environment you&#x27;re looking to use it in. There is also the ability to automatically set the brighness and exposure
of the camera. </p><p>Furthermore, you&#x27;re also able to change the default location of where the video files (recordings) are saved. The default location is
<code>/var/lib/motioneye/Camera1</code>, however you can change that by going under the &quot;File Storage&quot; section.</p><p>There you&#x27;re also able to setup a webhook or a command to be called whenever a new file has been saved on the file system.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="recording-all-the-time"></a>Recording all the time<a aria-hidden="true" tabindex="-1" class="hash-link" href="#recording-all-the-time" title="Direct link to heading">#</a></h3><p>Setting up a constantly recording camera is very simple. All you need to do is to go to your motioneye website
(local.autopi.io:8765 while connected to the AutoPi device hotspot) and open the settings for the camera. In the list there should be a section
called &quot;Movies&quot;. You will need to turn on the movies section (which will enable the camera to record). In the Recording Mode field, select
&quot;Continuous Recording&quot; (It&#x27;s of course also possible to have the recording based on motion detection). The rest of the settings can be selected
based on personal preference. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="motion-detection"></a>Motion detection<a aria-hidden="true" tabindex="-1" class="hash-link" href="#motion-detection" title="Direct link to heading">#</a></h3><p>Apart from the ability to record only when the camera detects motion, you can also do some other cool things. For example, you
can set up a mail notification or a webhook to be called whenever there is some motion. There is also the option to execute a
command on the AutoPi either when a motion is detected or when the motion ends. That is to say, after the camera has started
detecting motion, it can also execute a command when there is no more motion detected by it.</p><p>You can find those settings under the &quot;Motion Detection&quot; and &quot;Motion Notification&quot; settings. In the Motion Detection section you can
fine tune how you would like the motion to be detected, with higher or lower thresholds, for specific amount of frames and so on.
&quot;Motion Notifications&quot; section is where you can setup the triggers to be executed whenever a motion is detected (or after).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="extra-fine-tuning"></a>Extra fine tuning<a aria-hidden="true" tabindex="-1" class="hash-link" href="#extra-fine-tuning" title="Direct link to heading">#</a></h3><p>For the more tech-savvy or adventurous people out there, there is also some configuration options that work directly with motion.
Remember that MotionEye is actually a front-end application that communicates directly with motion. This means that all the options
that are available on MotionEye are also available on Motion, however much more detailed. For example, there are more events that can
be used with Motion than there are with MotionEye. One really good example is <code>on_camera_lost</code> which will trigger whenever a camera
can&#x27;t be found or when a camera is lost during its work, which allows you to set a notification if your camera stops working.</p><p>You can look at all the configuration options available for Motion in <a href="https://motion-project.github.io/motion_config.html" target="_blank" rel="noopener noreferrer">this</a> link.
The documentation can be a bit overwhelming at first, however the developers have set it up in a neat way where there is a list of
all the options in alphabetical order first and then a list of the same options based on category.
Afterwards, there is a long list of the description of each option. </p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/how-to-export-data-from-api"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« How to export data from API</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/guides/log-raw-can-messages"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Log raw CAN messages Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#setting-up-basic-camera-settings" class="table-of-contents__link">Setting up basic camera settings</a></li><li><a href="#recording-all-the-time" class="table-of-contents__link">Recording all the time</a></li><li><a href="#motion-detection" class="table-of-contents__link">Motion detection</a></li><li><a href="#extra-fine-tuning" class="table-of-contents__link">Extra fine tuning</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">AutoPi.io</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://community.autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Community</a></li><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/autopi_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 AutoPi.io.</div></div></div></footer></div>
<script src="/styles.e9135ec8.js"></script>
<script src="/runtime~main.012f0a1d.js"></script>
<script src="/main.6619cae4.js"></script>
<script src="/1.f7e7dec2.js"></script>
<script src="/2.bf67afb6.js"></script>
<script src="/80.4077729e.js"></script>
<script src="/83.2bac8619.js"></script>
<script src="/935f2afb.69eb5f0f.js"></script>
<script src="/17896441.fedb435a.js"></script>
<script src="/572a699b.6f1d0ff9.js"></script>
</body>
</html>