<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.65">
<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><title data-react-helmet="true">A guide to Triggers | AutoPi Documentation</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="A guide to Triggers | AutoPi Documentation"><meta data-react-helmet="true" name="description" content="The possibilities are endless with the AutoPi device. This guide will be introducing and explaining how to use, create and edit"><meta data-react-helmet="true" property="og:description" content="The possibilities are endless with the AutoPi device. This guide will be introducing and explaining how to use, create and edit"><meta data-react-helmet="true" property="og:url" content="https://docs.autopi.io/guides/a-guide-to-triggers"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://docs.autopi.io/guides/a-guide-to-triggers"><link rel="stylesheet" href="/styles.aca490d6.css">
<link rel="stylesheet" href="/main.40d522cd.css">
<link rel="preload" href="/styles.f7592765.js" as="script">
<link rel="preload" href="/runtime~main.3fbb1f7a.js" as="script">
<link rel="preload" href="/main.196a282e.js" as="script">
<link rel="preload" href="/1.7e18b335.js" as="script">
<link rel="preload" href="/2.6485ac40.js" as="script">
<link rel="preload" href="/1197c81d.ac4d078e.js" as="script">
<link rel="preload" href="/96.507e57fc.js" as="script">
<link rel="preload" href="/95.7001aec8.js" as="script">
<link rel="preload" href="/935f2afb.8a3badaa.js" as="script">
<link rel="preload" href="/17896441.e932183c.js" as="script">
<link rel="preload" href="/4a7c8850.e34c2fda.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo"><strong class="navbar__title"></strong></a><a class="navbar__item navbar__link" href="/cloud/cloud-intro">Cloud</a><a class="navbar__item navbar__link" href="/core/core-intro">Core</a><a class="navbar__item navbar__link" href="/guides/guides-intro">Guides</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">âŒ˜</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo"><strong class="navbar__title"></strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/cloud/cloud-intro">Cloud</a></li><li class="menu__list-item"><a class="menu__link" href="/core/core-intro">Core</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/guides-intro">Guides</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/guides-intro">Introduction</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Api</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/api/how-to-export-data-from-api">How to export data from API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/api/send-device-data-to-own-server">Send device data to own server</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Business</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/guides/business/move-to-dedicated-environment">Move a device to a dedicated environment</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/4g-internet-setup-troubleshooting">4G internet setup troubleshooting</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/guides/a-guide-to-triggers">A guide to Triggers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/autopi-gpio-pinout">AutoPi GPIO pinout</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/create-service-workers">Create service workers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/how-to-ssh-to-your-device">How to SSH to your device</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/install-camera-on-your-autopi">Install camera on your AutoPi</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/log-raw-can-messages">Log raw CAN messages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/remotely-waking-up-your-device">Remotely waking up your device</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/setup-your-tmu-diy-edition">Setup your TMU DiY Edition</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/using-the-gpio-and-hdmi-connector-with-the-autopi-gen-2-casing">Using the GPIO and HDMI connector with the AutoPi Gen 2 casing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/guides/using-the-rpi3-adapter">Using the RPi3 adapter</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">A guide to Triggers</h1></header><div class="markdown"><p>The possibilities are endless with the AutoPi device. This guide will be introducing and explaining how to use, create and edit
triggers with your device. Triggers will allow you to get notifications both based on events from the device, but also all the
various data points, that are logged from the car.</p><p><img alt="intro_pic" src="/assets/images/intro_pic-0466ceeb09f76d82676c1c00dc70335d.png"> </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="what-are-triggers"></a>What are triggers?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-are-triggers" title="Direct link to heading">#</a></h2><p>Triggers are a way to receive notifications when specific events occur on the device. Conditions can also be set on the triggers so
that the notifications are only sent when those conditions have been met.</p><p>More specifically, whenever a device recieves an event (e.g. <code>vehicle/engine/running</code>) it will push that event and the data that comes
with it to the Cloud. When the Cloud system receives that data, it&#x27;ll process it and find out if there are any triggers that need to
be executed based on the event name (also known as a tag) and the conditions for each trigger that matches the tag.</p><p>You can set up or edit these triggers on the AutoPi Cloud. As mentioned earlier, triggers are based on event from the device, and
a trigger can have zero or more conditions that needs to be met before it is triggered. Once the condition(s) have been met, the
trigger will execute the attached action(s), i.e. a notification will be sent to you notifying you of this event, either via email
or a webhook request.</p><p>In this guide we will explore how you can setup a trigger on your own. We will create a trigger that will notify you whenever your
vehicle has been started outside of specified hours - 8 PM until 8 AM. We will make use of the event <code>vehicle/engine/running</code>, which
is fired when the vehicle&#x27;s engine is started.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="heres-how-to-start"></a>Here&#x27;s how to start<a aria-hidden="true" tabindex="-1" class="hash-link" href="#heres-how-to-start" title="Direct link to heading">#</a></h2><p>Once, you have received your AutoPi device, and you have registered it (click <a href="https://www.autopi.io/getting-started/" target="_blank" rel="noopener noreferrer">HERE</a> to see
the getting started guide, if you have not already done so) and you are all set to go and can begin creating your own triggers.
Let&#x27;s get started with the guide.</p><ol><li>Firstly, we need to go over to the Triggers page. You can find it by logging into <a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer">https://my.autopi.io</a> and selecting the
&quot;Triggers&quot; option from the menu. There, you&#x27;ll see a &quot;Create&quot; button. When you press that button a pop-up window will show up with
the form to create a trigger.</li></ol><p><img alt="create_trigger_form" src="/assets/images/create_trigger_form-5e91e4c320d7e7d58398065cbb509a45.jpg"></p><ol start="2"><li><p>Next, let&#x27;s fill out that form. We&#x27;ll go through the options that are available in the form and explain each one of them.</p><ol><li><p><em>Description</em> - This is a descriptive name of your trigger. You can set it to whatever suits you, but for this guide, we will
go with &#x27;Vehicle started outside of working hours&#x27;.</p></li><li><p><em>Last Triggered</em> - This shows the time the trigger was last triggered. The same form is used to view and edit the trigger,
so you are able to open it up and view that. This is also visible on the overview of your triggers.</p></li><li><p><em>Enabled</em> - Whether the trigger is enabled.</p></li><li><p><em>Type</em> - This is the type of event that the trigger will be reacting on. For right now, only one option is available -
Event, which is a device event, however in the future, there will be types like Alert, OBD Data and more.</p></li><li><p><em>Tag</em> - The event tag that the trigger is going to be fired on. This needs to either be a full event tag, like
<code>vehicle/engine/running</code> or a more general specification with the use of regular expressions like <code>vehicle/engine/*</code>. For this
guide we will be using <code>vehicle/engine/running</code> in this field.</p></li><li><p><em>Conditions</em> - Here, you can specify different conditions for your trigger. Conditions are going to be reviewed deeper
in a subsection later in this guide, but for now, we will set two conditions: one field <code>@ts</code> with data <code>time</code> should be less
than <code>08:00:00</code> and a second field <code>@ts</code> with data <code>time</code> should be greater than <code>20:00:00</code></p></li><li><p><em>Actions</em> - This is where you specify the actions that are to be executed when the trigger is fired. You can choose from two
options as of now: sending an email and sending a webhook request. For this guide, we will use only the sending an email option
to send an email to <a href="mailto:support@autopi.io" target="_blank" rel="noopener noreferrer">support@autopi.io</a> (which is also the email you should use if you have any questions for this or any other
guide ðŸ˜‰).  We will review the different options that you have when sending a webhook request further into this guide.</p></li></ol></li><li><p>Finally, let&#x27;s click on the create button to create our new trigger.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="conditions"></a>Conditions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conditions" title="Direct link to heading">#</a></h2><p>In this section we will explore the fields available in the conditions.</p><ol><li><em>Field</em> - The field is the name of a field that is present in the event&#x27;s data. This means values like the date and time of when the event
has been triggered, the vehicle ID and the unit ID of the device are available. A basic event data can look like the following:</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;@rec&quot;: &quot;2021-05-25T12:33:52.636385Z&quot;, # when was the event recieved by the Cloud</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;@t&quot;: &quot;event.vehicle.engine&quot;,          # the event type</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;@tag&quot;: &quot;vehicle/engine/running&quot;,      # the event tag</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;@ts&quot;: &quot;2021-05-25T12:33:42.686380Z&quot;,  # when was the event fired on the device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;@uid&quot;: &quot;ee3df171-ff0f-6209-a3db-aa00b00e1d05&quot;,  # the unit ID of the device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;@vid&quot;: 106                            # vehicle ID</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><ol start="2"><li><p><em>Type</em> - The type field will be set based on the field you selected. But there are situations where you might want to specify the type
to something else than the preselected value. One situation is when you want a trigger that will only execute at certain times of the day,
like after 8 in the evening. In that case, you would first select a timestamp field (in this case @ts), and then change the type from datetime,
to time. This way the date part of the @ts will be ignored. Note that the timestamps are in UTC, so the comparison value should also be UTC.</p></li><li><p><em>Not</em> - Check the &quot;Not&quot; checkbox if you want the condition to be inverted. For example, you can use that with the &quot;field present&quot; operator,
to make a condition that only executes if the field is NOT present.</p></li><li><p><em>Operator</em> - We also need to select the operator, which will decide how the comparison is performed. Not all operators makes sense on all
types. For example, you would probably not use the comparison operators (greater than, etc.) for a string types.</p></li><li><p><em>Value</em> - Finally, input whatever value should be used when comparing the field value. For example:</p><ol><li>some.field should &quot;be present&quot; <strong>(in this case no value is needed)</strong></li><li>some.field should &quot;equal&quot; <strong>1234</strong></li><li>some.field should be &quot;greater than&quot; <strong>0</strong></li></ol></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="examples"></a>Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#examples" title="Direct link to heading">#</a></h3><p><strong>Notify on engine start between 01:00 and 06:00 at night.</strong>
(Remember all times are UTC, so keep that in mind when creating the conditions. So if your timezone is UTC+2, the below conditions will in
reality match between 03:00:00 to 08:00:00 local time.)</p><p><img alt="conditions_example_1" src="/assets/images/conditions_example_1-39cee6e9c10e295feef793babd79e3fd.jpg"> </p><p><strong>Notify on device update (No conditions)</strong></p><p><img alt="conditions_example_2" src="/assets/images/conditions_example_2-3a4d1b7893cf5bded155e92e312a166d.jpg"> </p><p><strong>Notify on all events (will only execute once every minute no matter how many events are received)</strong></p><p><img alt="conditions_example_3" src="/assets/images/conditions_example_3-9b1c8b5ac5f9104d768e3368bb1d9a74.jpg"> </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="actions"></a>Actions<a aria-hidden="true" tabindex="-1" class="hash-link" href="#actions" title="Direct link to heading">#</a></h2><p>When you speicfy you&#x27;d like to send a webhook request, you can specify the payload that is sent with the request. When specifying the payload, you can
use the Jinja templating language to insert data that&#x27;s passed by the trigger&#x27;s context. Here&#x27;s what the context can offer:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">event #the event that got fired</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @vid: int - Vehicle ID of the vehicle associated with the device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @uid: UUID - The Unit ID of the device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @tag: string - Additional event information</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @t:   string - Type of the event</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @ts:  string - Timestamp from the device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    @rec: string - Timestamp of when the event was received</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">trigger # the trigger</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    created:        date - When the trigger was created</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    last_modified:  date - When was the trigger last modified</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    last_triggered: date - The last time this trigger got executed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    last_error:     date - When was the last error for this trigger</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    description:    string - A description of the trigger</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    enabled:        boolean - Whether the trigger is enabled or not</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    device:         Device - The device model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    interval:       duration - How often is the trigger allowed/going to trigger</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"># nested models</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Device</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    id:                 uuid - The device id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    unit_id:            uuid - The device&#x27;s unit id</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    callName:           string - The name of the device (user provided)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    vehicle:            Profile - The profile (vehicle) model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    last_communication: date - The last time this device was connected to the cloud</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Profile (the vehicle the device is registered to)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    type:         string - The type of the vehicle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    vin:          string - Serial number of the vehicle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    model:        Model - The model of the vehicle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    year:         integer - The creation year of the vehicle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    callName:     string - The name of the vehicle (user provided)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    licensePlate: string - The license plate of the vehicle</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    make: Make - The make of the model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: string - The name of the model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Make</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    name: string - The name of the make (BMW, Mercedes-Benz, Toyota etc.)</span></div></div></div></div></div><p>You can use these values in a payload like the following example:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;payload&quot;: &quot;{{ trigger[&#x27;description&#x27;] }}&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;device_uid&quot;: &quot;{{ event[&#x27;@uid&#x27;] }}&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>which will translate into the following payload:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;payload&quot;: &quot;Description that you&#x27;ve specified when creating the trigger&quot;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;device_uid&quot;: &quot;c3cce723-79ed-4897-80cf-4cd48b62b235&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>Keep in mind that some events provide additional data in the <code>event</code> context, so there will be additional fields available. An example for such a scenario
is the <code>vehicle/battery/discharging</code> event which has an <code>event.vehicle.battery.level</code> value showing a percentage value of the battery.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="examples-1"></a>Examples<a aria-hidden="true" tabindex="-1" class="hash-link" href="#examples-1" title="Direct link to heading">#</a></h3><p><strong>Send email</strong></p><p><img alt="actions_example_1" src="/assets/images/actions_example_1-57cb1a21b54d3bb83f7ddd63e4cdadd9.jpg"></p><p>Here is how an example email from a trigger looks:</p><p><img alt="actions_example_email" src="/assets/images/actions_example_email-69fb057328b6739d27b9d508aae8f082.jpg"> </p><p><strong>Send webhook request</strong></p><p><img alt="actions_example_2" src="/assets/images/actions_example_2-0badb2a86c7310b1cd6d738132fc91ce.png">  </p><p>Address: Your unique Slack webhook address<br>
Payload: </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;text&quot;: &quot;{{ trigger[&#x27;description&#x27;] }} was executed, by device {{ trigger[&#x27;device&#x27;][&#x27;callName&#x27;] }}&quot;}</span></div></div></div></div></div><p>The payload in this case will end up looking something like this when being sent to Slack:</p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    &quot;text&quot;: &quot;your_trigger_description_here was executed by device your_device_callName&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div></div></div><p>This example also shows how you can get nested model data - for each nested level a new set of square brackets needs to be added with
a string of the field name that you would like to get. In the above example, we query for the device&#x27;s name through the trigger field.</p><p>You can check out Slack&#x27;s <a href="https://api.slack.com/incoming-webhooks" target="_blank" rel="noopener noreferrer">documentation</a> for more information on what fields they accept.</p><p><img alt="actions_example_3" src="/assets/images/actions_example_3-6e41dc7a8465c6e8ff995282287cc630.png"></p><p><strong>Send MQTT message via webhook (home assistant etc)</strong><br>
Check out this tutorial: <a href="https://www.home-assistant.io/blog/2017/03/28/http-to-mqtt-bridge/" target="_blank" rel="noopener noreferrer">https://www.home-assistant.io/blog/2017/03/28/http-to-mqtt-bridge/</a><br>
Address: heroku app address<br>
Payload: </p><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;topic&quot;:&quot;&lt;mqtt_topic&gt;&quot;,&quot;message&quot;:&quot;&lt;mqtt_message&gt;&quot;,&quot;key&quot;:&quot;&lt;AUTH_KEY&gt;&quot;}</span></div></div></div></div></div><p><strong>Trigger IFTTT applet via webhook</strong><br>
Address: Find on <a href="https://ifttt.com/services/maker_webhooks/settings" target="_blank" rel="noopener noreferrer">https://ifttt.com/services/maker_webhooks/settings</a><br>
Payload: optional and custom based on the IFTTT applet.  </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="discussion"></a>Discussion<a aria-hidden="true" tabindex="-1" class="hash-link" href="#discussion" title="Direct link to heading">#</a></h2><p>If you&#x27;d like to discuss this topic with us or other fellow community memebers, you can do so on our community page dedicated
for this guide: <a href="https://community.autopi.io/t/a-guide-to-triggers/429" target="_blank" rel="noopener noreferrer">A Guide to Triggers</a>.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/4g-internet-setup-troubleshooting"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 4G internet setup troubleshooting</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/guides/autopi-gpio-pinout"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AutoPi GPIO pinout Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-are-triggers" class="table-of-contents__link">What are triggers?</a></li><li><a href="#heres-how-to-start" class="table-of-contents__link">Here&#39;s how to start</a></li><li><a href="#conditions" class="table-of-contents__link">Conditions</a><ul><li><a href="#examples" class="table-of-contents__link">Examples</a></li></ul></li><li><a href="#actions" class="table-of-contents__link">Actions</a><ul><li><a href="#examples-1" class="table-of-contents__link">Examples</a></li></ul></li><li><a href="#discussion" class="table-of-contents__link">Discussion</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">AutoPi.io</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://community.autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi Community</a></li><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub - AutoPi Core</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit</a></li><li class="footer__item"><a href="https://twitter.com/autopi_io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn</a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2021 AutoPi.io.</div></div></div></footer></div>
<script src="/styles.f7592765.js"></script>
<script src="/runtime~main.3fbb1f7a.js"></script>
<script src="/main.196a282e.js"></script>
<script src="/1.7e18b335.js"></script>
<script src="/2.6485ac40.js"></script>
<script src="/1197c81d.ac4d078e.js"></script>
<script src="/96.507e57fc.js"></script>
<script src="/95.7001aec8.js"></script>
<script src="/935f2afb.8a3badaa.js"></script>
<script src="/17896441.e932183c.js"></script>
<script src="/4a7c8850.e34c2fda.js"></script>
</body>
</html>