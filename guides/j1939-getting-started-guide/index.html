<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.5">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DB2BZPKYN9"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DB2BZPKYN9",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="AutoPi Documentation" href="/opensearch.xml"><title data-react-helmet="true">J1939 Getting Started Guide | AutoPi Documentation</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:image" content="https://docs.autopi.io/img/favicon-194x194.png"><meta data-react-helmet="true" name="twitter:image" content="https://docs.autopi.io/img/favicon-194x194.png"><meta data-react-helmet="true" property="og:url" content="https://docs.autopi.io/guides/j1939-getting-started-guide/"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:type" content="website"><meta data-react-helmet="true" property="og:title" content="J1939 Getting Started Guide | AutoPi Documentation"><meta data-react-helmet="true" name="description" content="This guide will show how to retrieve data from a vehicle supporting the J1939 protocol. To read more background information about J1939 please see the blog post: J1939 Explained"><meta data-react-helmet="true" property="og:description" content="This guide will show how to retrieve data from a vehicle supporting the J1939 protocol. To read more background information about J1939 please see the blog post: J1939 Explained"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://docs.autopi.io/guides/j1939-getting-started-guide/"><link data-react-helmet="true" rel="alternate" href="https://docs.autopi.io/guides/j1939-getting-started-guide/" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.autopi.io/guides/j1939-getting-started-guide/" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://7BRH96O31B-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.71bb87a7.css">
<link rel="preload" href="/assets/js/runtime~main.200f8ca9.js" as="script">
<link rel="preload" href="/assets/js/main.9829e590.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo_trans_doc.png" alt="AutoPi Documentation Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo_trans_doc_dark.png" alt="AutoPi Documentation Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link" href="/cloud/cloud-intro/">Cloud</a><a class="navbar__item navbar__link" href="/core/core-intro/">Core</a><a class="navbar__item navbar__link" href="/hardware/hardware-intro/">Hardware</a><a class="navbar__item navbar__link" href="/guides/guides-intro/">Guides</a><a href="https://api.autopi.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API</a></div><div class="navbar__items navbar__items--right"><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/guides/guides-intro/">Getting started</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">API</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Business</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">OBD-II</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">Services</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/4g-internet-setup-troubleshooting/">4G internet setup troubleshooting</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/a-guide-to-triggers/">A guide to Triggers</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/adding-a-new-widget-from-scratch/">Adding a New Widget from Scratch</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/autopi-logs/">AutoPi Logs</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/configuring-mqtt/">Configuring MQTT</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/enabling_bluetooth_on_TMU_devices/">Enabling Bluetooth on Devices With STN Chips</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/how-to-ssh-to-your-device/">How to SSH to your device</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/installing-a-camera-on-your-autopi/">Installing a Camera on Your AutoPi</a></li><li class="menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/guides/j1939-getting-started-guide/">J1939 Getting Started Guide</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/jumpers/">Jumpers</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/local-development-workflow/">Local Development Workflow</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/power-cycle-for-electric-vehicles/">Power Cycle for Electric Vehicles</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/reflashing-your-device/">Reflashing your device</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/remotely-waking-up-your-device/">Remotely waking up your device</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/rfid-integartion/">RFID Reader Integration</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/setting-up-docker/">Setting up Docker on your device</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/setting-up-our-device-with-verizon-wireless/">Setting up our device with Verizon Wireless</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/upgrading-your-raspberry-pi/">Upgrade/Replace Your Raspberry Pi Computer</a></li><li class="menu__list-item"><a class="menu__link" href="/guides/using-the-autopi-with-an-external-power-supply/">Using the AutoPi with an external power supply</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1>J1939 Getting Started Guide</h1></header><p>This guide will show how to retrieve data from a vehicle supporting the J1939 protocol. To read more background information about J1939 please see the blog post: <a href="https://www.autopi.io/blog/j1939-explained/" target="_blank" rel="noopener noreferrer">J1939 Explained</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="preconditions"></a>Preconditions<a class="hash-link" href="#preconditions" title="Direct link to heading">#</a></h2><p>Before proceeding the AutoPi device must be:</p><ol><li>Connected to the vehicle with an appropiate OBD-II adapter cable that connects the vehicles two J1939 CAN bus wires to pin 6 (high) and 14 (low) of the OBD-II connector on the AutoPi device. If you are missing an adapter cable for your specific vehicle please contact <a href="mailto:sales@autopi.io" target="_blank" rel="noopener noreferrer">sales@autopi.io</a>.</li><li>Powered on and online in the AutoPi Cloud at <a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer">https://my.autopi.io</a>.</li><li>Also the ignition of the vehicle must be turned on to ensure the J1939 CAN bus is active.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="check-for-broadcast-data"></a>Check for Broadcast Data<a class="hash-link" href="#check-for-broadcast-data" title="Direct link to heading">#</a></h2><p>As most J1939 messages are broadcast we start by checking if we can see any data on the CAN bus.</p><p>On <a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer">https://my.autopi.io</a> go to <em>Car Explorer</em> &gt; <em>CAN Analyzer</em> &gt; <em>Sniffer</em>.</p><p>Select one of the following J1939 protocols that fits your vehicle in regards to 11bit or 29bit header:</p><ul><li><code>[41] J1939 (11bit, 250kbps)</code></li><li><code>[42] J1939 (29bit, 250kbps)</code></li></ul><p><strong>Optional:</strong> Change the baud rate if predefined value of <code>250000</code> is incorrect. <code>500000</code> is a typical alternative.</p><p>Click the <em>Sniff</em> button to start recording CAN messages sent on the J1939 bus. An example of a recording result is shown in below screenshot.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The start and end of the recording are indicated audibly with loud beep sounds played by the AutoPi device.</p></div></div><p><em>Example</em>:</p><p><img alt="j1939_can_sniffer" src="/assets/images/j1939_can_sniffer-435f296bb12f8e9e22a8dc30e4b77459.png"></p><p>If no data is returned, try:</p><ol><li>Change the protocol and/or baud rate combinations.</li><li>Increase the recording duration from default <code>1</code> to <code>10</code> seconds.</li><li>Continue to the next section describing how to query for data.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="query-for-data"></a>Query for Data<a class="hash-link" href="#query-for-data" title="Direct link to heading">#</a></h2><p>Some data is only available on request. This means a J1939 request message must be sent in order to get a data response. This can be done using the PID tester tool.</p><p>In the <em>CAN Analyzer</em> select the <em>PID Tester</em> tab.</p><p>First the J1939 protocol and baud rate must be specified in the same way as described previously.</p><p>Next the J1939 request message must be specififed. It consists of a header and a data part. </p><blockquote><p><strong>Header:</strong> <code>18 EA 00 F9</code> is broken down into:</p><ul><li><code>18</code> contains priority of 6.</li><li><code>EA 00</code> is PGN 59904 (Request PGN).</li><li><code>F9</code> is source address 249 (Service Tool).</li></ul><p><strong>Data:</strong> <code>00 C1 00</code> is the specific PGN that is requested. In this example PGN 49408 (Diagnostic Readiness 2).</p></blockquote><p><em>Example</em>:</p><p><img alt="j1939_pgn_query" src="/assets/images/j1939_pgn_query-5b28bf2e88e29143ce2ac6386f798682.png"> </p><p>In above screenshot we query PGN 61444 (Electronic Engine Controller 1) which among other values contains SPN 190 (Engine Speed).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="register-vehicle-bus"></a>Register Vehicle Bus<a class="hash-link" href="#register-vehicle-bus" title="Direct link to heading">#</a></h2><p>Once a J1939 bus has been identified and tested, it is recommended to register it on the vehicle&#x27;s profile.</p><p>Go to <em>Account</em> &gt; <em>Vehicles</em> and click on <em>Create</em> button below <em>CAN Buses</em>. Fill in the relevant values for name, protocol and baud rate.</p><p><em>Example</em>:</p><p><img alt="create_j1939_vehicle_bus" src="/assets/images/create_j1939_vehicle_bus-ece9cf1e0588a2598036e36776a2a238.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="register-pid-for-request-pgn"></a>Register PID for Request PGN<a class="hash-link" href="#register-pid-for-request-pgn" title="Direct link to heading">#</a></h2><p>This section may be skipped if you only receive broadcast J1939 messages. But if you need to query for a specific PGN it is recommended to register the request PGN as a PID in the <em>Car Explorer</em> library. It can then later be used to easily set up loggers.</p><p>Go to <em>Car Explorer</em> &gt; <em>Library</em> &gt; <em>Create</em> &gt; <em>PID</em>.</p><p>Enter the informations previously verified using the <em>PID Tester</em>.</p><p><em>Example</em>:</p><p><img alt="create_pid_for_j1939_request_pgn" src="/assets/images/create_pid_for_j1939_request_pgn-2d4fbf859222fa3ed2701f6ef53a655f.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="pid-details"></a>PID Details<a class="hash-link" href="#pid-details" title="Direct link to heading">#</a></h4><blockquote><p><strong>Name:</strong> Short name of the PGN requested.</p><p><strong>Description:</strong> Optional description of the PGN requested.</p><p><strong>Mode:</strong> Hexadecimal value <code>00</code> is specified here.</p><p><strong>Code:</strong> The hexadecimal representation of the requsted PGN number 61444 (Electronic Engine Controller 1).</p><p><strong>Header:</strong> The header to request a PGN:</p><ul><li><code>18</code> contains priority of 6.</li><li><code>EA 00</code> is PGN 59904 (Request PGN).</li><li><code>F9</code> is source address 249 (Service Tool).</li></ul></blockquote><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>It is recommended to specify how many messages/frames are expected to be returned by the query. This is done by unfolding the section <em>Enhanced PID</em> and entering the number of messages under <em>Frames</em>. This helps reduce the total query time (better performance) because the waiting timeout for the last message is skipped.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="used-by-vehicles"></a>Used by Vehicle(s)<a class="hash-link" href="#used-by-vehicles" title="Direct link to heading">#</a></h4><blockquote><p><strong>Vehicle Bus(es):</strong>  Specify which bus(es) the PID is to be associated with. The previously created J1939 bus is selected.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="decode-messages-with-dbc-file"></a>Decode Messages (with DBC file)<a class="hash-link" href="#decode-messages-with-dbc-file" title="Direct link to heading">#</a></h2><p>After receiving the raw J1939 CAN messages they must be decoded to get the actual measurement values. This can be done using the built-in CAN database functionality.</p><p>The CAN database contains definitions of how the individual CAN messages are structured. Each CAN message can consist of one or more CAN signals, each of which typically contains a single measurement value (eg. temperature, speed, RPM or the like).</p><p>As an exmaple, the J1939 PGN 61444 (Electronic Engine Controller 1) contains 8 SPNs in total. It can be mapped to a CAN message with 8 CAN signals as shown below.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">PGN 61444 (Electronic Engine Controller 1)                            ---&gt;  CAN message</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 899 (Engine Torque Mode)                                        ---&gt;    CAN signal #1</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 899 (Engine Torque Mode)                                        ---&gt;    CAN signal #2</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 4154 (Actual Engine - Percent Torque)                           ---&gt;    CAN signal #3</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 512 (Driver&#x27;s Demand Engine - Percent Torque)                   ---&gt;    CAN signal #4</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 513 (Actual Engine - Percent Torque)                            ---&gt;    CAN signal #5</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 190 (Engine Speed)                                              ---&gt;    CAN signal #6</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 1483 (Source Address of Controlling Device for Engine Control)  ---&gt;    CAN signal #7</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 1675 (Engine Starter Mode)                                      ---&gt;    CAN signal #8</span></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  SPN 2432 (Engine Demand â€“ Percent Torque)                           ---&gt;    CAN signal #9</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>When all (or only a few selected) CAN messages have be defined they will need to be synchronized to the AutoPi device and stored in the form of a DBC file. The synchronization is handled automatically by to AutoPi Cloud management system. Using this DBC file, the AutoPi device can decode raw CAN messages into readable measurement values. The decoded data can then be uploaded to the AutoPi Cloud, stored locally or sent to any custom endpoint.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="create-mapping"></a>Create Mapping<a class="hash-link" href="#create-mapping" title="Direct link to heading">#</a></h3><p>To create a mapping for a CAN message to be be decoded go to <em>Car Explorer</em> &gt; <em>Library</em> &gt; <em>Create</em> &gt; <em>CAN</em>.</p><p><em>Example</em>:</p><p><img alt="create_j1939_can_message" src="/assets/images/create_j1939_can_message-1b10ed630479eadfe326a0425f0910f2.png"> </p><p>In above screenshot, we register a CAN message mapping for PGN 61444 (Electronic Engine Controller 1):</p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="can-message"></a>CAN Message<a class="hash-link" href="#can-message" title="Direct link to heading">#</a></h4><blockquote><p><strong>Name:</strong> Short name to identify the CAN message.</p><p><strong>Description:</strong> Optional description of the CAN message.</p><p><strong>Header:</strong> CAN message header for PGN 61444:</p><ul><li><code>8C</code> contains priority of 6 but has no actual significance.</li><li><code>F004</code> is the hexadecimal representation of PGN number 61444.</li><li><code>FE</code> is source address 254 (Null Address) but has no actual significance.</li></ul><p><strong>Bytes:</strong> 8 is the number of data bytes that the CAN message contains.</p><p><strong>Sender:</strong> Identifier of the ECU that sent the CAN message. Enter <code>XXX</code> or similar if unknown.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="can-signal-1"></a>CAN Signal #1<a class="hash-link" href="#can-signal-1" title="Direct link to heading">#</a></h4><p>In the above screenshot we only show how to map SPN 190 (Engine Speed) but the procedure the same when adding more.</p><blockquote><p><strong>Name:</strong> Short name to identify the CAN signal.</p><p><strong>Description:</strong> Optional description of the CAN signal.</p><p><strong>Endian:</strong> Sequence of bytes is little-endian - least significant bits first.</p><p><strong>Start:</strong> Bitwise start index of the CAN signal value within the data part of the CAN message. When it comes to big-endian indexing is straightforward, but for little-endian it is more complex.</p><p><strong>Length:</strong> Bit length of the CAN signal value.</p><p><strong>Sign:</strong> Unsigned integer value - no negative values.</p><p><strong>Factor:</strong> A factor of <code>0.125</code> to be multiplied by the value in order to get the actual measurement value.</p><p><strong>Offset:</strong> No offset to be added to the value.</p><p><strong>Unit:</strong> Unit of the value is RPM (Revolutions per minute).</p><p><strong>Min:</strong> The maximum possible value is undefined.</p><p><strong>Max:</strong> The minimum possible value is undefined.</p><p><strong>Receivers:</strong> Identifiers for ECUs that use the signal value.</p></blockquote><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="used-by-vehicles-1"></a>Used by Vehicle(s)<a class="hash-link" href="#used-by-vehicles-1" title="Direct link to heading">#</a></h4><blockquote><p><strong>Vehicle Bus(es):</strong>  Specify which bus(es) the CAN message is to be associated with. The previously created J1939 bus is selected.</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="sync-dbc-file"></a>Sync DBC File<a class="hash-link" href="#sync-dbc-file" title="Direct link to heading">#</a></h3><p>After the CAN message has been created, it must be synchronized to the AutoPi device. This is done in the same way as all other changes; applied immediately on request if the device is online or queued and applied the next time the device is back online.</p><p>When synchronizing, the CAN messages are stored in one or more DBC files located on the file system below the path:</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">/opt/autopi/obd/can/db/protocol_&lt;ID&gt;.dbc</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>A separate DBC file is created on the device for each associated vehicle bus protocol.
In the above example, protocol <code>[42] J1939 (29bit, 250kbps)</code> is used. Therefore, the synchronized DBC file will be found at: <code>/opt/autopi/obd/can/db/protocol_42.dbc</code></p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>As default, all created CAN messages and associated CAN signals are synchronized to the DBC file. But if one or more CAN signals are used in loggers (<em>Car Explorer</em> &gt; <em>Library</em>) only the used CAN signals and CAN messages are included in the DBC file.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_31ik" id="test-can-converter"></a>Test CAN Converter<a class="hash-link" href="#test-can-converter" title="Direct link to heading">#</a></h3><p>To easily test CAN message conversion with a DBC file, the following terminal command can be executed. It performs a single workflow that queries a PGN and then converts the raw response message using the DBC file.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly"><pre tabindex="0" class="prism-code language-undefined codeBlock_23N8 thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#bfc7d5"><span class="token plain">obd.manage run handler=&quot;query&quot; args=&quot;[&#x27;EEC1&#x27;]&quot; kwargs=&quot;{&#x27;mode&#x27;: &#x27;00&#x27;, &#x27;pid&#x27;: &#x27;F004&#x27;, &#x27;header&#x27;: &#x27;18EA00F9&#x27;, &#x27;force&#x27;: true}&quot; converter=&quot;can&quot;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><em>Example</em>:</p><p><img alt="create_pid_for_j1939_request_pgn" src="/assets/images/run_j1939_query_workflow-2bf0e4f195c10fbd69e678b998d6b2e0.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor anchor__h4 anchorWithStickyNavbar_31ik" id="command-breakdown"></a>Command Breakdown<a class="hash-link" href="#command-breakdown" title="Direct link to heading">#</a></h4><blockquote><p><em><strong>obd.manage</strong></em> is the <a href="/core/commands/core-commands-obd/#obdmanage">command</a> to execute.</p><p><em><strong>run</strong></em> a <a href="/core/services/core-services-intro/#workflows">workflow</a> directly.</p><p><em><strong>handler=&quot;query&quot;</strong></em> specifies the handler of the workflow to be called.</p><p><em><strong>args=&quot;[&#x27;EEC1&#x27;]&quot;</strong></em> specifices the arguments of the handler. The value consists of an embedded JSON array.</p><p><em><strong>kwargs=&quot;{&#x27;mode&#x27;: &#x27;00&#x27;, &#x27;pid&#x27;: &#x27;F004&#x27;, &#x27;header&#x27;: &#x27;18EA00F9&#x27;, &#x27;force&#x27;: true}&quot;</strong></em> specifices the keyword arguments of the handler. The value consists of an embedded JSON dictionary.</p><p><em><strong>converter=&quot;can&quot;</strong></em> specifies a converter in the workflow to be called after the handler. Here we use the <a href="/core/services/core-services-obd-manager/#can">CAN</a> converter.</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_31ik" id="setup-loggers"></a>Setup Loggers<a class="hash-link" href="#setup-loggers" title="Direct link to heading">#</a></h2><p>To receive the J1939 data in the cloud, loggers must first be set up on the device. Go to <em>Car Explorer</em> &gt; <em>Loggers</em> and create loggers for the respective PIDs and or CAN messages. After a logger has been created, it must be synchronized to the AutoPi device, just like any other change.</p></div><footer class="docusaurus-mt-lg"><div class="row"><div class="col"><a href="https://github.com/autopi-io/documentation/edit/master/docs/guides/j1939_getting_started_guide.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_13-_"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/guides/installing-a-camera-on-your-autopi/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Installing a Camera on Your AutoPi</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/guides/jumpers/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Jumpers Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#preconditions" class="table-of-contents__link">Preconditions</a></li><li><a href="#check-for-broadcast-data" class="table-of-contents__link">Check for Broadcast Data</a></li><li><a href="#query-for-data" class="table-of-contents__link">Query for Data</a></li><li><a href="#register-vehicle-bus" class="table-of-contents__link">Register Vehicle Bus</a></li><li><a href="#register-pid-for-request-pgn" class="table-of-contents__link">Register PID for Request PGN</a></li><li><a href="#decode-messages-with-dbc-file" class="table-of-contents__link">Decode Messages (with DBC file)</a><ul><li><a href="#create-mapping" class="table-of-contents__link">Create Mapping</a></li><li><a href="#sync-dbc-file" class="table-of-contents__link">Sync DBC File</a></li><li><a href="#test-can-converter" class="table-of-contents__link">Test CAN Converter</a></li></ul></li><li><a href="#setup-loggers" class="table-of-contents__link">Setup Loggers</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">AutoPi.io</div><ul class="footer__items"><li class="footer__item"><a href="https://www.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">AutoPi.io</a></li><li class="footer__item"><a href="https://my.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">My AutoPi Cloud</a></li><li class="footer__item"><a href="https://shop.autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Shop</a></li><li class="footer__item"><a href="https://docs.autopi.io/search/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Search Documentation</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://community.autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>AutoPi Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://github.com/autopi-io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub - AutoPi Core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items"><li class="footer__item"><a href="https://www.reddit.com/r/autopi/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/autopi_io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.facebook.com/autopi.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/autopi.io" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCH50VR17emPVVfnIWlGMLig" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Youtube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 AutoPi.io.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.200f8ca9.js"></script>
<script src="/assets/js/main.9829e590.js"></script>
</body>
</html>