(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[3832],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return u}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),m=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=m(e.components);return a.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=m(n),u=r,g=d["".concat(s,".").concat(u)]||d[u]||c[u]||l;return n?a.createElement(g,o(o({ref:t},p),{},{components:n})):a.createElement(g,o({ref:t},p))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,o=new Array(l);o[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var m=2;m<l;m++)o[m]=n[m];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},69427:function(e,t,n){"use strict";n.r(t),n.d(t,{contentTitle:function(){return g},default:function(){return N},frontMatter:function(){return u},metadata:function(){return h},toc:function(){return f}});var a,r=n(22122),l=n(19756),o=n(67294),i=n(3905),s=["title","titleId"];function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=function(e){var t=e.title,n=e.titleId,r=p(e,s);return o.createElement("svg",m({width:"293pt",height:"260pt",viewBox:"0 0 293 260",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":n},r),t?o.createElement("title",{id:n},t):null,a||(a=o.createElement("g",{className:"states_svg__graph",transform:"translate(4 256)"},o.createElement("path",{fill:"#fff",stroke:"#fff",d:"M-4 5v-261h294V5H-4z"}),o.createElement("g",{className:"states_svg__node"},o.createElement("ellipse",{fill:"none",stroke:"#000",cx:159,cy:-234,rx:28.616,ry:18}),o.createElement("text",{textAnchor:"middle",x:159,y:-229.8,fontFamily:"Times,serif",fontSize:14},o.createElement("a",null,"OFF"))),o.createElement("g",{className:"states_svg__node"},o.createElement("ellipse",{fill:"none",stroke:"#000",cx:159,cy:-162,rx:54.215,ry:18}),o.createElement("text",{textAnchor:"middle",x:159,y:-157.8,fontFamily:"Times,serif",fontSize:14},o.createElement("a",null,"BOOTING"))),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M153.122-216.055c-.818 7.709-1.061 17.028-.727 25.691"}),o.createElement("path",{stroke:"#000",d:"M155.894-190.491l-2.807 10.216-4.176-9.737 6.983-.479z"})),o.createElement("g",{className:"states_svg__node"},o.createElement("ellipse",{fill:"none",stroke:"#000",cx:77,cy:-18,rx:77.003,ry:18}),o.createElement("text",{textAnchor:"middle",x:77,y:-13.8,fontFamily:"Times,serif",fontSize:14},o.createElement("a",null,"HIBERNATING"))),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M138.377-221.459C123.962-212.218 105.631-197.866 96-180 73.102-137.525 72.352-79.732 74.355-46.188"}),o.createElement("path",{stroke:"#000",d:"M77.847-46.426L75.077-36.2l-4.212-9.721 6.982-.505z"})),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M164.913-180.275c.802-7.755 1.027-17.087.678-25.73"}),o.createElement("path",{stroke:"#000",d:"M162.094-205.832l2.784-10.223 4.199 9.728-6.983.495z"})),o.createElement("g",{className:"states_svg__node"},o.createElement("ellipse",{fill:"none",stroke:"#000",cx:225,cy:-90,rx:27,ry:18}),o.createElement("text",{textAnchor:"middle",x:225,y:-85.8,fontFamily:"Times,serif",fontSize:14},o.createElement("a",null,"ON"))),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M174.641-144.411l29.669 31.467"}),o.createElement("path",{stroke:"#000",d:"M206.949-115.247l4.313 9.677-9.407-4.875 5.094-4.802z"})),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M86.972-36.268l57.298-99.224"}),o.createElement("path",{stroke:"#000",d:"M141.24-137.244l8.032-6.909-1.97 10.41-6.062-3.501z"})),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M228.36-108.046c2.816-18.672 4.794-49.013-6.36-71.954-7.211-14.831-20.718-27.059-33.382-36.018"}),o.createElement("path",{stroke:"#000",d:"M186.469-213.243l-6.396-8.446 10.267 2.614-3.871 5.832z"})),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M203.48-78.821l-84.955 40.18"}),o.createElement("path",{stroke:"#000",d:"M120.013-35.472l-10.537 1.112 7.544-7.44 2.993 6.328z"})),o.createElement("g",{className:"states_svg__node"},o.createElement("ellipse",{fill:"none",stroke:"#000",cx:229,cy:-18,rx:56.443,ry:18}),o.createElement("text",{textAnchor:"middle",x:229,y:-13.8,fontFamily:"Times,serif",fontSize:14},o.createElement("a",null,"SLEEPING"))),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M225.989-71.697l1.462 25.585"}),o.createElement("path",{stroke:"#000",d:"M230.946-46.288l-2.923 10.184-4.065-9.784 6.988-.4z"})),o.createElement("g",{className:"states_svg__edge"},o.createElement("path",{fill:"none",stroke:"#000",d:"M214.167-35.714C205.89-45.702 195.89-58.952 189-72c-10.438-19.767-18.3-43.887-23.351-62.028"}),o.createElement("path",{stroke:"#000",d:"M162.2-133.376l.801-10.565 5.962 8.758-6.763 1.807z"})))))},d=["components"],u={id:"core-power-low",title:"Low-level"},g=void 0,h={unversionedId:"core/power_management/core-power-low",id:"core/power_management/core-power-low",isDocsHomePage:!1,title:"Low-level",description:"SPM",source:"@site/docs/core/power_management/low_level.md",sourceDirName:"core/power_management",slug:"/core/power_management/core-power-low",permalink:"/core/power_management/core-power-low",editUrl:"https://github.com/autopi-io/documentation/edit/master/docs/core/power_management/low_level.md",tags:[],version:"current",frontMatter:{id:"core-power-low",title:"Low-level"},sidebar:"sidebar",previous:{title:"High-level",permalink:"/core/power_management/core-power-high"},next:{title:"Sleep Timers",permalink:"/core/power_management/core-power-sleep-timers"}},f=[{value:"SPM",id:"spm",children:[{value:"States",id:"states",children:[]}]},{value:"STN",id:"stn",children:[]}],k={toc:f};function N(e){var t=e.components,n=(0,l.Z)(e,d);return(0,i.kt)("wrapper",(0,r.Z)({},k,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"spm"},"SPM"),(0,i.kt)("p",null,"The SPM (Smart Power Management) is an embedded system that controls the low-level power cycle of the device. It interacts with a number of subsystems that can initiate power state changes:"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Subsystem"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Accelerometer"),(0,i.kt)("td",{parentName:"tr",align:null},"Built-in accelerometer is capable of triggering wake up based on physical movement events.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"Modem"),(0,i.kt)("td",{parentName:"tr",align:null},"Installed modem module can trigger wake up on received SMS or dial up call.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#stn"},"STN")),(0,i.kt)("td",{parentName:"tr",align:null},"Built-in chipset triggers power on and off based on voltage level changes.")))),(0,i.kt)("p",null,"Finally the Raspberry Pi communicates directly with the SPM and performs power state changes based on more ",(0,i.kt)("a",{parentName:"p",href:"/core/power_management/core-power-high"},"high-level")," decisions.  "),(0,i.kt)("h3",{id:"states"},"States"),(0,i.kt)("p",null,"Below diagram shows an overview of all possible SPM states and the transitions between."),(0,i.kt)(c,{mdxType:"StatesSvg"}),(0,i.kt)("h4",{id:"off"},"OFF"),(0,i.kt)("p",null,"Everything is powered off."),(0,i.kt)("h5",{id:"transitions"},"Transitions"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"State"),(0,i.kt)("th",{parentName:"tr",align:null},"Condition"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#booting"},"BOOTING")),(0,i.kt)("td",{parentName:"tr",align:null},"The device is plugged in.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#hibernating"},"HIBERNATING")),(0,i.kt)("td",{parentName:"tr",align:null},"Maximum number of boot attempts reached. Default is 10 attempts.")))),(0,i.kt)("h4",{id:"booting"},"BOOTING"),(0,i.kt)("p",null,"Everything is powered on and the Raspberry Pi is booting up."),(0,i.kt)("h5",{id:"transitions-1"},"Transitions"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"State"),(0,i.kt)("th",{parentName:"tr",align:null},"Condition"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#on"},"ON")),(0,i.kt)("td",{parentName:"tr",align:null},"Successfully communicated with the Raspberry Pi.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#off"},"OFF")),(0,i.kt)("td",{parentName:"tr",align:null},"No communication with the Raspberry Pi within a given time limit. Default boot timeout is 10 minutes.")))),(0,i.kt)("h4",{id:"on"},"ON"),(0,i.kt)("p",null,"Everything is powered on and there is regular communication with the Raspberry Pi."),(0,i.kt)("h5",{id:"transitions-2"},"Transitions"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"State"),(0,i.kt)("th",{parentName:"tr",align:null},"Condition"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#sleeping"},"SLEEPING")),(0,i.kt)("td",{parentName:"tr",align:null},"The Raspberry Pi decided to sleep for a given period of time.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#hibernating"},"HIBERNATING")),(0,i.kt)("td",{parentName:"tr",align:null},"The Raspberry Pi decided to hibernate or the STN chip powered off according to its triggers.")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#off"},"OFF")),(0,i.kt)("td",{parentName:"tr",align:null},"No communication with the Raspberry Pi within a given time limit. Default heartbeat timeout is 3 minutes.")))),(0,i.kt)("h4",{id:"sleeping"},"SLEEPING"),(0,i.kt)("p",null,"The Raspberry Pi is powered off. Modem and GPS is kept on in low power mode."),(0,i.kt)("p",null,"Wake up will happen after a specified period of sleep time or earlier if:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"STN is powered on."),(0,i.kt)("li",{parentName:"ul"},"Received wake signal from modem."),(0,i.kt)("li",{parentName:"ul"},"Received wake signal from accelerometer.")),(0,i.kt)("h5",{id:"transitions-3"},"Transitions"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"State"),(0,i.kt)("th",{parentName:"tr",align:null},"Condition"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#booting"},"BOOTING")),(0,i.kt)("td",{parentName:"tr",align:null},"See the above criteria.")))),(0,i.kt)("h4",{id:"hibernating"},"HIBERNATING"),(0,i.kt)("p",null,"Everything is shut down for maximum power saving."),(0,i.kt)("h5",{id:"transitions-4"},"Transitions"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"State"),(0,i.kt)("th",{parentName:"tr",align:null},"Condition"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},(0,i.kt)("a",{parentName:"td",href:"#booting"},"BOOTING")),(0,i.kt)("td",{parentName:"tr",align:null},"The STN powers on (when transitions from off to on).")))),(0,i.kt)("h2",{id:"stn"},"STN"),(0,i.kt)("p",null,"See the STN command for available power trigger options ",(0,i.kt)("a",{parentName:"p",href:"/core/commands/core-commands-stn"},"here"),"."))}N.isMDXComponent=!0}}]);