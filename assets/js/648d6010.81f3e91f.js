(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[8711],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return u},kt:function(){return m}});var i=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=i.createContext({}),c=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},u=function(e){var t=c(e.components);return i.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},h=i.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),h=c(n),m=o,g=h["".concat(s,".").concat(m)]||h[m]||d[m]||a;return n?i.createElement(g,r(r({ref:t},u),{},{components:n})):i.createElement(g,r({ref:t},u))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,r=new Array(a);r[0]=h;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var c=2;c<a;c++)r[c]=n[c];return i.createElement.apply(null,r)}return i.createElement.apply(null,n)}h.displayName="MDXCreateElement"},25135:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return u},default:function(){return h}});var i=n(22122),o=n(19756),a=(n(67294),n(3905)),r=["components"],l={id:"automatic-obd-logger-pausing",title:"Automatic OBD Logger Pausing"},s=void 0,c={unversionedId:"cloud/obd-ii/automatic-obd-logger-pausing",id:"cloud/obd-ii/automatic-obd-logger-pausing",isDocsHomePage:!1,title:"Automatic OBD Logger Pausing",description:"Automatic OBD Logger Pausing is a feature that enables the AutoPi device to automatically pause any OBD loggers when it",source:"@site/docs/cloud/obd-ii/automatic_obd_logger_pausing.md",sourceDirName:"cloud/obd-ii",slug:"/cloud/obd-ii/automatic-obd-logger-pausing",permalink:"/cloud/obd-ii/automatic-obd-logger-pausing",editUrl:"https://github.com/autopi-io/documentation/edit/master/docs/cloud/obd-ii/automatic_obd_logger_pausing.md",tags:[],version:"current",frontMatter:{id:"automatic-obd-logger-pausing",title:"Automatic OBD Logger Pausing"},sidebar:"sidebar",previous:{title:"Using the CAN Bus Commands",permalink:"/cloud/obd-ii/using-the-can-bus-commands"},next:{title:"My Library",permalink:"/cloud/obd_library/car-explorer-library-manual"}},u=[{value:"How Does it Work?",id:"how-does-it-work",children:[]},{value:"How to Set It Up?",id:"how-to-set-it-up",children:[]},{value:"Troubleshooting",id:"troubleshooting",children:[]}],d={toc:u};function h(e){var t=e.components,n=(0,o.Z)(e,r);return(0,a.kt)("wrapper",(0,i.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Automatic OBD Logger Pausing is a feature that enables the AutoPi device to automatically pause any OBD loggers when it\ndetects that the vehicle has stopped shaking (which also likely means that the vehicle has stopped moving). This\nfeature is useful in situations where the vehicle that the AutoPi is plugged into has a CAN bus protection. Such\nvehicles usually detect CAN bus traffic when the vehicle is locked and in turn trigger the alarm of the vehicle - this\nis done to try and protect the vehicle from being fiddled with externally through the CAN bus. Examples of such\nvehicles are the BMW i3, some Mini Coopers and some Porche models."),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"In fact, not only the loggers are being paused, but in general the device is not allowed to send any CAN frames on the\nCAN bus of the vehicle. This means that if you attempt to manually send a CAN frame with a command such as ",(0,a.kt)("inlineCode",{parentName:"p"},"obd.send"),"\nor ",(0,a.kt)("inlineCode",{parentName:"p"},"obd.query")," you will receive an error."),(0,a.kt)("p",{parentName:"div"},"Passively listening (also known as sniffing) on the CAN bus is still allowed though."))),(0,a.kt)("h2",{id:"how-does-it-work"},"How Does it Work?"),(0,a.kt)("p",null,"The Automatic OBD Logger Pausing feature works by using the data from the accelerometer integrated into the AutoPi. The\naccelerometer will detect motion and trigger events based on the motion detected. The three events that\nare being triggered are:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"vehicle/motion/steady")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"vehicle/motion/shaking")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"vehicle/motion/jolting"))),(0,a.kt)("p",null,"Using these events (and the ",(0,a.kt)("inlineCode",{parentName:"p"},"vehicle/motor")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"vehicle/engine")," events as helpers), the AutoPi is able to determine when\nit's a good time to pause and unpause the loggers to avoid setting off the alarm of the vehicle. "),(0,a.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"Keep in mind that the ",(0,a.kt)("inlineCode",{parentName:"p"},"vehicle/motion/jolting")," event is not used to determine the behavior of the Automatic OBD Logger\nPausing feature."))),(0,a.kt)("h2",{id:"how-to-set-it-up"},"How to Set It Up?"),(0,a.kt)("p",null,"To enable the Automatic OBD Logger Pausing functionality, you will need to ensure the following advanced settings are\nset on your device:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"OBD > Automatic Logger Pausing")," must be set to ",(0,a.kt)("inlineCode",{parentName:"li"},"True")," (Enabled)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Accelerometer > Motion Events > Enabled")," must be set to ",(0,a.kt)("inlineCode",{parentName:"li"},"True")," (Enabled)")),(0,a.kt)("p",null,"You can confirm that the setup has been made successfully if you confirm the following two changes in your device's\nservices:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Navigate to the workers of the Accelerometer Manager (Services > acc_manager > Workers) - there you should see an\n",(0,a.kt)("inlineCode",{parentName:"li"},"xyz_logger")," worker. If you open it up, you should be able to see that the trigger in the Workflow is\n",(0,a.kt)("inlineCode",{parentName:"li"},"motion_event")," - this enables the ",(0,a.kt)("inlineCode",{parentName:"li"},"vehicle/motion/*")," events."),(0,a.kt)("li",{parentName:"ol"},"Navigate to the reactors of the Event Reactor (Services > event_reactor > Reactors) - there you should see two\nnew reactors - ",(0,a.kt)("inlineCode",{parentName:"li"},"enable_obd_on_motion_shaking")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"disable_obd_on_motion_steady_or_trip_end")," - these reactors are\nresponsible for enabling and disabling the OBD logging.")),(0,a.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,a.kt)("p",null,"Sometimes, you might notice that even though you have enabled the Automatic OBD Logger Pausing feature, the AutoPi is\nstill sending CAN Frames on the CAN bus. This is usually caused by your vehicle being too easy to shake which in turn\ntriggers a ",(0,a.kt)("inlineCode",{parentName:"p"},"vehicle/motion/shaking")," event much more easily (this is the event that reactivates the OBD loggers).\nDepending on the vehicle type that you are using, the driving behavior, road conditions and more the device might think\nthat the vehicle is being driven while in fact it isn't or vice versa."),(0,a.kt)("p",null,"For this reason, we have made it possible for you to change and fine-tune the way that those motion events are being\ntriggered. You can find the fine-tuning settings in the advanced settings of your device under Accelerometer > Motion\nEvents. We suggest that you focus primarily on the Debounce Delay and Shake settings, because the\n",(0,a.kt)("inlineCode",{parentName:"p"},"vehicle/motion/jolting")," event is not used to reactivate the OBD loggers - only the ",(0,a.kt)("inlineCode",{parentName:"p"},"vehicle/motion/shaking")," event is."))}h.isMDXComponent=!0}}]);