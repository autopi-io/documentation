"use strict";(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[6219],{28453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>d});var r=n(96540);const t={},s=r.createContext(t);function o(e){const i=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),r.createElement(s.Provider,{value:i},e.children)}},47886:(e,i,n)=>{n.d(i,{A:()=>s});n(96540);var r=n(74848);const t={mini:{name:"Mini",image:"/img/hardware/autopi_mini/AutoPi_Mini_5_Top_right.png"},cm4:{name:"TMU CM4",image:"/img/hardware/autopi_tmu_cm4/TMU_Floating_Topside_V1_scaled.png"},pro:{name:"CAN-FD Pro",image:"/img/hardware/autopi_canfd_pro/canfd_pro_trans.png"}};function s(e){let{supported:i}=e;return i?.length?(0,r.jsxs)("div",{style:{padding:"1rem",marginBottom:"1.5rem"},children:[(0,r.jsx)("strong",{children:"This guide is applicable to the following device/ devices:"}),(0,r.jsx)("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.5rem"},children:i.map((e=>{const i=t[e];return(0,r.jsxs)("div",{style:{textAlign:"center"},children:[(0,r.jsx)("img",{src:i.image,alt:i.name,style:{height:"60px",marginBottom:"0.25rem"}}),(0,r.jsx)("div",{children:i.name})]},e)}))})]}):null}},58162:(e,i,n)=>{n.d(i,{A:()=>o});n(96540);const r="homeGrid_MM9h",t="cardGrid_IPp8";var s=n(74848);const o=e=>{let{children:i,home:n=!1}=e;return(0,s.jsx)("div",{className:n?r:t,children:i})}},68326:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"cloud/obd-ii/debug-raw-pid-queries","title":"Debug Raw PID Queries","description":"---","source":"@site/docs/cloud/obd-ii/debug_raw_pid_queries.mdx","sourceDirName":"cloud/obd-ii","slug":"/cloud/obd-ii/debug-raw-pid-queries","permalink":"/cloud/obd-ii/debug-raw-pid-queries","draft":false,"unlisted":false,"editUrl":"https://github.com/autopi-io/documentation/edit/master/docs/cloud/obd-ii/debug_raw_pid_queries.mdx","tags":[],"version":"current","frontMatter":{"id":"debug-raw-pid-queries","title":"Debug Raw PID Queries","supportedDevices":["cm4"]},"sidebar":"sidebar","previous":{"title":"Create CAN Signal Loggers","permalink":"/cloud/obd-ii/create-can-signal-loggers"},"next":{"title":"Log Raw CAN Messages","permalink":"/cloud/obd-ii/log-raw-can-messages"}}');var t=n(74848),s=n(28453),o=(n(58162),n(47886));const d={id:"debug-raw-pid-queries",title:"Debug Raw PID Queries",supportedDevices:["cm4"]},a=void 0,l={},c=[];function h(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.A,{supported:d.supportedDevices}),"\n",(0,t.jsx)(i.hr,{}),"\n",(0,t.jsxs)(i.p,{children:["If you want to investigate the raw request and response messages of PID queries, keep reading. If\nyou are unsure of what a PID is you can start by reading\n",(0,t.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/OBD-II_PIDs",children:"this wikipedia page"}),"."]}),"\n",(0,t.jsxs)(i.p,{children:["First step is to enable debug logging on your ",(0,t.jsx)(i.a,{href:"https://www.autopi.io",children:"AutoPi"})," device:"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["On ",(0,t.jsx)(i.a,{href:"https://my.autopi.io",children:"my.autopi.io"})," go to ",(0,t.jsx)(i.strong,{children:"Device > Advanced Settings"})]}),"\n",(0,t.jsxs)(i.li,{children:["Next choose ",(0,t.jsx)(i.strong,{children:"System"})," and go to section ",(0,t.jsx)(i.strong,{children:"Logging"})," > ",(0,t.jsx)(i.strong,{children:"Level"})]}),"\n",(0,t.jsxs)(i.li,{children:["Choose value ",(0,t.jsx)(i.code,{children:"debug"})," and press ",(0,t.jsx)(i.em,{children:"Save"})," (the minion process must be restarted for the change to\ntake effect)"]}),"\n"]}),"\n",(0,t.jsx)(i.admonition,{type:"note",children:(0,t.jsxs)(i.p,{children:["Debug log level or below is only recommended when needed for debugging scenarios as it consumes a\nlot of system resources. For normal operation use ",(0,t.jsx)(i.strong,{children:"warning"})," or ",(0,t.jsx)(i.strong,{children:"info"})," log level."]})}),"\n",(0,t.jsxs)(i.p,{children:["Now that debug logging is enabled we are able to see all raw data transmitted and received between\nthe STN-chip (the chip responsible for communication with the ",(0,t.jsx)(i.a,{href:"https://www.autopi.io/hardware/autopi-canfd-pro",children:"CAN"})," bus of the vehicle) and the\nRaspberry Pi."]}),"\n",(0,t.jsxs)(i.p,{children:["When logged on to the system ",(0,t.jsx)(i.a,{href:"/developer_guides/how-to-ssh-to-your-device",children:"via SSH"})," it is possible to\nfollow the traffic live with the following shell command:"]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"sudo tail -f /var/log/salt/minion | grep obd\n"})}),"\n",(0,t.jsxs)(i.p,{children:["In the example log output below we will look at the PID query for ",(0,t.jsx)(i.strong,{children:"speed"}),". In order to see this\nlog output on your device it is required to have a ",(0,t.jsx)(i.em,{children:"PID Logger"})," setup for PID ",(0,t.jsx)(i.strong,{children:"speed"}),". Take a\nlook at the ",(0,t.jsx)(i.a,{href:"/cloud/obd_library/community_library",children:"'Community Library'"}),"\nguide on more information about how to set those up."]}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"2020-05-19 11:16:56,874 [obd.obd          :269 ][DEBUG   ][2152] Querying command: 010D: Vehicle Speed\n2020-05-19 11:16:56,875 [obd.interfaces.elm327:1027][DEBUG   ][2152] Write: '010D\\r'\n2020-05-19 11:16:56,909 [obd.interfaces.elm327:1082][DEBUG   ][2152] Read: b'7E8 03 41 0D 33 \\r\\r>'\n2020-05-19 11:16:56,913 [salt.loaded.ext.engines.obd_manager:157 ][DEBUG   ][2152] Got query result: 51 kph\n"})}),"\n",(0,t.jsx)(i.p,{children:"The raw request message sent from the Raspberry Pi to the STN/vehicle is:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"2020-05-19 11:16:56,875 [obd.interfaces.elm327:1027][DEBUG   ][2152] Write: '010D\\r'\n"})}),"\n",(0,t.jsx)(i.p,{children:"And the raw response message sent from the STN/vehicle to the Raspberry Pi is:"}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"2020-05-19 11:16:56,909 [obd.interfaces.elm327:1082][DEBUG   ][2152] Read: b'7E8 03 41 0D 33 \\r\\r>'\n"})}),"\n",(0,t.jsxs)(i.p,{children:["If a PID is queried that is not supported by the vehicle a ",(0,t.jsx)(i.code,{children:"NO DATA"})," response is found instead."]})]})}function u(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}}}]);