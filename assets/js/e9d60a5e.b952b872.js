"use strict";(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[9900],{28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>l});var t=i(96540);const s={},r=t.createContext(s);function o(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},47886:(e,n,i)=>{i.d(n,{A:()=>r});i(96540);var t=i(74848);const s={mini:{name:"Mini",image:"/img/hardware/autopi_mini/AutoPi_Mini_5_Top_right.png"},cm4:{name:"TMU CM4",image:"/img/hardware/autopi_tmu_cm4/TMU_Floating_Topside_V1_scaled.png"},pro:{name:"CAN-FD Pro",image:"/img/hardware/autopi_canfd_pro/canfd_pro_trans.png"}};function r(e){let{supported:n}=e;return n?.length?(0,t.jsxs)("div",{style:{padding:"1rem",marginBottom:"1.5rem"},children:[(0,t.jsx)("strong",{children:"This guide is applicable to the following device/ devices:"}),(0,t.jsx)("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.5rem"},children:n.map((e=>{const n=s[e];return(0,t.jsxs)("div",{style:{textAlign:"center"},children:[(0,t.jsx)("img",{src:n.image,alt:n.name,style:{height:"60px",marginBottom:"0.25rem"}}),(0,t.jsx)("div",{children:n.name})]},e)}))})]}):null}},56440:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>h});const t=JSON.parse('{"id":"hardware/accessories/doip-install","title":"DoIP HAT Installation","description":"---","source":"@site/docs/hardware/accessories/doip-install.md","sourceDirName":"hardware/accessories","slug":"/hardware/accessories/doip-install","permalink":"/hardware/accessories/doip-install","draft":false,"unlisted":false,"editUrl":"https://github.com/autopi-io/documentation/edit/master/docs/hardware/accessories/doip-install.md","tags":[],"version":"current","frontMatter":{"id":"doip-install","title":"DoIP HAT Installation","supportedDevices":["cm4"]},"sidebar":"sidebar","previous":{"title":"OBD-II to dual DB9 pinout","permalink":"/hardware/accessories/dualdb9-pinout"},"next":{"title":"Introduction","permalink":"/hardware/accessories/keyfob-hat/"}}');var s=i(74848),r=i(28453),o=i(29030),l=i(47886);const a={id:"doip-install",title:"DoIP HAT Installation",supportedDevices:["cm4"]},d=void 0,c={},h=[{value:"Introduction",id:"introduction",level:2},{value:"What is DoIP?",id:"what-is-doip",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Installation Steps",id:"installation-steps",level:2},{value:"Step 1 \u2013 Open the AutoPi enclosure",id:"step-1--open-the-autopi-enclosure",level:3},{value:"Step 2 \u2013 Prepare the DoIP HAT",id:"step-2--prepare-the-doip-hat",level:3},{value:"Step 3 \u2013 Mount the DoIP HAT",id:"step-3--mount-the-doip-hat",level:3},{value:"Step 4 \u2013 Reassemble the enclosure",id:"step-4--reassemble-the-enclosure",level:3},{value:"Final Checks",id:"final-checks",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function p(e){const n={a:"a",admonition:"admonition",br:"br",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.A,{supported:a.supportedDevices}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.admonition,{title:"Before you begin",type:"caution",children:[(0,s.jsxs)(n.p,{children:["The DoIP solution described in this guide is ",(0,s.jsx)(n.strong,{children:"only supported on AutoPi TMU CM4\u2013based devices"})," and newer revisions."]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["DoIP can be ordered ",(0,s.jsx)(n.strong,{children:"pre-installed"})," from AutoPi. If your device was delivered with DoIP pre-installed, no hardware installation is required."]}),"\n",(0,s.jsxs)(n.li,{children:["When the DoIP HAT is installed, the ",(0,s.jsx)(n.strong,{children:"Ethernet interface on the AutoPi is internally routed to the vehicle"}),".",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.strong,{children:"Do not connect anything to the Ethernet port"})," after installation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Never install a DoIP-enabled device in a vehicle that does not support DoIP (Ethernet diagnostics)."}),(0,s.jsx)(n.br,{}),"\n","Using Ethernet-based diagnostics on a CAN-only vehicle may interfere with vehicle communication and operation."]}),"\n"]})]}),"\n",(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsxs)(n.p,{children:["This guide explains how to physically install the ",(0,s.jsx)(n.strong,{children:"AutoPi DoIP HAT"})," on an AutoPi TMU CM4 device."]}),"\n",(0,s.jsxs)(n.p,{children:["The DoIP HAT enables ",(0,s.jsx)(n.strong,{children:"Diagnostics over IP (DoIP)"}),", allowing diagnostic and programming communication with vehicle ECUs over Ethernet instead of CAN. This is commonly used for:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"UDS diagnostics over Ethernet"}),"\n",(0,s.jsx)(n.li,{children:"ECU flashing and programming"}),"\n",(0,s.jsx)(n.li,{children:"High-bandwidth diagnostic workflows"}),"\n",(0,s.jsx)(n.li,{children:"OEM and engineering tools that require DoIP"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If you are looking for instructions on ",(0,s.jsx)(n.strong,{children:"how to use DoIP after installation"}),", see:",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"/developer_guides/setting-up-doip/",children:"Setting up DoIP on AutoPi"})]}),"\n",(0,s.jsx)(n.h2,{id:"what-is-doip",children:"What is DoIP?"}),"\n",(0,s.jsx)(n.p,{children:"DoIP (Diagnostic over Internet Protocol, ISO 13400) is an automotive diagnostic protocol that transports diagnostic messages over IP-based networks, typically Ethernet."}),"\n",(0,s.jsx)(n.p,{children:"Compared to CAN-based diagnostics, DoIP offers:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Higher bandwidth"}),"\n",(0,s.jsx)(n.li,{children:"Faster flashing and data transfer"}),"\n",(0,s.jsx)(n.li,{children:"Direct compatibility with modern OEM diagnostic tools"}),"\n",(0,s.jsx)(n.li,{children:"Ethernet-based ECU access without CAN bottlenecks"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsx)(n.p,{children:"Before starting, ensure you have the following:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"1 \xd7 AutoPi DoIP HAT PCB"}),"\n",(0,s.jsx)(n.li,{children:"3 \xd7 Plastic screws"}),"\n",(0,s.jsx)(n.li,{children:"2 \xd7 6.5 mm plastic spacers"}),"\n",(0,s.jsx)(n.li,{children:"AutoPi TMU CM4 device"}),"\n",(0,s.jsx)(n.li,{children:"Clean, static-safe workspace"}),"\n"]}),"\n",(0,s.jsxs)(n.admonition,{type:"info",children:[(0,s.jsxs)(n.p,{children:["The DoIP HAT can be purchased from the AutoPi Shop:",(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.a,{href:"https://shop.autopi.io/products/doip-hat-v1-3",children:"DoIP HAT for AutoPi TMU CM4"})]}),(0,s.jsx)(n.p,{children:"You can also order AutoPi devices with the DoIP HAT pre-installed."})]}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{src:"/img/hardware/accessories/doip/doip2.jpg",alt:"AutoPi DoIP HAT",width:"40%"})}),"\n",(0,s.jsx)(n.h2,{id:"installation-steps",children:"Installation Steps"}),"\n",(0,s.jsx)(n.h3,{id:"step-1--open-the-autopi-enclosure",children:"Step 1 \u2013 Open the AutoPi enclosure"}),"\n",(0,s.jsx)(n.p,{children:"Place the AutoPi device upside down and remove the four screws on the bottom of the enclosure."}),"\n",(0,s.jsx)(n.p,{children:"Carefully lift off the top cover to expose the internal PCB."}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{alt:"Opening AutoPi enclosure",width:"460px",src:(0,o.Ay)("/img/hardware/autopi_tmu_cm4/installing_external_antennas/ext_ant2.jpg")})}),"\n",(0,s.jsx)(n.h3,{id:"step-2--prepare-the-doip-hat",children:"Step 2 \u2013 Prepare the DoIP HAT"}),"\n",(0,s.jsxs)(n.p,{children:["Attach the two ",(0,s.jsx)(n.strong,{children:"6.5 mm plastic spacers"})," to the DoIP HAT PCB using the provided plastic screws."]}),"\n",(0,s.jsx)(n.p,{children:"Ensure the spacers are firmly mounted and aligned with the mounting holes."}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{src:"/img/hardware/accessories/doip/doip3.jpg",alt:"Mounting spacers on DoIP HAT",width:"460px"})}),"\n",(0,s.jsx)(n.h3,{id:"step-3--mount-the-doip-hat",children:"Step 3 \u2013 Mount the DoIP HAT"}),"\n",(0,s.jsxs)(n.p,{children:["Carefully align the DoIP HAT with the ",(0,s.jsx)(n.strong,{children:"40-pin GPIO header"})," on the AutoPi main board."]}),"\n",(0,s.jsxs)(n.p,{children:["Press the HAT straight down until the connector is fully seated.",(0,s.jsx)(n.br,{}),"\n","Verify:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The HAT is level"}),"\n",(0,s.jsx)(n.li,{children:"The GPIO connector is fully engaged"}),"\n",(0,s.jsx)(n.li,{children:"No pins are misaligned or bent"}),"\n"]}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{src:"/img/hardware/accessories/doip/doip8.jpg",alt:"DoIP HAT connected to AutoPi",width:"460px"})}),"\n",(0,s.jsx)(n.h3,{id:"step-4--reassemble-the-enclosure",children:"Step 4 \u2013 Reassemble the enclosure"}),"\n",(0,s.jsxs)(n.p,{children:["Reassemble the device using the ",(0,s.jsx)(n.strong,{children:"DoIP-compatible side shield"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"This side shield provides the correct cutout and routing for the internal Ethernet interface used by DoIP."}),"\n",(0,s.jsx)(n.p,{children:"Make sure:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"No cables are pinched"}),"\n",(0,s.jsx)(n.li,{children:"The HAT remains firmly seated"}),"\n",(0,s.jsx)(n.li,{children:"All enclosure screws are tightened evenly"}),"\n"]}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{src:"/img/hardware/accessories/doip/side.jpg",alt:"AutoPi enclosure with DoIP side shield",width:"460px"})}),"\n",(0,s.jsx)(n.h2,{id:"final-checks",children:"Final Checks"}),"\n",(0,s.jsx)(n.p,{children:"After installation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The external Ethernet port on the AutoPi is now ",(0,s.jsx)(n.strong,{children:"reserved for DoIP"})]}),"\n",(0,s.jsx)(n.li,{children:"Do not connect external Ethernet cables"}),"\n",(0,s.jsxs)(n.li,{children:["Install the device ",(0,s.jsx)(n.strong,{children:"only in vehicles that support DoIP"})]}),"\n",(0,s.jsx)(n.li,{children:"Proceed with software configuration before attempting diagnostics"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"The DoIP hardware installation is now complete."}),"\n",(0,s.jsx)(n.p,{children:"Continue with the software setup guide to:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Enable DoIP services"}),"\n",(0,s.jsx)(n.li,{children:"Configure network settings"}),"\n",(0,s.jsx)(n.li,{children:"Validate ECU discovery and communication"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u27a1\ufe0f ",(0,s.jsx)(n.a,{href:"/developer_guides/setting-up-doip/",children:"Setting up DoIP on AutoPi"})]}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.p,{children:"If the device does not detect DoIP ECUs after installation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Verify the HAT is fully seated on the GPIO header"}),"\n",(0,s.jsx)(n.li,{children:"Confirm the vehicle supports DoIP"}),"\n",(0,s.jsx)(n.li,{children:"Check that no external Ethernet device is connected"}),"\n",(0,s.jsx)(n.li,{children:"Ensure the correct AutoPi OS version is installed"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:"You have now successfully installed the AutoPi DoIP HAT."})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);