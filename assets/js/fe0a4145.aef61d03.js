"use strict";(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[489],{3220:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/trip_demo_example_1-63e96801a402a7bcb1a335ceb6d461a2.png"},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>a});var n=i(96540);const o={},r=n.createContext(o);function s(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),n.createElement(r.Provider,{value:t},e.children)}},77066:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>n,toc:()=>d});const n=JSON.parse('{"id":"cloud/fleet_management/vehicles/trips/introduction","title":"Introduction","description":"The Trips section provides in-depth information about the vehicle\'s trips.","source":"@site/docs/cloud/fleet_management/vehicles/trips/index.md","sourceDirName":"cloud/fleet_management/vehicles/trips","slug":"/cloud/fleet_management/vehicles/trips/","permalink":"/cloud/fleet_management/vehicles/trips/","draft":false,"unlisted":false,"editUrl":"https://github.com/autopi-io/documentation/edit/master/docs/cloud/fleet_management/vehicles/trips/index.md","tags":[],"version":"current","frontMatter":{"id":"introduction","title":"Introduction"},"sidebar":"sidebar","previous":{"title":"Groups","permalink":"/cloud/fleet_management/vehicles/fleet-groups"},"next":{"title":"Automatic Exports","permalink":"/cloud/fleet_management/vehicles/trips/automatic-exports"}}');var o=i(74848),r=i(28453);const s={id:"introduction",title:"Introduction"},a=void 0,l={},d=[{value:"Trip Generation",id:"trip-generation",level:2},{value:"On Start Trip Event (Default: <code>vehicle/engine/running</code>)",id:"on-start-trip-event-default-vehicleenginerunning",level:4},{value:"On Stop Trip Event (Default: <code>vehicle/engine/not_running</code>|<code>vehicle/engine/stopped</code>)",id:"on-stop-trip-event-default-vehicleenginenot_runningvehicleenginestopped",level:4},{value:"How to Export Trips",id:"how-to-export-trips",level:2},{value:"Getting started with API",id:"getting-started-with-api",level:3},{value:"Retrieving list of trips and pulling of data",id:"retrieving-list-of-trips-and-pulling-of-data",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.p,{children:["The Trips section provides in-depth information about the vehicle's trips.\nTrips are automatically detected based on the events sent from the device, by default the\n",(0,o.jsx)(t.a,{href:"/cloud/device_management/events/cloud-events-vehicle#engine-events",children:"engine events"})," are used, these can be customized in the\n",(0,o.jsx)(t.a,{href:"/cloud/device_management/advanced_settings/autopi_tmu_cm4/cloud-config-trip#event",children:"advanced settings"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["This will display the trip route on a map along with the starting and ending addresses, duration, and distance travelled.\nAdditionally, you can review ",(0,o.jsx)(t.strong,{children:"events"})," that occurred during each trip, such as 'engine running/stopped' and 'position moving/standstill' and ",(0,o.jsx)(t.strong,{children:"dashboard"})," widgets can display data from a specific trip \u2014 including position, speed, battery level, total odometer, and more. You can easily customize your dashboard to show the metrics that matter most to you. If you\u2019re unsure how to set it up, check out our guides on configuring widgets for a personalized view of your data ",(0,o.jsx)("a",{href:"https://docs.autopi.io/getting_started/autopi_tmu_cm4/cm4-data-troubleshooting/#5-configuring-widgets",target:"_blank",children:"on AutoPi TMU CM4"})," or ",(0,o.jsx)("a",{href:"https://docs.autopi.io/getting_started/autopi_mini/mini-data-troubleshooting/#3-configuring-widgets/",target:"_blank",children:"on AutoPi mini"}),"."]}),"\n",(0,o.jsxs)(t.p,{children:["You also have an option to ",(0,o.jsx)(t.strong,{children:"filter"})," trips based on the desired date range and an option to ",(0,o.jsx)(t.strong,{children:"categorize trips"})," as either personal or business for better differentiation of your fleet operations. Another feature is ",(0,o.jsx)(t.strong,{children:"Export trips"})," that allows you to export trip data to Excel/CSV for easier handling."]}),"\n",(0,o.jsx)(t.p,{children:(0,o.jsx)(t.img,{alt:"Trip example",src:i(3220).A+"",width:"1712",height:"1072"})}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.p,{children:["You can check the events page on ",(0,o.jsx)(t.a,{href:"https://my.autopi.io",children:"my.autopi.io"})," to see all events logged from your device. When troubleshooting it is one of the first places to check if you are unsure why something happened. By looking at the events you can usually get a really good idea about why the device did something."]})}),"\n",(0,o.jsx)(t.h2,{id:"trip-generation",children:"Trip Generation"}),"\n",(0,o.jsx)(t.p,{children:"When the server receives the start|stop trip events it will do the following."}),"\n",(0,o.jsxs)(t.h4,{id:"on-start-trip-event-default-vehicleenginerunning",children:["On Start Trip Event (Default: ",(0,o.jsx)(t.code,{children:"vehicle/engine/running"}),")"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["If closed trip exists, the end time will be checked:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"If older than N minutes (default: 10), a new trip will be created, with the start_time set to the timestamp of the event."}),"\n",(0,o.jsx)(t.li,{children:"If not older than N minutes, it will not create a new trip."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["OR: If open trip exists, the start time will be checked:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"If older than N minutes, a new trip will be created."}),"\n",(0,o.jsx)(t.li,{children:"If not older than N minutes, it will ignore the event, and just keep using the trip from before."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.h4,{id:"on-stop-trip-event-default-vehicleenginenot_runningvehicleenginestopped",children:["On Stop Trip Event (Default: ",(0,o.jsx)(t.code,{children:"vehicle/engine/not_running"}),"|",(0,o.jsx)(t.code,{children:"vehicle/engine/stopped"}),")"]}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Check if a trip is currently in progress using the timestamp of the event.","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"If it can find one, it will close it."}),"\n",(0,o.jsx)(t.li,{children:"If it can't find one, the event will be ignored."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"This means that a typical trip generation lifecycle can look like this"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:"Trip is created"}),"\n",(0,o.jsx)(t.li,{children:"Data is logged"}),"\n",(0,o.jsx)(t.li,{children:"Trip is closed"}),"\n",(0,o.jsx)(t.li,{children:"Trip is reopened if new event is within 10 minutes of the last trip close event."}),"\n",(0,o.jsx)(t.li,{children:"More data is logged"}),"\n",(0,o.jsx)(t.li,{children:"Trip is closed"}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.p,{children:["For EV's it's possible to set up new events so that the trip generation works as expected.\nSee more here: ",(0,o.jsx)(t.a,{href:"/getting_started/electric_vehicles/power-cycle-for-electric-vehicles/",children:"Setup power cycle for an electric vehicle"})]})}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsxs)(t.p,{children:["For ",(0,o.jsx)(t.a,{href:"https://www.autopi.io",children:"AutoPi"})," ",(0,o.jsx)(t.a,{href:"https://www.autopi.io/hardware/autopi-mini",children:"Mini"}),", the start/stop trip events are ",(0,o.jsx)(t.code,{children:"trip/start"})," and ",(0,o.jsx)(t.code,{children:"trip/stop"})]})}),"\n",(0,o.jsx)(t.h2,{id:"how-to-export-trips",children:"How to Export Trips"}),"\n",(0,o.jsx)(t.p,{children:"Our Trips page gives you a complete overview of all trips taken by your vehicle or fleet. You\u2019ll see key details like distance traveled, start and end locations, routes, and even event data \u2014 all displayed through various widgets on your dashboard."}),"\n",(0,o.jsx)(t.h3,{id:"getting-started-with-api",children:"Getting started with API"}),"\n",(0,o.jsxs)(t.p,{children:["For an even deeper dive into your data \u2014 whether you want raw data or aggregated insights \u2014 you can export trip data using our ",(0,o.jsx)("a",{href:"https://api.autopi.io/",target:"_blank",children:"REST API"}),". Here are steps you need to follow, but visit this guide for more detailed step by step guide: ",(0,o.jsx)("a",{href:"https://docs.autopi.io/getting_started/api/",target:"_blank",children:"Getting started with API"})]}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Authenticate: head over to our ",(0,o.jsx)("a",{href:"https://api.autopi.io/",target:"_blank",children:"API documentation portal"}),", where you can authenticate by setting your token. You can use two different tokens for flexibility or send requests manually using tools like Postman."]}),"\n",(0,o.jsx)(t.li,{children:"Explore the Endpoints: once you\u2019re authenticated, you\u2019re ready to start exploring!"}),"\n",(0,o.jsx)(t.li,{children:"Export Your Data: with full API access, you can now pull all the trip data you need \u2014 whether it\u2019s a personal vehicle or your entire fleet."}),"\n"]}),"\n",(0,o.jsx)(t.h3,{id:"retrieving-list-of-trips-and-pulling-of-data",children:"Retrieving list of trips and pulling of data"}),"\n",(0,o.jsx)(t.p,{children:"To get full trip data, you\u2019ll first need to retrieve the list of trips, then pull the specific data you need for each trip\u2019s duration:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["You can access trip data from either the API Endpoint or AutoPi Cloud:","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Trips endpoint provides start/stop times and trip summaries, check out ",(0,o.jsx)("a",{href:"https://api.autopi.io/#/logbook/logbook_trips_list/",target:"_blank",children:"Logbook - trips list"}),"."]}),"\n",(0,o.jsx)(t.li,{children:"Trips page, gives you an opportunity for the trips to be exported to excel/csv format as mentioned above."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["Use these endpoints to pull the data: ",(0,o.jsx)("a",{href:"https://api.autopi.io/#/logbook/logbook_storage_read_list",target:"_blank",children:"Logbook storage read list"})," and ",(0,o.jsx)("a",{href:"https://api.autopi.io/#/logbook/logbook_storage_raw_list",target:"_blank",children:"Logbook storage raw list"})]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["Be sure to follow this guide on how to authenticate and use our REST API to get everything set up smoothly: ",(0,o.jsx)("a",{href:"https://docs.autopi.io/getting_started/api/",target:"_blank",children:"Getting started with API"}),"."]}),"\n",(0,o.jsx)(t.admonition,{type:"note",children:(0,o.jsx)(t.p,{children:"The reason that there is no single endpoint way to retrieve all data for a specific trip is because\nthere can be a lot of data for trips, and our system can query and filter very large amounts of data\nvery very fast, but the downside is that it is not really geared towards downloading large amounts\nof data in one go."})}),"\n",(0,o.jsx)(t.admonition,{type:"tip",children:(0,o.jsxs)(t.p,{children:["For business customers we also support automatic exporting of trips which will call a webhook on\nan external system signalling that an export can be downloaded. Read more about ",(0,o.jsx)("a",{href:"https://docs.autopi.io/cloud/fleet_management/vehicles/trips/automatic-exports/",target:"_blank",children:"Automatic Exports"}),"."]})})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);