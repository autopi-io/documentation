(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[5412],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return p}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),h=u(n),p=a,m=h["".concat(l,".").concat(p)]||h[p]||c[p]||o;return n?r.createElement(m,i(i({ref:t},d),{},{components:n})):r.createElement(m,i({ref:t},d))}));function p(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var u=2;u<o;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},22943:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var r=n(67294),a=function(e){var t=e.title,n=e.url;return r.createElement(r.Fragment,null,r.createElement("h2",null,"Discussion"),r.createElement("p",null,"If you'd like to discuss this topic with us or other fellow community members, you can do so on our community page dedicated for this guide: ",r.createElement("a",{href:n},t),"."),r.createElement("p",null,"You can also write us an email on ",r.createElement("a",{href:"mailto:support@autopi.io"},"support@autopi.io"),". We usually respond back in 24 hours on working days."))}},88913:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return c},default:function(){return p}});var r=n(22122),a=n(19756),o=(n(67294),n(3905)),i=n(22943),s=["components"],l={id:"community_library",title:"Community Library"},u=void 0,d={unversionedId:"cloud/obd_library/community_library",id:"cloud/obd_library/community_library",isDocsHomePage:!1,title:"Community Library",description:"This guide will give an overview of the OBD My Library feature, which is a way to discover the",source:"@site/docs/cloud/obd_library/community_library.mdx",sourceDirName:"cloud/obd_library",slug:"/cloud/obd_library/community_library",permalink:"/cloud/obd_library/community_library",editUrl:"https://github.com/autopi-io/documentation/edit/master/docs/cloud/obd_library/community_library.mdx",tags:[],version:"current",frontMatter:{id:"community_library",title:"Community Library"},sidebar:"sidebar",previous:{title:"My Library",permalink:"/cloud/obd_library/car-explorer-library-manual"},next:{title:"Accounts",permalink:"/cloud/accounts"}},c=[{value:"How And When The Device Reports The Supported PID&#39;s",id:"how-and-when-the-device-reports-the-supported-pids",children:[]},{value:"How to Find And Use PID&#39;s",id:"how-to-find-and-use-pids",children:[]},{value:"How to Add a PID to Your Library",id:"how-to-add-a-pid-to-your-library",children:[]},{value:"How to Create And Share Proprietary PID&#39;s",id:"how-to-create-and-share-proprietary-pids",children:[]},{value:"Troubleshooting if No PID&#39;s are Visible",id:"troubleshooting-if-no-pids-are-visible",children:[]}],h={toc:c};function p(e){var t=e.components,l=(0,a.Z)(e,s);return(0,o.kt)("wrapper",(0,r.Z)({},h,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This guide will give an overview of the OBD My Library feature, which is a way to discover the\navailable PID's in your car, both hidden and public/default OBD-II, and sharing them with the\ncommunity."),(0,o.kt)("p",null,"We will go over the following topics in this guide."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"How and when the car reports the supported PIDS."),(0,o.kt)("li",{parentName:"ul"},"How to find PID's in the Community Library."),(0,o.kt)("li",{parentName:"ul"},"How to add a PID to your library."),(0,o.kt)("li",{parentName:"ul"},"How to create (and share) proprietary PID's."),(0,o.kt)("li",{parentName:"ul"},"Troubleshooting if no PID's are reported from the device.")),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Community library overview",src:n(26467).Z})," "),(0,o.kt)("h2",{id:"how-and-when-the-device-reports-the-supported-pids"},"How And When The Device Reports The Supported PID's"),(0,o.kt)("p",null,"When the device connects to the server, it will check the for the following:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Is it updated to the most recent version?"),(0,o.kt)("li",{parentName:"ul"},"If the active vehicle has no autodetected busses associated."),(0,o.kt)("li",{parentName:"ul"},"OR if the autodetected bus has no PID's associated."),(0,o.kt)("li",{parentName:"ul"},"That the engine has been started since the update. It will only be able to detect the supported\ncommands when it is connected to the bus and the engine is running.")),(0,o.kt)("p",null,"You can see what busses are registered in Accounts > Devices > Select Device > Vehicles Editor > CAN Busses."),(0,o.kt)("p",null,'Then the device will know to report the supported PID\'s. After the device has reported to the cloud\nwith the supported PID\'s, they will show up in the "My Library" tab in the "OBD Library" section.'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"My library overview",src:n(5134).Z})," "),(0,o.kt)("h2",{id:"how-to-find-and-use-pids"},"How to Find And Use PID's"),(0,o.kt)("p",null,"You can also browse the community library, where all PID's are available and searchable.\nThe filters will default to the model, make and year of the vehicle configured on your active\ndevice. The PID's that are shown here are all the PID's that are reported as supported by the makes\nand models of the AutoPi users. Please note that the number of PID's visible here will go up once\ndevices are updated and reports the supported PID's or if people create and share proprietary PID's."),(0,o.kt)("p",null,"If you change the filter to only include the type \"Proprietary\", it will only show the PID's that\nare created by other AutoPi users, and who has chosen to share it with the community. In time these\nproprietary PID's are very likely where you will find the most interesting PID's for your vehicle."),(0,o.kt)("h2",{id:"how-to-add-a-pid-to-your-library"},"How to Add a PID to Your Library"),(0,o.kt)("p",null,"When you find a PID you'd like to try, you can view it, and in the right side, there is a preview\nof the command needed to execute the PID on your car. But the PID may be associated to a specific\nbus that your car does not have, so unless you are filtering on your specific car make and model,\nit will most likely not work, at least not without some changes."),(0,o.kt)("p",null,"By clicking the ",(0,o.kt)("strong",{parentName:"p"},"Add to library")," button, the PID will be associated to the bus on your active\nvehicle. If no bus exists that matches the bus info in the selected PID, it will be created. As\nmentioned above, unless you filter on your specific make and model, even if the PID is supported by\nyour vehicle, you may need to do some fiddling before it will work, which can be done by running\nthe PID directly in the terminal. Keep in mind that the engine may need to be running for it to\nrespond to PID's."),(0,o.kt)("p",null,"Now the PID should be available in ",(0,o.kt)("strong",{parentName:"p"},"My Library"),"."),(0,o.kt)("p",null,"After adding the PID, it is available in the ",(0,o.kt)("strong",{parentName:"p"},"Logging")," section, so you can now set up a logger\nthat runs every N interval, and logs data by executing the specific PID."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Creating a new logger",src:n(58660).Z})),(0,o.kt)("h2",{id:"how-to-create-and-share-proprietary-pids"},"How to Create And Share Proprietary PID's"),(0,o.kt)("p",null,'To create a new PID, click the "Create" button in "My Library".'),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Creating a new PID",src:n(97763).Z})," "),(0,o.kt)("p",null,"You will now need to fill out the following fields:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Name"),(0,o.kt)("br",{parentName:"p"}),"\n","A slug with the name of your PID - it must be unique as it is used by the device when sending the\nlogged value to the cloud (if used in a logger)."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Description"),(0,o.kt)("br",{parentName:"p"}),"\n","If you want to share the PID, a proper description is really nice, and if not, it's still very\nuseful to describe or maybe add a link to where the PID originates from."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Mode and Code"),(0,o.kt)("br",{parentName:"p"}),"\n","These two values together is the PID."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Header"),(0,o.kt)("br",{parentName:"p"}),"\n","The default ",(0,o.kt)("em",{parentName:"p"},"7DF")," value means a Request message. The default should be used unless you need\nanother for some proprietary magic."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Bytes"),(0,o.kt)("br",{parentName:"p"}),"\n","This is the expected length of the response."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Formula"),(0,o.kt)("br",{parentName:"p"}),"\n","The formula is executed on the device, and takes a byte array from one or more response messages,\nand translates it to the actual value, like temperature, speed etc."),(0,o.kt)("p",null,"You may notice that none of the standard PID's has a formula specified. This is because all the\ndefault PID's are identified by their name, and the code that translates the byte response to a\nvalue, is already embedded in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/autopi-io/py-obd"},"library (py-obd)")," we use\nfor communicating with the car. This is only the case for the standard PIDS."),(0,o.kt)("p",null,"The formula is plain python with some added helper functions:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"bytes_to_int"),(0,o.kt)("li",{parentName:"ul"},"bytes_to_hex"),(0,o.kt)("li",{parentName:"ul"},"twos_comp")),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://github.com/autopi-io/py-obd/blob/master/obd/utils.py#L109"},"More info here"),".\nSo to convert a temperature response one would write the following formula:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"bytes_to_int(message.data[2:])-40\n")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"NOTE: Remember to use the data attribute on the message object"),'\nThe above example is the short "formula" way to write the following\n',(0,o.kt)("a",{parentName:"p",href:"https://github.com/autopi-io/py-obd/blob/master/obd/decoders.py#L110"},"decoder function"),"\nYou can also find more examples in the above link."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"For prototyping, you can execute the PID on your device by using the terminal, then copy the byte\nresponse into a python terminal, insert the above helper functions, to be able to test the parsing\ndirectly in the terminal."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Unit, Min and Max"),(0,o.kt)("br",{parentName:"p"}),"\n","Select a unit that matches your data or write your own.\nLike the name, this unit is used when the device stores the response value of the PID, for easier\nparsing and displaying of the value in the dashboard widgets.\nMin and max are also used when storing and displaying the data."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Bus"),(0,o.kt)("br",{parentName:"p"}),"\n","To use a PID, you need to associate it to one of the busses on your vehicle. It may be as simple as\nassociating it to the auto detected one, but you may also want to create a custom one. This can be\ndone in the Accounts > Devices > Select Device > Vehicles Editor > CAN Busses. You don't have to\nassociate the PID with a bus straight away."),(0,o.kt)("p",null,"Now click save, and your new PID is created, and can be found in ",(0,o.kt)("strong",{parentName:"p"},"My Library"),".\nIf you want to share the PID, it needs to be associated to at least one bus, when you have done\nthat, and saved the PID, you can now click the ",(0,o.kt)("strong",{parentName:"p"},"Share with community"),", after which the PID will\nbe discoverable in the ",(0,o.kt)("strong",{parentName:"p"},"Community Library"),", and other users can find it. You can also verify that\nit looks correct, and has the right make and model by searching for the PID."),(0,o.kt)("h2",{id:"troubleshooting-if-no-pids-are-visible"},"Troubleshooting if No PID's are Visible"),(0,o.kt)("p",null,"If your PID's aren't listed in ",(0,o.kt)("strong",{parentName:"p"},"My Library"),", check the following things."),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"That your device is updated to the most recent version."),(0,o.kt)("li",{parentName:"ul"},"That the device has been online since the update."),(0,o.kt)("li",{parentName:"ul"},"That the engine has been running for a little while since the update."),(0,o.kt)("li",{parentName:"ul"},"That the vehicle associated to your device, has the correct make and model specified."),(0,o.kt)("li",{parentName:"ul"},"That you have no errors in the log on the device.")),(0,o.kt)("p",null,"See ",(0,o.kt)("a",{parentName:"p",href:"/getting_started/developer_guides/autopi-logs"},"this guide")," if you are unsure how to get the logs from the device."),(0,o.kt)(i.$,{title:"How to use the 'OBD Library' feature",url:"https://community.autopi.io/t/how-to-use-the-car-explorer-feature/960",mdxType:"Discussion"}))}p.isMDXComponent=!0},58660:function(e,t,n){"use strict";t.Z=n.p+"assets/images/creating_a_new_logger-09b9a799734e09b3d3b3a5bb08b5b5d4.png"},97763:function(e,t,n){"use strict";t.Z=n.p+"assets/images/creating_a_new_pid-3392b735e0776a7b12d3ee5cfc70270c.png"},5134:function(e,t,n){"use strict";t.Z=n.p+"assets/images/my_library_overview-20a4b19234fafde101f736e2c7bf3e40.png"},26467:function(e,t,n){"use strict";t.Z=n.p+"assets/images/updated_overview-03f75ae9d69ec25548f513eb32a72f7b.png"}}]);