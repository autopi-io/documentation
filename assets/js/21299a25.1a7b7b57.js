(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[9406],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return d},kt:function(){return u}});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),p=c(n),u=a,k=p["".concat(s,".").concat(u)]||p[u]||m[u]||o;return n?r.createElement(k,i(i({ref:t},d),{},{components:n})):r.createElement(k,i({ref:t},d))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},77847:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var r=n(22122),a=n(19756),o=(n(67294),n(3905)),i=["components"],l={id:"core-services-ec2x-manager",title:"Ec2X Manager"},s=void 0,c={unversionedId:"core/services/core-services-ec2x-manager",id:"core/services/core-services-ec2x-manager",isDocsHomePage:!1,title:"Ec2X Manager",description:"Handlers",source:"@site/docs/core/services/ec2x_manager.md",sourceDirName:"core/services",slug:"/core/services/core-services-ec2x-manager",permalink:"/core/services/core-services-ec2x-manager",editUrl:"https://github.com/autopi-io/documentation/edit/master/docs/core/services/ec2x_manager.md",tags:[],version:"current",frontMatter:{id:"core-services-ec2x-manager",title:"Ec2X Manager"},sidebar:"sidebar",previous:{title:"Crypto Manager",permalink:"/core/services/core-services-crypto-manager"},next:{title:"Event Reactor",permalink:"/core/services/core-services-event-reactor"}},d=[{value:"Handlers",id:"handlers",children:[{value:"<code>connection</code>",id:"connection",children:[]},{value:"<code>delete_sms</code>",id:"delete_sms",children:[]},{value:"<code>download</code>",id:"download",children:[]},{value:"<code>exec</code>",id:"exec",children:[]},{value:"<code>list_sms</code>",id:"list_sms",children:[]},{value:"<code>power</code>",id:"power",children:[]},{value:"<code>read_sms</code>",id:"read_sms",children:[]},{value:"<code>sms_format_config</code>",id:"sms_format_config",children:[]},{value:"<code>sync_time</code>",id:"sync_time",children:[]},{value:"<code>sync_time</code>",id:"sync_time-1",children:[]},{value:"<code>upload</code>",id:"upload",children:[]}]}],m={toc:d};function p(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"handlers"},"Handlers"),(0,o.kt)("h3",{id:"connection"},(0,o.kt)("inlineCode",{parentName:"h3"},"connection")),(0,o.kt)("p",null,"Manages current connection."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"OPTIONAL ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"close"))," (bool): Close serial connection? Default value is ",(0,o.kt)("inlineCode",{parentName:"li"},"False"),". ")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"delete_sms"},(0,o.kt)("inlineCode",{parentName:"h3"},"delete_sms")),(0,o.kt)("p",null,"Delete messages from message storage."),(0,o.kt)("p",null,"It is possible to list possible for deleting if no indexes are passed and the ",(0,o.kt)("inlineCode",{parentName:"p"},"delete_all")," kwarg is not passed (or set to ",(0,o.kt)("inlineCode",{parentName:"p"},"False"),")."),(0,o.kt)("p",null,"Keyword argumnets:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"index (int): The index of the message to be deleted. Default None."),(0,o.kt)("li",{parentName:"ul"},"delete_all (bool): Set this boolean to true if all messages stored in the modem should be deleted. Default ",(0,o.kt)("inlineCode",{parentName:"li"},"False"),"."),(0,o.kt)("li",{parentName:"ul"},"confirm (bool): A confirm flag when deleting messages. Default ",(0,o.kt)("inlineCode",{parentName:"li"},"False"),".")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"download"},(0,o.kt)("inlineCode",{parentName:"h3"},"download")),(0,o.kt)("p",null,"Downloads a file from the EC2X device."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"cmd"))," (str): AT command to perform the actual download."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"size"))," (int): Size of the file to download."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"dest"))," (str): Destination path to which the downloaded file is to be written.")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"exec"},(0,o.kt)("inlineCode",{parentName:"h3"},"exec")),(0,o.kt)("p",null,"Runs an AT command against the EC2X device."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"cmd"))," (str): AT command to execute.")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"list_sms"},(0,o.kt)("inlineCode",{parentName:"h3"},"list_sms")),(0,o.kt)("p",null,"List all messages from message storage."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In order to use this function, you need to first execute ",(0,o.kt)("inlineCode",{parentName:"p"},"ec2x.sms_format_config value=1")))),(0,o.kt)("p",null,"to set the correct format of the SMS messages."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"power"},(0,o.kt)("inlineCode",{parentName:"h3"},"power")),(0,o.kt)("p",null,"Powers down the EC2X device. Afterwards the module will start automatically.\nA 30-second wait is included after power off to allow the module time to recover before receiving any new requests."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"cmd"))," (str): AT command to perform the power down.")),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"OPTIONAL ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"reason"))," (str): Reason code that tells why we decided to power down. Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"unknown"),".")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"read_sms"},(0,o.kt)("inlineCode",{parentName:"h3"},"read_sms")),(0,o.kt)("p",null,"Reads SMS messages stored in the modem and processes them into ",(0,o.kt)("inlineCode",{parentName:"p"},"system/sms/received")," events.\nThose events hold information such as the timestamp of the message (when it was received by the\nmodem), the sender and the text. Messages will be deleted from the modem after being processed."),(0,o.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This function will configure the SMS format to text mode. This is necessary in order to read"))),(0,o.kt)("p",null,"the messages correctly. If necessary, revert the configuration with the ",(0,o.kt)("inlineCode",{parentName:"p"},"ec2x.sms_format_config"),"\ncommand."),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"sms_format_config"},(0,o.kt)("inlineCode",{parentName:"h3"},"sms_format_config")),(0,o.kt)("p",null,"Gets or sets the SMS format configuration."),(0,o.kt)("p",null,"Possible values:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"0: PDU mode - entire TP data units used (hex responses). This is the default value."),(0,o.kt)("li",{parentName:"ul"},"1: Text mode - headers and body of the message given as separate parameters.")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"sync_time"},(0,o.kt)("inlineCode",{parentName:"h3"},"sync_time")),(0,o.kt)("p",null,"Synchronizes the system clock with the EC2X device."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"OPTIONAL ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"force"))," (bool): Default is ",(0,o.kt)("inlineCode",{parentName:"li"},"False"),".")),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"sync_time-1"},(0,o.kt)("inlineCode",{parentName:"h3"},"sync_time")),(0,o.kt)("p",null,"Ensures following keys for return value:"),(0,o.kt)("p",null,"clock_synced: boolean\nnpt_enabled: boolean"),(0,o.kt)("hr",null),(0,o.kt)("h3",{id:"upload"},(0,o.kt)("inlineCode",{parentName:"h3"},"upload")),(0,o.kt)("p",null,"Uploads a file to the EC2X device."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"ARGUMENTS")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"cmd"))," (str): AT command to perform the actual upload."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},(0,o.kt)("inlineCode",{parentName:"strong"},"src"))," (str): Destination path to the file to be uploaded.")))}p.isMDXComponent=!0}}]);