"use strict";(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[9855],{4748:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/api_frontpage-d2e366bace40189a4d20d6cbd45324ac.jpg"},16340:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/account_overview-a806690fe1aadae78d5d294ec7e1ea71.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var o=n(96540);const i={},s=o.createContext(i);function a(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:t},e.children)}},39700:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>h});const o=JSON.parse('{"id":"getting_started/api/api-intro","title":"Introduction","description":"You are able to use the AutoPi REST API with your browser, which will display our","source":"@site/docs/getting_started/api/index.md","sourceDirName":"getting_started/api","slug":"/getting_started/api/","permalink":"/getting_started/api/","draft":false,"unlisted":false,"editUrl":"https://github.com/autopi-io/documentation/edit/master/docs/getting_started/api/index.md","tags":[],"version":"current","frontMatter":{"id":"api-intro","title":"Introduction"},"sidebar":"sidebar","previous":{"title":"Power Cycles","permalink":"/getting_started/electric_vehicles/power-cycle-for-electric-vehicles"},"next":{"title":"Command Webhook Callbacks","permalink":"/getting_started/api/command-webhook-callbacks"}}');var i=n(74848),s=n(28453);const a={id:"api-intro",title:"Introduction"},r=void 0,l={},h=[{value:"Authentication",id:"authentication",level:2},{value:"API Tokens",id:"api-tokens",level:3},{value:"Creation of the API Token",id:"creation-of-the-api-token",level:4},{value:"JWT Token",id:"jwt-token",level:3},{value:"1. Capture the Token by Using the Browser Developer Tools.",id:"1-capture-the-token-by-using-the-browser-developer-tools",level:4},{value:"2. Manually Call the Auth Endpoint to get the Token.",id:"2-manually-call-the-auth-endpoint-to-get-the-token",level:4},{value:"Sending the Requests Manually Using Postman or Similar",id:"sending-the-requests-manually-using-postman-or-similar",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["You are able to use the ",(0,i.jsx)(t.a,{href:"https://api.autopi.io",children:"AutoPi REST API"})," with your browser, which will display our\nauto-generated documentation portal."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsx)(t.p,{children:"The documentation is auto-generated from our API, which means that the documentation will always reflect the API and\nwill always be up to date, but being auto-generated it unfortunately also does sacrifice some readability, but we\nare working to improve this. And if you find something that you feel is not adequately documented, please let us know."})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"api_frontpage",src:n(4748).A+"",width:"1488",height:"1303"})}),"\n",(0,i.jsx)(t.h2,{id:"authentication",children:"Authentication"}),"\n",(0,i.jsx)(t.p,{children:"If you want to test the endpoints, you can authenticate in the API documentation portal by setting the token to use\nwhen authenticating. In the picture above you can see there is a green 'Authorize' button which you need to press.\nThis is where you'll be pasting your token."}),"\n",(0,i.jsx)(t.p,{children:"It is possible to authenticate using two different tokens."}),"\n",(0,i.jsx)(t.h3,{id:"api-tokens",children:"API Tokens"}),"\n",(0,i.jsx)(t.p,{children:"It is specifically made for users who want to make requests to the API, and is the recommended way to make\nauthenticated requests to the API."}),"\n",(0,i.jsx)(t.p,{children:"To use the token, send an authorization header like this, in all requests:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"Authorization: APIToken YOUR_TOKEN\n"})}),"\n",(0,i.jsx)(t.h4,{id:"creation-of-the-api-token",children:"Creation of the API Token"}),"\n",(0,i.jsxs)(t.p,{children:["You can ",(0,i.jsx)(t.strong,{children:"generate the new API Token"})," in the AutoPi ",(0,i.jsx)(t.a,{href:"https://my.autopi.io",children:"Cloud"}),". Clicking on the in the ",(0,i.jsx)(t.em,{children:"Account tab"})," in the side menu gets you to the ",(0,i.jsx)(t.em,{children:"Account Page"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["On the ",(0,i.jsx)(t.em,{children:"Account"})," Page you may see an API Tokens ",(0,i.jsx)(t.em,{children:"tab"})," which gets you to the API Token creation part.\nHere you are able to create a new API Token by giving it a name and there is an ",(0,i.jsx)(t.em,{children:"option"})," to set an expiration date for the token if you need and clicking the ",(0,i.jsx)(t.em,{children:"Create"})," button."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"account_page",src:n(16340).A+"",width:"1654",height:"944"})}),"\n",(0,i.jsx)(t.h3,{id:"jwt-token",children:"JWT Token"}),"\n",(0,i.jsx)(t.p,{children:"This token is the one used by the frontend when logging in."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"It expires relatively shortly."}),"\n",(0,i.jsx)(t.li,{children:"You need to enter you username and password to acquire the token."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"You can get the JWT token in two different ways:"}),"\n",(0,i.jsx)(t.h4,{id:"1-capture-the-token-by-using-the-browser-developer-tools",children:"1. Capture the Token by Using the Browser Developer Tools."}),"\n",(0,i.jsxs)(t.p,{children:["The easiest way is to capture the token by logging into the ",(0,i.jsx)(t.a,{href:"https://www.autopi.io/software-platform/cloud-management",children:"Cloud"}),", with the developer tools open in your favourite\nbrowser, with the network tab open, and then skip to step 6 in the below step by step guide."]}),"\n",(0,i.jsx)(t.h4,{id:"2-manually-call-the-auth-endpoint-to-get-the-token",children:"2. Manually Call the Auth Endpoint to get the Token."}),"\n",(0,i.jsx)(t.p,{children:"You can follow the steps below to call the login endpoint manually."}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsx)(t.li,{children:'Click the "auth" app to fold out the available endpoints.'}),"\n",(0,i.jsx)(t.li,{children:'Click the "/auth/login/".'}),"\n",(0,i.jsx)(t.li,{children:'Click the "try it out" button to the right.'}),"\n",(0,i.jsx)(t.li,{children:"Change the payload to look like this (remove the username field, and fill out the email and password fields, like so:"}),"\n"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'   {\n      "email": "your_email",\n      "password": "your_insanely_complex_password"\n   }\n'})}),"\n",(0,i.jsxs)(t.ol,{start:"5",children:["\n",(0,i.jsx)(t.li,{children:'Click the blue "execute" button.'}),"\n",(0,i.jsx)(t.li,{children:"Now you can copy the entire token."}),"\n",(0,i.jsx)(t.li,{children:'Now click the green "Authorize" button in the top right of the page and paste the token in the field.'}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:'Remember to write "Bearer" in front of the token - like so:'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.4pXwtyQKCwSrYfcj9O7MGVv5ustPbx0GmYY7jHZL8es\n"})}),"\n",(0,i.jsxs)(t.ol,{start:"8",children:["\n",(0,i.jsx)(t.li,{children:"After clicking close, you should now be able to call the other authenticated endpoints."}),"\n"]}),"\n",(0,i.jsx)(t.h2,{id:"sending-the-requests-manually-using-postman-or-similar",children:"Sending the Requests Manually Using Postman or Similar"}),"\n",(0,i.jsx)(t.p,{children:"Alternatively, if you are unable to use the above portal, or if you'd rather use something like Postman or similar,\nyou can still see the requests and parameters in the portal, but to call them manually, see the below steps."}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Authenticating manually w/o interactive API documentation portal"}),"\nYou can do the above steps manually by following these steps:"]}),"\n",(0,i.jsxs)(t.ol,{children:["\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsxs)(t.p,{children:["Authentication\nTo obtain an authentication token, send a post request to ",(0,i.jsx)(t.a,{href:"https://api.autopi.io/auth/login/",children:"https://api.autopi.io/auth/login/"}),"\nwith header"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"Content-Type: application/json\n"})}),"\n",(0,i.jsx)(t.p,{children:"and body"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:'{ "email": "your email address", "password": "your password" }\n'})}),"\n",(0,i.jsx)(t.p,{children:"In the response, you will find the token used to authenticate the below requests"}),"\n"]}),"\n",(0,i.jsxs)(t.li,{children:["\n",(0,i.jsx)(t.p,{children:"To request data from our API, the authorization header should be set."}),"\n",(0,i.jsx)(t.p,{children:'You will need to set the "Authorization" header on the requests. To set the header, use the below values:'}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{children:"# if you're using a JWT token\nAuthorization: Bearer YOUR_TOKEN\n\n# if you're using an API token\nAuthorization: APIToken YOUR_TOKEN\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Using developer tools to see how endpoints are used"}),"\nIf you find something where you are unsure how to proceed, you can log in to my.autopi.io and use the developer tools\nof your favourite browser to see the requests and parameters sent by the application, and if you are still experiencing\nissues, you can send us an email to ",(0,i.jsx)(t.a,{href:"mailto:support@autopi.io",children:"support@autopi.io"})]}),"\n",(0,i.jsx)(t.p,{children:"Happy developing, and as always, if you run into issues, exceptions, have suggestions etc, please let us know."})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);