(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[9654],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return s},kt:function(){return m}});var o=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=o.createContext({}),d=function(e){var t=o.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},s=function(e){var t=d(e.components);return o.createElement(u.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},p=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,u=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=d(n),m=i,h=p["".concat(u,".").concat(m)]||p[m]||l[m]||r;return n?o.createElement(h,a(a({ref:t},s),{},{components:n})):o.createElement(h,a({ref:t},s))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=p;var c={};for(var u in t)hasOwnProperty.call(t,u)&&(c[u]=t[u]);c.originalType=e,c.mdxType="string"==typeof e?e:i,a[1]=c;for(var d=2;d<r;d++)a[d]=n[d];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}p.displayName="MDXCreateElement"},483:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return c},contentTitle:function(){return u},metadata:function(){return d},toc:function(){return s},default:function(){return p}});var o=n(2122),i=n(9756),r=(n(7294),n(3905)),a=["components"],c={id:"move-to-dedicated-environment",title:"Move a device to a dedicated environment"},u=void 0,d={unversionedId:"guides/business/move-to-dedicated-environment",id:"guides/business/move-to-dedicated-environment",isDocsHomePage:!1,title:"Move a device to a dedicated environment",description:"Hello everyone!",source:"@site/docs/guides/business/move_to_dedicated_environment.md",sourceDirName:"guides/business",slug:"/guides/business/move-to-dedicated-environment",permalink:"/guides/business/move-to-dedicated-environment",tags:[],version:"current",frontMatter:{id:"move-to-dedicated-environment",title:"Move a device to a dedicated environment"},sidebar:"guidesSidebar",previous:{title:"Send device data to own server",permalink:"/guides/api/send-device-data-to-own-server"},next:{title:"Debug Raw PID Queries",permalink:"/guides/obd-ii/debug-raw-pid-queries"}},s=[],l={toc:s};function p(e){var t=e.components,c=(0,i.Z)(e,a);return(0,r.kt)("wrapper",(0,o.Z)({},l,c,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Hello everyone!"),(0,r.kt)("p",null,"In this short guide we will talk about how you can move your device from the default production\nenvironment to your dedicated environment provided by AutoPi. Unfortunately, this process moves\nonly one device at a time, so you will need to repeat the steps for each device you need to move."),(0,r.kt)("p",null,"Essentially, what we will be doing is to change the url of the ",(0,r.kt)("inlineCode",{parentName:"p"},"/boot/host.aliases")," file to\npoint to your dedicated environment. Firstly, we need to change the master URL to point to your\ndedicated server, in this example it is ",(0,r.kt)("inlineCode",{parentName:"p"},"dedicated.autopi.io"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},'# if running the command directly on the device (e.g. SSH)\n$ echo "hub dedicated.autopi.io" > "/boot/host.aliases"\n\n# if running the command through a web terminal\n$ cmd.shell \'echo "hub dedicated.autopi.io" > "/boot/host.aliases"\'\n')),(0,r.kt)("p",null,"Next, we need to make sure that the master is specified correctly in the salt-minion configuration\nfile:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# if running the command directly on the device (e.g. SSH)\n$ autopi minionutil.change_master hub confirm=True\n\n# if running the command through a web terminal\n$ minionutil.change_master hub confirm=True\n")),(0,r.kt)("p",null,"The above command will ensure the salt-minion configuration is set correctly and restart the\nsalt-minion."),(0,r.kt)("p",null,"Lastly, we need to accept the new device's keys. You can do that by logging in to your\nwebpage (",(0,r.kt)("a",{parentName:"p",href:"https://dedicated.autopi.io/#account/devices"},"https://dedicated.autopi.io/#account/devices"),") and registering your device if it isn't\nalready."),(0,r.kt)("p",null,"Once you have it registered and you have brought the device online, accept the key."),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Key state denied",src:n(2537).Z})),(0,r.kt)("p",null,"When that is done, you'll need to restart the salt-minion once more. You can do that by issuing\nthe following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"# if running the command directly on the device (e.g. SSH)\n$ sudo systemctl restart salt-minion\n\n# if running the command through a web terminal\n$ minionutil.restart\n")),(0,r.kt)("p",null,"And that's it. Your device should now be connecting directly to your dedicated environment and\nyou should be able to make configuration changes, execute commands and so on. If you experience\nany issues with the process, please send a mail to our support team over at ",(0,r.kt)("a",{parentName:"p",href:"mailto:support@autopi.io"},"support@autopi.io"),"."))}p.isMDXComponent=!0},2537:function(e,t,n){"use strict";t.Z=n.p+"assets/images/key_state_denied-c3c4d9deb33342fe92e13db32598ac74.jpg"}}]);