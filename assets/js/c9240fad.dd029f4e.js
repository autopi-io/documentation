(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[6098],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var o=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=o.createContext({}),l=function(e){var t=o.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},h=o.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),h=l(n),m=a,f=h["".concat(c,".").concat(m)]||h[m]||d[m]||i;return n?o.createElement(f,r(r({ref:t},p),{},{components:n})):o.createElement(f,r({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,r=new Array(i);r[0]=h;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,r[1]=s;for(var l=2;l<i;l++)r[l]=n[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,n)}h.displayName="MDXCreateElement"},3284:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return c},metadata:function(){return l},toc:function(){return p},default:function(){return h}});var o=n(22122),a=n(19756),i=(n(67294),n(3905)),r=["components"],s={id:"keyfob-interface",title:"Keyless Interface Specification"},c=void 0,l={unversionedId:"hardware/accessories/keyfob-hat/keyfob-interface",id:"hardware/accessories/keyfob-hat/keyfob-interface",isDocsHomePage:!1,title:"Keyless Interface Specification",description:"This solution has been discontinued and is no longer supported by the platform.",source:"@site/docs/hardware/accessories/keyfob-hat/interface-specifications.md",sourceDirName:"hardware/accessories/keyfob-hat",slug:"/hardware/accessories/keyfob-hat/keyfob-interface",permalink:"/hardware/accessories/keyfob-hat/keyfob-interface",editUrl:"https://github.com/autopi-io/documentation/edit/master/docs/hardware/accessories/keyfob-hat/interface-specifications.md",tags:[],version:"current",frontMatter:{id:"keyfob-interface",title:"Keyless Interface Specification"},sidebar:"sidebar",previous:{title:"Introduction",permalink:"/hardware/accessories/keyfob-hat/keyfob-intro"},next:{title:"Keyfob HAT Install",permalink:"/hardware/accessories/keyfob-hat/keyfob-hat-install"}},p=[{value:"API for Key Controls",id:"api-for-key-controls",children:[]},{value:"Power Settings to Optimize Sleep Scheduling",id:"power-settings-to-optimize-sleep-scheduling",children:[]},{value:"Offline Mode",id:"offline-mode",children:[]}],d={toc:p};function h(e){var t=e.components,n=(0,a.Z)(e,r);return(0,i.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This solution has been discontinued and is no longer supported by the platform. "))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"The keyless entry solution described here only works with the ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi")," ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io/hardware/autopi-tmu-cm4"},"TMU CM4")," and newer editions"))),(0,i.kt)("p",null,"This section descripes the interface for the keyless keyfob solution provided through the BLE extension available through ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi"),". The BLE extension is a small extension board, which makes it possible to wake the ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi")," through a BLE connection and then send BLE commands to control a keyfob through the same interface. The BLE connection makes it possible to unlock/lock the car in areas where there is no internet connection. "),(0,i.kt)("h2",{id:"api-for-key-controls"},"API for Key Controls"),(0,i.kt)("p",null,"Commands can be sent from another system to the ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi")," server and there on to control the vehicle. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/hardware/accessories/keyfob/command_flow_1.jpg",alt:"Keyfob command flow",width:"60%"})),(0,i.kt)("h2",{id:"power-settings-to-optimize-sleep-scheduling"},"Power Settings to Optimize Sleep Scheduling"),(0,i.kt)("p",null,"It is possible to upload booking schedules to the ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi")," backend. These will be transformed into sleeping schedules for the ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi")," to ensure that the device is powered on at the correct times."),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/hardware/accessories/keyfob/power_settings_1.jpg",alt:"Keyfob power settings control",width:"60%"})),(0,i.kt)("h2",{id:"offline-mode"},"Offline Mode"),(0,i.kt)("p",null,"When the device is offline (not connected to LTE/GSM network), it is important that the user can still control the car. Therefore, a set of offline functions will be available through Bluetooth. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/hardware/accessories/keyfob/offline_mode_1.jpg",alt:"Keyfob offline mode",width:"60%"})),(0,i.kt)("p",null,"From an App it is possible to communicate directly with the device using BLE. "),(0,i.kt)("p",null,"To ensure security, the device will have a rolling key pair needed for smartphones to be able to send the commands. This key needs to be synced to the smartphone during the booking, to allow unlock of the car. These keys will be distributed by the ",(0,i.kt)("a",{parentName:"p",href:"https://www.autopi.io"},"AutoPi")," backend and will be updated on the device and made available for the external system. "),(0,i.kt)("p",{align:"center"},(0,i.kt)("img",{src:"/img/hardware/accessories/keyfob/offline_mode_2.jpg",alt:"Keyfob offline mode",width:"60%"})),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"In case you have any questions, don't hesitate to contact us at ",(0,i.kt)("a",{parentName:"p",href:"mailto:support@autopi.io"},"support@autopi.io"),"."))))}h.isMDXComponent=!0}}]);