"use strict";(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[6345],{17603:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/qmistatus-6ad71a946e4c0f10d004161b3bdb9339.jpg"},21373:(e,n,t)=>{t.d(n,{A:()=>o});const o=t.p+"assets/images/lsusb-5f720494e7c939aced31596788e0738a.jpg"},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var o=t(96540);const i={},r=o.createContext(i);function s(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},47886:(e,n,t)=>{t.d(n,{A:()=>r});t(96540);var o=t(74848);const i={mini:{name:"Mini",image:"/img/hardware/autopi_mini/AutoPi_Mini_5_Top_right.png"},cm4:{name:"TMU CM4",image:"/img/hardware/autopi_tmu_cm4/TMU_Floating_Topside_V1_scaled.png"},pro:{name:"CAN-FD Pro",image:"/img/hardware/autopi_canfd_pro/canfd_pro_trans.png"}};function r(e){let{supported:n}=e;return n?.length?(0,o.jsxs)("div",{style:{padding:"1rem",marginBottom:"1.5rem"},children:[(0,o.jsx)("strong",{children:"This guide is applicable to the following device/ devices:"}),(0,o.jsx)("div",{style:{display:"flex",gap:"1.5rem",marginTop:"0.5rem"},children:n.map((e=>{const n=i[e];return(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("img",{src:n.image,alt:n.name,style:{height:"60px",marginBottom:"0.25rem"}}),(0,o.jsx)("div",{children:n.name})]},e)}))})]}):null}},55657:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>h,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"getting_started/autopi_canfd_pro/pro-4g-internet-setup-troubleshooting","title":"4G Internet Setup Troubleshooting","description":"---","source":"@site/docs/getting_started/autopi_canfd_pro/4g_internet_setup_troubleshooting.md","sourceDirName":"getting_started/autopi_canfd_pro","slug":"/getting_started/autopi_canfd_pro/pro-4g-internet-setup-troubleshooting","permalink":"/getting_started/autopi_canfd_pro/pro-4g-internet-setup-troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/autopi-io/documentation/edit/master/docs/getting_started/autopi_canfd_pro/4g_internet_setup_troubleshooting.md","tags":[],"version":"current","frontMatter":{"id":"pro-4g-internet-setup-troubleshooting","title":"4G Internet Setup Troubleshooting","supportedDevices":["pro"]},"sidebar":"sidebar","previous":{"title":"Data Troubleshooting","permalink":"/getting_started/autopi_canfd_pro/pro-data-troubleshooting"},"next":{"title":"Getting started","permalink":"/getting_started/autopi_canfd_pro_casing/"}}');var i=t(74848),r=t(28453),s=(t(58162),t(47886));const a={id:"pro-4g-internet-setup-troubleshooting",title:"4G Internet Setup Troubleshooting",supportedDevices:["pro"]},c=void 0,h={},d=[{value:"Prerequisites:",id:"prerequisites",level:3},{value:"Check SIM Card",id:"check-sim-card",level:3},{value:"Check Modem on Hardware",id:"check-modem-on-hardware",level:3},{value:"Check Modem Setup",id:"check-modem-setup",level:3},{value:"Checking qmi-manager Status",id:"checking-qmi-manager-status",level:3},{value:"Further Checking of Network",id:"further-checking-of-network",level:3},{value:"Tweaks",id:"tweaks",level:3},{value:"Check Connections",id:"check-connections",level:3}];function l(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.A,{supported:a.supportedDevices}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:["You are experiencing issues connecting to the internet, when connected to the WiFi hotspot on the ",(0,i.jsx)(n.a,{href:"https://www.autopi.io",children:"AutoPi"})," Dongle. These instructions help you step-by-step to identify and resolve common problems related to SIM card setup, modem recognition, and network configurations. By following these guidelines, you can ensure a stable 4G internet connection for your AutoPi device."]}),"\n",(0,i.jsx)(n.admonition,{title:"Our support team is here to help you.",type:"tip",children:(0,i.jsxs)(n.p,{children:["Get in touch here or send an email to ",(0,i.jsx)(n.a,{href:"mailto:support@autopi.io",children:"support@autopi.io"})]})}),"\n",(0,i.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites:"}),"\n",(0,i.jsxs)(n.p,{children:["Before following this guide, you must have completed the initial ",(0,i.jsx)(n.a,{href:"https://docs.autopi.io/getting_started/autopi_canfd_pro/",children:"Setup guide"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"check-sim-card",children:"Check SIM Card"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Your SIM card must be setup for data. To check this, insert the SIM into another device, like a smartphone or similar. When inserted in the other device you must be able to browse the web."}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["If you ordered a branded version of the ",(0,i.jsx)(n.a,{href:"https://www.autopi.io",children:"AutoPi"})," (Verizon/AT&T), please verify that the network carrier of the SIM card is the same as the brand of the ",(0,i.jsx)(n.a,{href:"https://www.autopi.io",children:"AutoPi"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Verify that the SIM card is not pin locked and if it is that you have entered the pin code in the settings."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"check-modem-on-hardware",children:"Check Modem on Hardware"}),"\n",(0,i.jsx)(n.p,{children:"In the terminal on the WiFi, check that the modem has been found. This can be done by writing the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'cmd.run "lsusb" \n'})}),"\n",(0,i.jsx)(n.p,{children:"The output of the command should be similar to this:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"lsusb",src:t(21373).A+"",width:"500",height:"889"})}),"\n",(0,i.jsx)(n.p,{children:"The important part to look for is the Modem. The ID will be different depending on which modem your device is equipped with:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"Modem Manufacturer"})}),(0,i.jsx)(n.th,{children:(0,i.jsx)(n.strong,{children:"ID"})})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Quectel"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"2c7c:0121"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Telit"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"1bc7:1031"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["If you ordered a 4G edition and you don't find the modem in your list, then please contact ",(0,i.jsx)(n.a,{href:"mailto:support@autopi.io",children:"support@autopi.io"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"check-modem-setup",children:"Check Modem Setup"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check PDP Context:"}),(0,i.jsx)(n.br,{}),"\n","If your devices is using a Telit Modem is using software version 1.22.7 or newer,\nhere's a command you can run to verify that the modem has been set up correctly:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"modem.connection pdp_context\n"})}),"\n",(0,i.jsx)(n.p,{children:"This should return a message that looks like either of these responses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"**value:**  \n**- apn: ''**  \n**cid: 1**  \n**pdp_type: IPV4V6**  \n"})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"**value:**  \n**- apn: ''**  \n**cid: 1**  \n**pdp_type: IPV4V6**  \n**- apn: 'ims'**  \n**cid: 2**  \n**pdp_type: IPV4V6**  \n"})}),"\n",(0,i.jsx)(n.p,{children:"Incase your software version is older than 1.22.7, you can run the following command to get the same information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"modem.connection execute AT+CGDCONT?\n"})}),"\n",(0,i.jsx)(n.p,{children:"This should return a message that looks like either of these responses:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'**data: \'+CGDCONT: 1, "IPV4V6","",0,0,0,0\'**  \n'})}),"\n",(0,i.jsx)(n.p,{children:"or"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'**Data:**   \n**- \'+CGDCONT:1,"IPV4V6","",0,0,0,0\'**   \n**- \'+CGDCONT:2,"IPV4V6","ims","",0,0,0,0\'**\n'})}),"\n",(0,i.jsx)(n.p,{children:"If you get the second message after running either command then you can reconfigure the modem by running these three commands:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'cmd.run "systemctl stop qmi-manager"\nmodem.connection execute AT+CGDCONT=2\ncmd.run "systemctl restart qmi-manager"\n'})}),"\n",(0,i.jsx)(n.p,{children:"After restarting your devices you can run the first command again to verify you get the first message."}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Check Firmware Switch:"}),(0,i.jsx)(n.br,{}),"\n","Check if the firmware switch is set correctly by running this command if you are using software version 1.22.7 or newer."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"modem.connection active_firmware_image\n"})}),"\n",(0,i.jsx)(n.p,{children:"this should return a message that looks like this."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'**_stamp: "the curent date"**  \n**_type: active_firmware_image**  \n**net_conf:global**  \n**storage_conf: ram**  \n'})}),"\n",(0,i.jsxs)(n.p,{children:["Here we are looking to see if the ",(0,i.jsx)(n.code,{children:"net_conf"})," is set to global."]}),"\n",(0,i.jsx)(n.p,{children:"Incase your software version is older than 1.22.7, you can run the following command to get the same information:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"modem.connection execute AT#FWSWITCH?\n"})}),"\n",(0,i.jsx)(n.p,{children:"This should return with a message that looks like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"FWSWITCH:40:1\n"})}),"\n",(0,i.jsxs)(n.p,{children:["In case the FWSWITCH does not start with 40 or ",(0,i.jsx)(n.code,{children:"net_conf"})," is not global this can be reconfigured manually by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"modem.connection execute AT#FWSWITCH=40,1\n"})}),"\n",(0,i.jsx)(n.h3,{id:"checking-qmi-manager-status",children:"Checking qmi-manager Status"}),"\n",(0,i.jsx)(n.p,{children:"The device contains a software manager, which ensure stable connection to the internet. This is called qmi-manager. To check status, please write the following command in the terminal:"}),"\n",(0,i.jsx)(n.p,{children:"The output should be similar what you can see in the image below:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.img,{alt:"qmistatus",src:t(17603).A+"",width:"500",height:"889"})}),"\n",(0,i.jsx)(n.h3,{id:"further-checking-of-network",children:"Further Checking of Network"}),"\n",(0,i.jsx)(n.p,{children:"If your device still isn't online, you can try running the following two commands. They will tell you a bit more about why the network manager fails:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'cmd.run "qmi-manager down"\ncmd.run "qmi-manager up"\n'})}),"\n",(0,i.jsx)(n.p,{children:"If the last command reports issue with detecting the SIM card, then double check the orientation of the SIM card and try again."}),"\n",(0,i.jsx)(n.h3,{id:"tweaks",children:"Tweaks"}),"\n",(0,i.jsx)(n.p,{children:"If you experience connection issues where the connection drops sometimes and/or if it is online, but not shown as online on my.autopi.io, then you can try to tweak the MTU from the default value: 1500, to a lower value, in increments (ex. 1500 -> 1450 -> etc).\nThis can be done on the local configuration tool, by connecting to the device hotspot and opening local autopi on local.autopi.io in your browser."}),"\n",(0,i.jsx)(n.p,{children:"From the terminal located in the top right corner on the webpage, you can run the following two commands to update the MTU and save the changes:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"grains.set qmi:mtu xxxx\nstate.sls network.wwan.qmi.config\n"})}),"\n",(0,i.jsx)(n.p,{children:"To verify that these changes have been saved, you can run the following two commands, here you want to check that first command retruns the same value you set, and that the second command where mtu= the same value as the one we set."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'grains.get qmi:mtu \ncmd.run "cat /etc/udhcpc/qmi.override"\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"NOTE:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["For US Verizon customers, please try this ",(0,i.jsx)(n.strong,{children:"MTU=1428"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["For other customer, please try this ",(0,i.jsx)(n.strong,{children:"MTU=1280"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["If the connection is still not online, then please contact ",(0,i.jsx)(n.a,{href:"mailto:support@autopi.io",children:"support@autopi.io"})," for additional help."]}),"\n",(0,i.jsx)(n.h3,{id:"check-connections",children:"Check Connections"}),"\n",(0,i.jsx)(n.p,{children:"You can to check if the device can connect to the internet though the 4g connection you can run the following command:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'cmd.run "ping -c 5 -I wwan0 google.com"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can also check the connection to the ",(0,i.jsx)(n.a,{href:"https://www.autopi.io",children:"AutoPi"})," ",(0,i.jsx)(n.a,{href:"https://www.autopi.io/software-platform/cloud-management",children:"Cloud"})," service by running the following command:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'cmd.run "curl -v my.autopi.io"\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},58162:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);const o="homeGrid_MM9h",i="cardGrid_IPp8";var r=t(74848);const s=e=>{let{children:n,home:t=!1}=e;return(0,r.jsx)("div",{className:t?o:i,children:n})}}}]);