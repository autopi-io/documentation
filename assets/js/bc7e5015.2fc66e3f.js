"use strict";(self.webpackChunkdocumentation_2=self.webpackChunkdocumentation_2||[]).push([[6219],{24945:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/favicon-7dbd17fbde1c59c10c74d100e88248c4.ico"},28453:(e,i,s)=>{s.d(i,{R:()=>r,x:()=>d});var n=s(96540);const o={},t=n.createContext(o);function r(e){const i=n.useContext(t);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function d(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),n.createElement(t.Provider,{value:i},e.children)}},41092:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/support_icon-9d734923a944c5b17019c3da8704fec7.png"},58162:(e,i,s)=>{s.d(i,{A:()=>r});s(96540);const n="homeGrid_MM9h",o="cardGrid_IPp8";var t=s(74848);const r=e=>{let{children:i,home:s=!1}=e;return(0,t.jsx)("div",{className:s?n:o,children:i})}},68326:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>d,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"cloud/obd-ii/debug-raw-pid-queries","title":"Debug Raw PID Queries","description":"If you want to investigate the raw request and response messages of PID queries, keep reading. If","source":"@site/docs/cloud/obd-ii/debug_raw_pid_queries.mdx","sourceDirName":"cloud/obd-ii","slug":"/cloud/obd-ii/debug-raw-pid-queries","permalink":"/cloud/obd-ii/debug-raw-pid-queries","draft":false,"unlisted":false,"editUrl":"https://github.com/autopi-io/documentation/edit/master/docs/cloud/obd-ii/debug_raw_pid_queries.mdx","tags":[],"version":"current","frontMatter":{"id":"debug-raw-pid-queries","title":"Debug Raw PID Queries"},"sidebar":"sidebar","previous":{"title":"Create CAN Signal Loggers","permalink":"/cloud/obd-ii/create-can-signal-loggers"},"next":{"title":"Log Raw CAN Messages","permalink":"/cloud/obd-ii/log-raw-can-messages"}}');var o=s(74848),t=s(28453),r=s(58162);const d={id:"debug-raw-pid-queries",title:"Debug Raw PID Queries"},a=void 0,c={},l=[{value:"Let&#39;s keep in touch!",id:"lets-keep-in-touch",level:3}];function h(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(i.p,{children:["If you want to investigate the raw request and response messages of PID queries, keep reading. If\nyou are unsure of what a PID is you can start by reading\n",(0,o.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/OBD-II_PIDs",children:"this wikipedia page"}),"."]}),"\n",(0,o.jsxs)(i.p,{children:["First step is to enable debug logging on your ",(0,o.jsx)(i.a,{href:"https://www.autopi.io",children:"AutoPi"})," device:"]}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:["On ",(0,o.jsx)(i.a,{href:"https://my.autopi.io",children:"my.autopi.io"})," go to ",(0,o.jsx)(i.strong,{children:"Device > Advanced Settings"})]}),"\n",(0,o.jsxs)(i.li,{children:["Next choose ",(0,o.jsx)(i.strong,{children:"System"})," and go to section ",(0,o.jsx)(i.strong,{children:"Logging"})," > ",(0,o.jsx)(i.strong,{children:"Level"})]}),"\n",(0,o.jsxs)(i.li,{children:["Choose value ",(0,o.jsx)(i.code,{children:"debug"})," and press ",(0,o.jsx)(i.em,{children:"Save"})," (the minion process must be restarted for the change to\ntake effect)"]}),"\n"]}),"\n",(0,o.jsx)(i.admonition,{type:"note",children:(0,o.jsxs)(i.p,{children:["Debug log level or below is only recommended when needed for debugging scenarios as it consumes a\nlot of system resources. For normal operation use ",(0,o.jsx)(i.strong,{children:"warning"})," or ",(0,o.jsx)(i.strong,{children:"info"})," log level."]})}),"\n",(0,o.jsxs)(i.p,{children:["Now that debug logging is enabled we are able to see all raw data transmitted and received between\nthe STN-chip (the chip responsible for communication with the ",(0,o.jsx)(i.a,{href:"https://www.autopi.io/hardware/autopi-canfd-pro",children:"CAN"})," bus of the vehicle) and the\nRaspberry Pi."]}),"\n",(0,o.jsxs)(i.p,{children:["When logged on to the system ",(0,o.jsx)(i.a,{href:"/developer_guides/how-to-ssh-to-your-device",children:"via SSH"})," it is possible to\nfollow the traffic live with the following shell command:"]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"sudo tail -f /var/log/salt/minion | grep obd\n"})}),"\n",(0,o.jsxs)(i.p,{children:["In the example log output below we will look at the PID query for ",(0,o.jsx)(i.strong,{children:"speed"}),". In order to see this\nlog output on your device it is required to have a ",(0,o.jsx)(i.em,{children:"PID Logger"})," setup for PID ",(0,o.jsx)(i.strong,{children:"speed"}),". Take a\nlook at the ",(0,o.jsx)(i.a,{href:"/cloud/obd_library/community_library",children:"'Community Library'"}),"\nguide on more information about how to set those up."]}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"2020-05-19 11:16:56,874 [obd.obd          :269 ][DEBUG   ][2152] Querying command: 010D: Vehicle Speed\n2020-05-19 11:16:56,875 [obd.interfaces.elm327:1027][DEBUG   ][2152] Write: '010D\\r'\n2020-05-19 11:16:56,909 [obd.interfaces.elm327:1082][DEBUG   ][2152] Read: b'7E8 03 41 0D 33 \\r\\r>'\n2020-05-19 11:16:56,913 [salt.loaded.ext.engines.obd_manager:157 ][DEBUG   ][2152] Got query result: 51 kph\n"})}),"\n",(0,o.jsx)(i.p,{children:"The raw request message sent from the Raspberry Pi to the STN/vehicle is:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"2020-05-19 11:16:56,875 [obd.interfaces.elm327:1027][DEBUG   ][2152] Write: '010D\\r'\n"})}),"\n",(0,o.jsx)(i.p,{children:"And the raw response message sent from the STN/vehicle to the Raspberry Pi is:"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{children:"2020-05-19 11:16:56,909 [obd.interfaces.elm327:1082][DEBUG   ][2152] Read: b'7E8 03 41 0D 33 \\r\\r>'\n"})}),"\n",(0,o.jsxs)(i.p,{children:["If a PID is queried that is not supported by the vehicle a ",(0,o.jsx)(i.code,{children:"NO DATA"})," response is found instead."]}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(i.h3,{id:"lets-keep-in-touch",children:"Let's keep in touch!"}),"\n",(0,o.jsx)(i.p,{children:"Thank you for choosing AutoPi. We're excited to see what you will achieve with your AutoPi device!"}),"\n",(0,o.jsxs)(r.A,{home:!0,children:[(0,o.jsx)(i.p,{children:(0,o.jsxs)(i.a,{href:"https://www.autopi.io/contact/",children:[(0,o.jsx)(i.img,{src:s(24945).A+"",width:"16",height:"16"})," ",(0,o.jsx)(i.strong,{children:"Contact our sales team"})," You can build on top of AutoPi."]})}),(0,o.jsx)(i.p,{children:(0,o.jsxs)(i.a,{href:"https://www.autopi.io/support/",children:[(0,o.jsx)(i.img,{src:s(41092).A+"",width:"512",height:"512"})," ",(0,o.jsx)(i.strong,{children:"Get help from our support team"})," Let us know about your technical questions."]})})]})]})}function u(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}}}]);